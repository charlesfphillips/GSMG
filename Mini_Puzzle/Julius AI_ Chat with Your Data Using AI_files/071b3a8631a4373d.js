;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3fb52c10-9867-ca77-40c7-349ce5ec8c61")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,292270,632811,e=>{"use strict";var t=e.i(475254);let a=(0,t.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);e.s(["LogOut",()=>a],292270);let s=(0,t.default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["UserCog",()=>s],632811)},840433,e=>{"use strict";let t=(0,e.i(475254).default)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);e.s(["Pin",()=>t],840433)},308306,e=>{"use strict";var t=e.i(956364),a=e.i(750377),s=e.i(118991),r=e.i(911899),i=e.i(978445),n=(0,t.createAnatomy)("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator").build(),l=e=>e.ids?.root??`accordion:${e.id}`,o=(e,t)=>e.ids?.itemContent?.(t)??`accordion:${e.id}:content:${t}`,d=(e,t)=>e.ids?.itemTrigger?.(t)??`accordion:${e.id}:trigger:${t}`,c=e=>{let t=CSS.escape(l(e)),s=`[data-controls][data-ownedby='${t}']:not([disabled])`;return(0,a.queryAll)(e.getById(l(e)),s)},{and:u,not:m}=(0,r.createGuards)(),h=(0,r.createMachine)({props:({props:e})=>({collapsible:!1,multiple:!1,orientation:"vertical",defaultValue:[],...e}),initialState:()=>"idle",context:({prop:e,bindable:t})=>({focusedValue:t(()=>({defaultValue:null,sync:!0,onChange(t){e("onFocusChange")?.({value:t})}})),value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(t){e("onValueChange")?.({value:t})}}))}),computed:{isHorizontal:({prop:e})=>"horizontal"===e("orientation")},on:{"VALUE.SET":{actions:["setValue"]}},states:{idle:{on:{"TRIGGER.FOCUS":{target:"focused",actions:["setFocusedValue"]}}},focused:{on:{"GOTO.NEXT":{actions:["focusNextTrigger"]},"GOTO.PREV":{actions:["focusPrevTrigger"]},"TRIGGER.CLICK":[{guard:u("isExpanded","canToggle"),actions:["collapse"]},{guard:m("isExpanded"),actions:["expand"]}],"GOTO.FIRST":{actions:["focusFirstTrigger"]},"GOTO.LAST":{actions:["focusLastTrigger"]},"TRIGGER.BLUR":{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{canToggle:({prop:e})=>!!e("collapsible")||!!e("multiple"),isExpanded:({context:e,event:t})=>e.get("value").includes(t.value)},actions:{collapse({context:e,prop:t,event:a}){let r=t("multiple")?(0,s.remove)(e.get("value"),a.value):[];e.set("value",r)},expand({context:e,prop:t,event:a}){let r=t("multiple")?(0,s.add)(e.get("value"),a.value):[a.value];e.set("value",r)},focusFirstTrigger({scope:e}){(0,s.first)(c(e))?.focus()},focusLastTrigger({scope:e}){(0,s.last)(c(e))?.focus()},focusNextTrigger({context:e,scope:t}){let s=e.get("focusedValue");if(!s)return;let r=(0,a.nextById)(c(t),d(t,s));r?.focus()},focusPrevTrigger({context:e,scope:t}){let s=e.get("focusedValue");if(!s)return;let r=(0,a.prevById)(c(t),d(t,s));r?.focus()},setFocusedValue({context:e,event:t}){e.set("focusedValue",t.value)},clearFocusedValue({context:e}){e.set("focusedValue",null)},setValue({context:e,event:t}){e.set("value",t.value)},coarseValue({context:e,prop:t}){!t("multiple")&&e.get("value").length>1&&((0,s.warn)("The value of accordion should be a single value when multiple is false."),e.set("value",[e.get("value")[0]]))}}}}),x=(0,i.createProps)()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value","defaultValue"]);(0,s.createSplitProps)(x);var p=(0,i.createProps)()(["value","disabled"]);(0,s.createSplitProps)(p);var g=e.i(204299),f=e.i(271645),b=e.i(7652),v=e.i(962288);let j=e=>{let t=(0,f.useId)(),{getRootNode:s}=(0,b.useEnvironmentContext)(),{dir:r}=(0,v.useLocaleContext)(),i={id:t,dir:r,getRootNode:s,...e};return function(e,t){let{send:s,context:r,prop:i,scope:c,computed:u}=e,m=r.get("focusedValue"),h=r.get("value"),x=i("multiple");function p(e){return{expanded:h.includes(e.value),focused:m===e.value,disabled:!!(e.disabled??i("disabled"))}}return{focusedValue:m,value:h,setValue:function(e){let t=e;!x&&t.length>1&&(t=[t[0]]),s({type:"VALUE.SET",value:t})},getItemState:p,getRootProps:()=>t.element({...n.root.attrs,dir:i("dir"),id:l(c),"data-orientation":i("orientation")}),getItemProps(e){let s,r=p(e);return t.element({...n.item.attrs,dir:i("dir"),id:(s=e.value,c.ids?.item?.(s)??`accordion:${c.id}:item:${s}`),"data-state":r.expanded?"open":"closed","data-focus":(0,a.dataAttr)(r.focused),"data-disabled":(0,a.dataAttr)(r.disabled),"data-orientation":i("orientation")})},getItemContentProps(e){let s=p(e);return t.element({...n.itemContent.attrs,dir:i("dir"),role:"region",id:o(c,e.value),"aria-labelledby":d(c,e.value),hidden:!s.expanded,"data-state":s.expanded?"open":"closed","data-disabled":(0,a.dataAttr)(s.disabled),"data-focus":(0,a.dataAttr)(s.focused),"data-orientation":i("orientation")})},getItemIndicatorProps(e){let s=p(e);return t.element({...n.itemIndicator.attrs,dir:i("dir"),"aria-hidden":!0,"data-state":s.expanded?"open":"closed","data-disabled":(0,a.dataAttr)(s.disabled),"data-focus":(0,a.dataAttr)(s.focused),"data-orientation":i("orientation")})},getItemTriggerProps(e){let{value:r}=e,m=p(e);return t.button({...n.itemTrigger.attrs,type:"button",dir:i("dir"),id:d(c,r),"aria-controls":o(c,r),"data-controls":o(c,r),"aria-expanded":m.expanded,disabled:m.disabled,"data-orientation":i("orientation"),"aria-disabled":m.disabled,"data-state":m.expanded?"open":"closed","data-ownedby":l(c),onFocus(){m.disabled||s({type:"TRIGGER.FOCUS",value:r})},onBlur(){m.disabled||s({type:"TRIGGER.BLUR"})},onClick(e){m.disabled||((0,a.isSafari)()&&e.currentTarget.focus(),s({type:"TRIGGER.CLICK",value:r}))},onKeyDown(e){if(e.defaultPrevented||m.disabled)return;let t={ArrowDown(){u("isHorizontal")||s({type:"GOTO.NEXT",value:r})},ArrowUp(){u("isHorizontal")||s({type:"GOTO.PREV",value:r})},ArrowRight(){u("isHorizontal")&&s({type:"GOTO.NEXT",value:r})},ArrowLeft(){u("isHorizontal")&&s({type:"GOTO.PREV",value:r})},Home(){s({type:"GOTO.FIRST",value:r})},End(){s({type:"GOTO.LAST",value:r})}}[(0,a.getEventKey)(e,{dir:i("dir"),orientation:i("orientation")})];t&&(t(e),e.preventDefault())}})}}}((0,g.useMachine)(h,i),g.normalizeProps)};e.s(["useAccordion",()=>j],308306)},414396,e=>{"use strict";e.s([],745897),e.i(745897);var t=e.i(532592);let[a,s]=(0,t.createContext)({name:"AccordionContext",hookName:"useAccordionContext",providerName:"<AccordionProvider />"}),r=e=>e.children(s());var i=e.i(843476),n=e.i(911899),l=e.i(271645);let[o,d]=(0,t.createContext)({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItemProvider />"});var c=e.i(11825),u=e.i(287942),m=e.i(594601);let[h,x]=(0,t.createContext)({name:"AccordionItemPropsContext",hookName:"useAccordionItemPropsContext",providerName:"<AccordionItemPropsProvider />"}),p=(0,u.createSplitProps)(),g=(0,l.forwardRef)((e,t)=>{let[a,r]=p(e,["value","disabled"]),l=s(),d=(0,m.useRenderStrategyPropsContext)(),u=(0,n.mergeProps)(l.getItemProps(a),r),x=l.getItemState(a),g=l.getItemContentProps(a);return(0,i.jsx)(h,{value:a,children:(0,i.jsx)(o,{value:x,children:(0,i.jsx)(c.CollapsibleRoot,{ref:t,open:x.expanded,ids:{content:g.id},...d,...u})})})});g.displayName="AccordionItem";var f=e.i(864132);let b=(0,u.createSplitProps)(),v=(0,l.forwardRef)((e,t)=>{let a=s(),r=x(),[,l]=b(a.getItemContentProps(r),["hidden","data-state"]),o=(0,n.mergeProps)(l,e);return(0,i.jsx)(f.CollapsibleContent,{ref:t,...o})});v.displayName="AccordionItemContent";let j=e=>e.children(d());var y=e.i(978605);let w=(0,l.forwardRef)((e,t)=>{let a=s(),r=x(),l=(0,n.mergeProps)(a.getItemIndicatorProps(r),e);return(0,i.jsx)(y.ark.div,{...l,ref:t})});w.displayName="AccordionItemIndicator";var N=e.i(969911);let k=(0,l.forwardRef)((e,t)=>{let a=s(),r=x(),l=(0,N.useCollapsibleContext)(),o=a.getItemTriggerProps(r),d=(0,n.mergeProps)({...o,"aria-controls":l.isUnmounted?void 0:o["aria-controls"]},e);return(0,i.jsx)(y.ark.button,{...d,ref:t})});k.displayName="AccordionItemTrigger";var T=e.i(308306);let A=(0,u.createSplitProps)(),C=(0,l.forwardRef)((e,t)=>{let[s,r]=(0,m.splitRenderStrategyProps)(e),[l,o]=A(r,["collapsible","defaultValue","disabled","id","ids","multiple","onFocusChange","onValueChange","orientation","value"]),d=(0,T.useAccordion)(l),c=(0,n.mergeProps)(d.getRootProps(),o);return(0,i.jsx)(a,{value:d,children:(0,i.jsx)(m.RenderStrategyPropsProvider,{value:s,children:(0,i.jsx)(y.ark.div,{...c,ref:t})})})});C.displayName="AccordionRoot";let _=(0,u.createSplitProps)(),S=(0,l.forwardRef)((e,t)=>{let[s,r]=(0,m.splitRenderStrategyProps)(e),[{value:l},o]=_(r,["value"]),d=(0,n.mergeProps)(l.getRootProps(),o);return(0,i.jsx)(a,{value:l,children:(0,i.jsx)(m.RenderStrategyPropsProvider,{value:s,children:(0,i.jsx)(y.ark.div,{...d,ref:t})})})});S.displayName="AccordionRootProvider",e.s(["Context",()=>r,"Item",()=>g,"ItemContent",()=>v,"ItemContext",()=>j,"ItemIndicator",()=>w,"ItemTrigger",()=>k,"Root",()=>C,"RootProvider",()=>S],506493);var I=e.i(506493);e.s(["Accordion",0,I],414396)},429643,937392,e=>{"use strict";var t,a,s=e.i(52563),r=e.i(954616),i=e.i(266027),n=e.i(912598),l=e.i(394073),o=e.i(647163);let d=async({accessToken:e})=>{let t=await (0,o.customFetch)(`${l.BASE_API}/user/notifications/unread`,{headers:{Authorization:`Bearer ${e}`}});return await t.json()},c=async({accessToken:e})=>{let t=await (0,o.customFetch)(`${l.BASE_API}/user/notifications/all`,{headers:{Authorization:`Bearer ${e}`}});return await t.json()},u=async({accessToken:e,update:t})=>{let a=await (0,o.customFetch)(`${l.BASE_API}/user/notifications`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await a.json()},m=async({accessToken:e,update:t})=>{let a=await (0,o.customFetch)(`${l.BASE_API}/user/notifications/${t.id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});return await a.json()},h=async({accessToken:e,updateId:t})=>{let a=await (0,o.customFetch)(`${l.BASE_API}/user/notifications/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});return await a.json()},x=async({accessToken:e,updateId:t})=>{let a=await (0,o.customFetch)(`${l.BASE_API}/user/notifications/${t}/read`,{method:"POST",headers:{Authorization:`Bearer ${e}`}});return await a.json()};e.s(["useCreateNotification",0,()=>{let{getAccessTokenSilently:e}=(0,s.useAuth0)(),t=(0,n.useQueryClient)();return(0,r.useMutation)({mutationFn:async t=>{let a=await e();return await u({accessToken:a,update:t})},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]})}})},"useDeleteNotification",0,()=>{let{getAccessTokenSilently:e}=(0,s.useAuth0)(),t=(0,n.useQueryClient)();return(0,r.useMutation)({mutationFn:async t=>{let a=await e();await h({accessToken:a,updateId:t})},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]})}})},"useGetAllNotifications",0,()=>{let{getAccessTokenSilently:e}=(0,s.useAuth0)();return(0,i.useQuery)({queryKey:["notifications"],queryFn:async()=>{let t=await e();return await c({accessToken:t})},refetchOnWindowFocus:!1})},"useGetUnreadUserNotifications",0,()=>{let{getAccessTokenSilently:e}=(0,s.useAuth0)();return(0,i.useQuery)({queryKey:["notifications","unread"],queryFn:async()=>{let t=await e();return await d({accessToken:t})}})},"useReadNotification",0,()=>{let{getAccessTokenSilently:e}=(0,s.useAuth0)(),t=(0,n.useQueryClient)();return(0,r.useMutation)({mutationFn:async t=>{let a=await e();await Promise.all(t.map(e=>x({accessToken:a,updateId:e})))},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]})}})},"useUpdateNotification",0,()=>{let{getAccessTokenSilently:e}=(0,s.useAuth0)(),t=(0,n.useQueryClient)();return(0,r.useMutation)({mutationFn:async t=>{let a=await e();return await m({accessToken:a,update:t})},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]})}})}],429643);var p=((t={}).PRODUCT_UPDATE="PRODUCT_UPDATE",t.USER_NOTIFICATION="USER_NOTIFICATION",t),g=((a={}).USER="USER",a.TEAM="TEAM",a.GLOBAL="GLOBAL",a);e.s(["NotificationTypeRecord",0,{PRODUCT_UPDATE:{value:"PRODUCT_UPDATE",label:"Product Update"},USER_NOTIFICATION:{value:"USER_NOTIFICATION",label:"User Notification"}},"NotificationTypes",()=>p,"TargetTypeRecord",0,{USER:{value:"USER",label:"User"},TEAM:{value:"TEAM",label:"Team"},GLOBAL:{value:"GLOBAL",label:"Global"}},"TargetTypes",()=>g],937392)},245423,e=>{"use strict";let t=(0,e.i(475254).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);e.s(["Bell",()=>t],245423)},611802,e=>{"use strict";var t=e.i(271645),a=e.i(843476);function s(e="https://app.cal.com/embed/embed.js"){var t;let a,r;return t=window,a=function(e,t){e.q.push(t)},r=t.document,t.Cal=t.Cal||function(){let s=t.Cal,i=arguments;if(s.loaded||(s.ns={},s.q=s.q||[],r.head.appendChild(r.createElement("script")).src=e,s.loaded=!0),"init"===i[0]){let e=function(){a(e,arguments)},t=i[1];e.q=e.q||[],"string"==typeof t?(s.ns[t]=s.ns[t]||e,a(s.ns[t],i),a(s,["initNamespace",t])):a(s,i);return}a(s,i)},window.Cal}s.toString();let r=function(e){let{calLink:r,calOrigin:i,namespace:n="",config:l,initConfig:o={},embedJsUrl:d,...c}=e;if(!r)throw Error("calLink is required");let u=(0,t.useRef)(!1),m=function(e){let[a,r]=(0,t.useState)();return(0,t.useEffect)(()=>{r(()=>s(e))},[]),a}(d),h=(0,t.useRef)(null);return(0,t.useEffect)(()=>{if(!m||u.current||!h.current)return;u.current=!0;let e=h.current;n?(m("init",n,{...o,origin:i}),m.ns[n]("inline",{elementOrSelector:e,calLink:r,config:l})):(m("init",{...o,origin:i}),m("inline",{elementOrSelector:e,calLink:r,config:l}))},[m,r,l,n,i,o]),m?(0,a.jsx)("div",{ref:h,...c}):null};function i(e){let{namespace:t="",embedJsUrl:a}="string"==typeof e?{embedJsUrl:e}:e??{};return new Promise(function e(r){let i=s(a);i("init",t);let n=t?i.ns[t]:i;n?r(n):setTimeout(()=>{e(r)},50)})}e.s(["default",()=>r,"getCalApi",()=>i])},110031,174504,775132,e=>{"use strict";var t=e.i(823429);e.s(["SquarePen",()=>t.default],110031);var a=e.i(843476),s=e.i(271645),r=e.i(822315),i=e.i(245423),n=e.i(263488),l=e.i(618566),o=e.i(604570),d=e.i(429643),c=e.i(937392),u=e.i(38037),m=e.i(994179),h=e.i(630374),x=e.i(471435),p=e.i(269035),g=e.i(127341),f=e.i(616525),b=e.i(647163);e.s(["default",0,()=>{let e=(0,l.useRouter)(),[t,v]=(0,s.useState)(!1),[j,y]=(0,s.useState)("unread"),{data:w=[],isLoading:N,isError:k}=(0,d.useGetAllNotifications)(),{setHasNotifications:T}=(0,f.useUserContext)(),{data:A=[]}=(0,d.useGetUnreadUserNotifications)(),C=(0,d.useReadNotification)(),[_,S]=(0,s.useState)([]);(0,s.useEffect)(()=>{!t&&A.length>0&&S(A)},[A,t]);let I=async()=>{o.posthog.capture("notifications_button_clicked"),S(A),v(!0),A.length>0&&(T(!1),await C.mutateAsync(A.map(e=>e.id)))},E=t=>{if(!Array.isArray(t)||0===t.length||N||k)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] h-full",children:[(0,a.jsx)(n.Mail,{className:"w-24 h-24 text-muted-secondary"}),(0,a.jsx)("p",{className:"text-lg text-muted-secondary mt-4",children:N?"Loading notifications...":"You're up to date! No new notifications."})]});let s={};t.forEach(e=>{let t=(0,r.default)(e.created_at).format("YYYY-MM");s[t]||(s[t]=[]),s[t].push(e)});let i=Object.keys(s).sort((e,t)=>e<t?1:-1);return(0,a.jsx)("div",{className:"space-y-6 py-2",children:i.map(t=>{let n=s[t],l={};n.forEach(e=>{let t=(0,r.default)(e.created_at).format("YYYY-MM-DD");l[t]||(l[t]=[]),l[t].push(e)});let d=Object.keys(l).sort((e,t)=>e<t?1:-1);return(0,a.jsxs)("div",{className:"space-y-3 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-medium text-foreground mb-4",children:(0,r.default)(t).format("MMMM YYYY")}),(0,a.jsx)("div",{className:"space-y-6",children:d.map(t=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-3 text-base font-medium text-muted-secondary",children:(0,r.default)(t).format("MMMM D")}),l[t].map(t=>{let s,r=(e=>{if(e.metadata_json){let t=(0,u.safeParseJSONMatt)(e.metadata_json);if(t&&"object"==typeof t)return t?.promotion_url||t?.workflow_url||t?.invite_url}return!1})(t);return(0,a.jsx)("div",{className:(0,b.cn)("relative pl-4 border-border border mb-2.5 bg-accent/20 p-4 rounded-xl","hover:bg-muted/10 transition-all duration-200",r&&"cursor-pointer hover:bg-accent/40"),onClick:r?()=>(t=>{if(t.metadata_json){let a=(0,u.safeParseJSON)(t.metadata_json);if("string"==typeof a)try{a=JSON.parse(a)}catch(e){console.error("Failed to parse metadata JSON",e)}a&&"object"==typeof a&&"workflow_url"in a?(o.posthog.capture("notification_workflow_clicked",{notification_id:t.id,workflow_url:a.workflow_url}),v(!1),e.push(a.workflow_url)):a&&"object"==typeof a&&"promotion_url"in a?(o.posthog.capture("notification_promotion_clicked",{notification_id:t.id,promotion_url:a.promotion_url}),v(!1),e.push(a.promotion_url)):a&&"object"==typeof a&&"invite_url"in a&&(o.posthog.capture("notification_invite_clicked",{notification_id:t.id,invite_url:a.invite_url}),v(!1),e.push(a.invite_url))}})(t):void 0,children:(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"flex flex-col space-y-2 flex-wrap",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-md font-medium leading-none",children:t.title}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(m.Badge,{variant:"outline",className:(0,b.cn)("text-xs px-2.5 py-1 font-medium",t.notification_type===c.NotificationTypes.USER_NOTIFICATION?"text-primary border-primary/20 bg-primary/5":"text-muted-foreground border-muted-foreground/10 bg-background"),children:(s=t.notification_type,c.NotificationTypeRecord[s].label)})})]})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:t.message})]})},t.id)})]},t))}),t!==i[i.length-1]&&(0,a.jsx)(p.Separator,{className:"my-6"})]},t)})})},P="all"===j?w:t?_:A;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(h.Dialog,{open:t,onOpenChange:e=>{v(e),e||S([])},children:[(0,a.jsx)(h.DialogTrigger,{onClick:I,className:"p-1.5 hover:bg-[rgba(64,64,64,0.04)] dark:hover:bg-[rgba(240,240,240,0.04)] rounded-lg cursor-pointer",asChild:!0,children:(0,a.jsxs)("button",{className:"relative",children:[(0,a.jsx)(i.Bell,{className:"w-4 h-4 shrink-0 text-muted-foreground"}),A.length>0&&(0,a.jsx)("div",{className:"size-1.5 rounded-full bg-primary absolute right-2 top-2"})]})}),(0,a.jsx)(h.DialogContent,{className:"max-w-3xl max-h-[90vh]",children:(0,a.jsxs)(g.Tabs,{value:j,defaultValue:"unread",onValueChange:e=>y(e),className:"w-full flex flex-col h-full",children:[(0,a.jsxs)(h.DialogHeader,{className:"flex flex-row items-center justify-between pr-8",children:[(0,a.jsx)(h.DialogTitle,{className:"text-3xl font-bold tracking-tight",children:"Inbox"}),(0,a.jsxs)(g.TabsList,{className:"mr-6",children:[(0,a.jsx)(g.TabsTrigger,{value:"unread",children:"Unread"}),(0,a.jsx)(g.TabsTrigger,{value:"all",children:"All Notifications"})]})]}),(0,a.jsx)("div",{className:"flex-1 mt-4 overflow-hidden",children:(0,a.jsxs)(x.ScrollArea,{className:"h-[calc(90vh-130px)]",children:[(0,a.jsx)(g.TabsContent,{value:"unread",className:"mt-0 data-[state=active]:block",children:E(P)}),(0,a.jsx)(g.TabsContent,{value:"all",className:"mt-0 data-[state=active]:block",children:E(w)})]})})]})})]})})}],174504);var v=e.i(52563),j=e.i(664659),y=e.i(531278),w=e.i(292270),N=e.i(107233),k=e.i(239616),T=e.i(283086),A=e.i(632811),C=e.i(522016),_=e.i(796610),S=e.i(483202),I=e.i(870553),E=e.i(167881),P=e.i(463415),R=e.i(671428),O=e.i(394073),F=e.i(620949),D=e.i(63270),U=e.i(23750),M=e.i(947627),L=e.i(174117);let $=()=>{let{user:e}=(0,v.useAuth0)(),{toast:t}=(0,L.useToast)(),[r,i]=(0,s.useState)(""),[n,l]=(0,s.useState)(!1),o=(0,_.useSendInvite)(),{data:d}=(0,F.useUserSubscription)(),{data:c}=(0,_.useCurrentTeam)(),{data:u,isLoading:m}=(0,_.useTeam)(c?.details?.id),{data:x}=(0,_.useTeamPrice)(),{mutateAsync:p,isPending:g}=(0,_.useCreateTeam)({shouldInvalidateTeams:!1,invalidateCurrentTeam:!0,invalidateSubscription:!0}),f=d?.plan==="Standard",j=!!c?.details,y=j||f,w=u?.team_info?.is_annual,k=async a=>{if(a.preventDefault(),e?.email&&r){if(u?.team_members?.some(e=>e.user_email.toLowerCase()===r.toLowerCase()))return void t({title:"Error",description:"This user has already been invited to the team.",variant:"destructive"});try{if(j&&c?.details)await o.mutateAsync({teamId:c.details.id,email:r});else if(f){let t=e.email.split("@")[0],a=`${t}'s Team`,s=await p({teamName:a});s?.id&&await o.mutateAsync({teamId:s.id,email:r})}t({title:"Success",description:"Team member invited successfully"}),i("")}catch(e){console.error(e),t({title:"Error",description:"Failed to invite team member",variant:"destructive"})}}},T=m||g||o.isPending,A=j||T,C=x?.price||45;return y&&(0,a.jsxs)(h.Dialog,{open:n,onOpenChange:l,children:[(0,a.jsx)(h.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(E.Button,{variant:"ghost","data-cy":"team-picker-invite-team-members-button",size:"sm",className:"rounded-md w-full justify-start hover:bg-message dark:hover:bg-accent flex items-center gap-x-2 px-2 h-8 text-sm !font-book text-card-foreground tracking-[-0.015em]",children:[(0,a.jsx)(N.Plus,{className:"text-foreground h-3.5 w-3.5"}),"Invite Team Members"]})}),(0,a.jsxs)(h.DialogContent,{className:"max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(h.DialogHeader,{children:(0,a.jsx)(h.DialogTitle,{children:"Invite Team Member"})}),(0,a.jsxs)("p",{children:["Each additional team member is ",x?.currency_symbol||"$",w?10*C:C," per ",w?"year":"month","."]}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),(0,a.jsx)(U.Input,{id:"email",type:"email",placeholder:"Enter email address",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,a.jsx)(E.Button,{type:"submit",disabled:T,className:"w-full",children:T?"Sending Invite...":"Send Invite"})]}),A&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Team Members"}),(0,a.jsxs)(M.Table,{wrapperClassName:"max-h-[400px] overflow-y-auto",children:[(0,a.jsx)(M.TableHeader,{children:(0,a.jsxs)(M.TableRow,{className:(0,b.cn)("rounded-xl border-input","dark:border-b"),children:[(0,a.jsx)(M.TableHead,{children:"Member"}),(0,a.jsx)(M.TableHead,{className:"border-none",children:"Status"})]})}),(0,a.jsx)(M.TableBody,{children:T?[void 0,void 0].map((e,t)=>(0,a.jsxs)(M.TableRow,{className:"dark:border-neutral-500 w-full",children:[(0,a.jsx)(M.TableCell,{className:"w-full",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-neutral-200 dark:bg-neutral-700 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 w-32 bg-neutral-200 dark:bg-neutral-700 rounded animate-pulse"})]})}),(0,a.jsx)(M.TableCell,{className:"items-center border-none",children:(0,a.jsx)("div",{className:"flex flex-row items-center justify-between gap-2",children:(0,a.jsx)("div",{className:"h-8 w-24 bg-neutral-200 dark:bg-neutral-700 rounded animate-pulse"})})})]},t)):u?.team_members?.map(e=>(0,a.jsxs)(M.TableRow,{className:"dark:border-neutral-500 w-full",children:[(0,a.jsx)(M.TableCell,{className:"w-full",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(D.Avatar,{children:(0,a.jsx)(D.AvatarFallback,{className:"border border-input pointer-events-none",children:e.user_email.charAt(0).toUpperCase()})}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.user_email})]})}),(0,a.jsx)(M.TableCell,{className:"items-center border-none",children:(0,a.jsx)("div",{className:"flex flex-row items-center justify-between gap-2",children:(0,a.jsx)("span",{className:"text-sm pointer-events-none text-secondary-foreground px-2 py-1 rounded-2xl",children:"sending"===e.status?"Sending":"invited"===e.status?"Invited":"Joined"})})})]},e.user_email))})]})]})]})]})};var G=e.i(707621),B=e.i(728231);let V=(0,s.memo)(({team:e,isActive:t,isLoading:s,onSelect:r})=>{let{data:i,isLoading:n}=(0,_.useTeam)(e.id);return(0,a.jsxs)(P.DropdownMenuItem,{onSelect:()=>r(e.id),className:`relative disabled:cursor-not-allowed hover:bg-message focus:bg-message dark:hover:bg-accent tracking-[-0.015em] p-1.5 gap-2 text-sm ${t&&"bg-[rgba(64,64,64,0.05)] dark:bg-[rgba(240,240,240,0.05)]"}`,"aria-disabled":s,disabled:s,children:[(0,a.jsx)("div",{className:"shrink-0 border border-border w-6 h-6 rounded-md bg-message flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:e.team_name?.charAt(0)})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("p",{className:"truncate text-left font-book",children:e.team_name})}),(()=>{if(n)return(0,a.jsx)(R.Skeleton,{className:"h-3 w-8"});if(!i)return null;let e=i?.paid||i?.details?.checkout_metadata?.status==="paid",t=(0,a.jsxs)("div",{className:`flex items-center gap-0.5 text-2xs font-medium rounded-full px-1.5 leading-[1.6em] ${e?"bg-message text-muted-foreground font-medium":"text-red-600 bg-message dark:text-red-400"}`,children:["Team",!e&&(0,a.jsx)(G.CircleAlert,{className:"h-2.5 w-2.5 text-destructive"})]});return e?t:(0,a.jsxs)(B.Tooltip,{children:[(0,a.jsx)(B.TooltipTrigger,{asChild:!0,children:t}),(0,a.jsx)(B.TooltipContent,{side:"right",className:"max-w-xs",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("p",{className:"mb-1",children:"Your team subscription needs to be activated to continue using team features."}),(0,a.jsx)(C.default,{href:"/settings/teams",className:"text-blue-400 hover:text-blue-300 underline",children:"Activate here â†’"})]})})]})})()]},e.id)});V.displayName="TeamItem";let z=(0,s.memo)(({navigate:e=!1})=>{var t;let{activateTeam:r,isLoading:i,currentTeam:n}=(0,_.useActivateTeam)({navigate:e}),{data:l}=(0,_.useTeams)(),{user:d}=(0,v.useAuth0)(),{data:c,isLoading:u}=(0,F.useUserInformation)(),{handleLogout:m}=(0,S.useUserAPI)(),{data:h}=(0,F.useUserSubscription)(),x=(0,s.useMemo)(()=>l&&n?.details?.id?l.find(e=>e.id===n.details?.id)?.team_name:null,[l,n]),p=!!(l&&Array.isArray(l))&&l.some(e=>e.team_owner_auth_id===c?.id),g=h?.plan==="Standard",f=!!n?.details,b=!p&&!n?.details?.id,D=!!h&&h?.status!=="cancelling"&&(h?.plan==null||h?.plan==="Lite")&&h?.subscription_association!=="team_sub";return(0,a.jsxs)(P.DropdownMenu,{children:[(0,a.jsx)(P.DropdownMenuTrigger,{asChild:!0,disabled:i,children:(0,a.jsxs)(E.Button,{variant:"ghost","data-cy":"team-picker-button",disabled:i,className:"max-w-full p-1 h-fit gap-1 justify-between aria-expanded:bg-input data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground font-medium hover:bg-[rgba(64,64,64,0.04)] dark:hover:bg-[rgba(240,240,240,0.04)] group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 w-fit min-w-0",children:[(x||n?.details)&&(0,a.jsx)("div",{className:"border border-border w-6 h-6 shrink-0 rounded-md bg-message flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-muted-foreground tracking-[-0.015em]",children:x?.charAt(0)||n?.details?.team_name?.charAt(0)})}),!x&&!n?.details?.team_name&&(0,a.jsx)(I.SquareUserIcon,{className:`h-4 w-4 ${i?"animate-pulse":""}`}),i?(0,a.jsx)(R.Skeleton,{className:"h-4 w-full"}):(0,a.jsx)("span",{className:"truncate text-left text-sm font-medium text-card-foreground tracking-[-0.015em] min-w-0",children:x||n?.details?.team_name||d?.email||"Personal"})]}),i?(0,a.jsx)(y.Loader2,{className:"h-3.5 w-3.5 opacity-50 shrink-0 animate-spin"}):(0,a.jsx)(j.ChevronDown,{className:"h-3.5 w-3.5 shrink-0 opacity-50"})]})}),(0,a.jsxs)(P.DropdownMenuContent,{align:"start",className:"m-0 w-60 max-w-[240px]",children:[D&&(0,a.jsx)(P.DropdownMenuItem,{className:"disabled:cursor-not-allowed hover:bg-message focus:bg-message dark:hover:bg-accent","data-cy":"team-picker-upgrade-plan-button","aria-disabled":i,disabled:i,asChild:!0,children:(0,a.jsxs)(C.default,{href:h?.subscription_association==="user_sub"?"/settings/subscription":"/settings/teams",onClick:()=>{o.default.capture("upgrade_plan:team_picker",{subscription_association:h?.subscription_association})},children:[(0,a.jsx)(T.Sparkles,{className:"text-foreground mr-2 h-3.5 w-3.5"}),(0,a.jsx)("p",{className:"text-sm tracking-[-0.015em] font-book",children:"Upgrade plan"})]})}),b&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(P.DropdownMenuItem,{className:"disabled:cursor-not-allowed hover:bg-message focus:bg-message dark:hover:bg-accent","data-cy":"team-picker-create-team-button","aria-disabled":i,disabled:i,asChild:!0,children:(0,a.jsxs)(C.default,{href:"/onboarding/team/create",children:[(0,a.jsx)(N.Plus,{className:"text-foreground mr-2 h-3.5 w-3.5"}),(0,a.jsx)("p",{className:"text-sm tracking-[-0.015em] font-book",children:"Create a team"})]})})}),l&&l.length>0&&n?.details?.id&&(0,a.jsxs)(a.Fragment,{children:[O.FEATURE_FLAGS.CONSOLIDATE_PRO_TEAM_PLAN&&(f||g)&&(0,a.jsx)($,{}),(0,a.jsx)(P.DropdownMenuItem,{className:"disabled:cursor-not-allowed hover:bg-message focus:bg-message dark:hover:bg-accent","data-cy":"team-picker-team-settings-button","aria-disabled":i,disabled:i,asChild:!0,children:(0,a.jsxs)(C.default,{href:O.FEATURE_FLAGS.TEAM_SETTINGS_REDESIGN&&n?.details?.id?`/settings/teams/${n?.details?.id}/general`:`/settings/teams/${n?.details?.id}`,children:[(0,a.jsx)(A.UserCog,{className:"text-foreground mr-2 h-3.5 w-3.5"}),(0,a.jsx)("p",{className:"text-sm tracking-[-0.015em] font-book",children:"Team Settings"})]})})]}),(b||D||O.FEATURE_FLAGS.CONSOLIDATE_PRO_TEAM_PLAN&&n?.details?.id)&&(0,a.jsx)(P.DropdownMenuSeparator,{className:"bg-border"}),(0,a.jsxs)(P.DropdownMenuItem,{onSelect:()=>{r(n?.details?.id)},className:`relative disabled:cursor-not-allowed hover:bg-message focus:bg-message dark:hover:bg-accent tracking-[-0.015em] p-1.5 gap-2 text-sm ${!x&&!n?.details?.team_name&&"bg-[rgba(64,64,64,0.05)] dark:bg-[rgba(240,240,240,0.05)]"}`,"aria-disabled":i,disabled:i,children:[(0,a.jsx)("div",{className:"shrink-0 border border-border w-6 h-6 rounded-full bg-message flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:d?.name?.charAt(0)})}),(0,a.jsx)("div",{className:"flex w-full items-center gap-1 pe-6",children:(0,a.jsx)("p",{className:"line-clamp-1 text-left font-book",children:"Personal "})}),(0,a.jsx)("div",{className:"text-2xs text-muted-foreground font-medium bg-message rounded-full px-1.5 leading-[1.6em]",children:(t=c?.subscription_plan_name,u?(0,a.jsx)(R.Skeleton,{className:"h-4 w-8"}):t&&({lite:"Plus",standard:"Pro",team:"Team",enterprise:"Enterprise"})[t.toLowerCase()]||"Free")})]},"personal"),l&&l.length>0&&(0,a.jsxs)(a.Fragment,{children:[l.map(e=>{let t=e.id===n?.details?.id;return(0,a.jsx)(V,{team:e,isActive:t,isLoading:i,onSelect:e=>{t?r(n?.details?.id):r(e)}},e.id)}),!p&&n?.details?.id&&(0,a.jsx)(P.DropdownMenuItem,{className:"disabled:cursor-not-allowed hover:bg-message focus:bg-message dark:hover:bg-accent","aria-disabled":i,disabled:i,asChild:!0,children:(0,a.jsxs)(C.default,{href:"/onboarding/team/create",children:[(0,a.jsx)(N.Plus,{className:"text-muted-foreground mr-2 h-3.5 w-3.5"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground tracking-[-0.015em] font-book",children:"Create new team"})]})})]}),(0,a.jsx)(P.DropdownMenuSeparator,{className:"bg-border"}),(0,a.jsx)(P.DropdownMenuLabel,{className:"text-xs text-muted-foreground !font-medium tracking-[-0.015em] truncate max-w-full",children:d?.email}),(0,a.jsx)(P.DropdownMenuItem,{className:"hover:bg-message focus:bg-message dark:hover:bg-accent",children:(0,a.jsxs)(C.default,{href:"/settings",className:"flex items-center text-sm gap-2 w-full tracking-[-0.015em]","data-intercom-target":"account-settings",children:[(0,a.jsx)(k.Settings,{className:"text-foreground flex-shrink-0 w-3.5 h-3.5"}),(0,a.jsx)("span",{className:"font-book",children:O.FEATURE_FLAGS.IS_HBS?"Account":"Account Settings"})]})}),(0,a.jsx)(P.DropdownMenuItem,{onSelect:m,className:"hover:bg-message focus:bg-message dark:hover:bg-accent",children:(0,a.jsxs)("div",{className:"flex items-center text-sm gap-2 w-full tracking-[-0.015em]",children:[(0,a.jsx)(w.LogOut,{className:"text-foreground flex-shrink-0 w-3.5 h-3.5"}),(0,a.jsx)("span",{className:"font-book",children:"Log Out"})]})})]})]})});e.s(["default",0,z],775132)},921991,394908,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(414396),r=e.i(824511),i=e.i(475254);let n=(0,i.default)("asterisk",[["path",{d:"M12 6v12",key:"1vza4d"}],["path",{d:"M17.196 9 6.804 15",key:"1ah31z"}],["path",{d:"m6.804 9 10.392 6",key:"1b6pxd"}]]);var l=e.i(72664),o=e.i(463059);let d=(0,i.default)("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Compass",()=>d],394908);var c=e.i(658041),u=e.i(875782);let m=(0,i.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var h=e.i(686311),x=e.i(134754),p=e.i(866195);let g=(0,i.default)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var f=e.i(358977);e.i(761911);var b=e.i(814276);e.i(971804);var v=e.i(511108),j=e.i(471512),y=e.i(796610),w=e.i(616525),N=e.i(394073),k=e.i(620949),T=e.i(647163);let A=({children:e,Icon:a})=>(0,t.jsx)("div",{className:"px-2 py-1 flex flex-col flex-1 text-xs font-medium text-muted-foreground rounded-lg hover:bg-[rgba(64,64,64,0.04)] dark:hover:bg-[rgba(240,240,240,0.04)] transition-colors",children:(0,t.jsxs)("h1",{className:"flex flex-row gap-2 items-center",children:[a&&(0,t.jsx)(a,{className:"size-4"}),e]})});var C=e.i(522016),_=e.i(618566),S=e.i(604570),I=e.i(728231);let E=({id:e,href:a,children:s,content:r,onClick:i,Icon:n,externalLink:l=!1,active:o=!0})=>{let d=(0,_.usePathname)(),c=o&&d===a;return(0,t.jsx)(I.Tooltip,{children:(0,t.jsx)(I.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(b.NavigationMenu.Link,{className:(0,T.cn)("relative flex flex-row items-center gap-2 px-2 py-1 rounded-lg font-book text-foreground text-sm tracking-[-0.015em] hover:bg-[rgba(64,64,64,0.04)] dark:hover:bg-[rgba(240,240,240,0.04)] transition-colors",c&&"dark:bg-[rgba(240,240,240,0.05)] bg-[rgba(64,64,64,0.05)]"),active:c,asChild:!0,children:(0,t.jsxs)(C.default,{href:a,onClick:()=>{e&&S.default.capture(e),i?.()},target:l?"_blank":"_self",children:[(0,t.jsx)(n,{className:"size-3.5 text-muted-foreground flex-shrink"}),s]})})})})};var P=e.i(52563),R=e.i(586448),O=e.i(392331),F=e.i(562920);let D=({group:e})=>(0,t.jsx)(s.Accordion.Item,{value:`disabled-${e.id}`,className:"flex flex-col overflow-hidden",children:(0,t.jsxs)(I.Tooltip,{children:[(0,t.jsx)(I.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(s.Accordion.ItemTrigger,{disabled:!0,className:"flex flex-1 opacity-60 cursor-not-allowed",children:(0,t.jsx)(A,{children:(0,t.jsx)("div",{className:"flex items-center gap-0.5 text-sm font-medium text-foreground tracking-[-0.015em]",children:e.name})})})}),(0,t.jsx)(I.TooltipContent,{side:"right",sideOffset:-100,className:"max-w-xs",children:"You are not a member of this subteam."})]})},e.id),U=({teamId:e,teamGroups:a,groupCounts:r,currentTeam:i})=>{let{user:n,getAccessTokenSilently:l,isAuthenticated:o}=(0,P.useAuth0)(),d=n?.email,{data:c}=(0,k.useUserActiveTeamRole)(),u=!!(c?.isAdmin||c?.isOwner),m=(0,R.useQueries)({queries:(a||[]).map(t=>({queryKey:["team_group_members",e,t.id],enabled:o&&!!e&&!!t.id,queryFn:async()=>{let a=await l();return await (0,O.getTeamMembers)({teamId:e,groupId:t.id,accessToken:a})},staleTime:3e5}))}),h={};(a||[]).forEach((e,t)=>{let a=m[t]?.data;Array.isArray(a)&&d?h[e.id]=a.some(e=>e.user_email===d):h[e.id]=!1});let x=u?a||[]:(a||[]).filter((e,t)=>{let a=m[t]?.data;return!!Array.isArray(a)&&!!d&&a.some(e=>e.user_email===d)});return(0,t.jsx)(s.Accordion.Root,{multiple:!0,className:"flex flex-col",children:x.map(e=>h[e.id]?(0,t.jsx)(M,{group:e,currentTeam:i,chatThreadCount:r[e.id]?.chatThreads||0},e.id):(0,t.jsx)(D,{group:e},`disabled-${e.id}`))})},M=({group:e,currentTeam:a,chatThreadCount:i})=>{let{data:n}=(0,j.useListWorkflows)({teamId:a.details.id,groupId:e.id,type:"templates"}),l=Array.isArray(n)?n.length:0;return(0,t.jsx)(s.Accordion.Item,{value:e.id,className:"flex flex-col overflow-hidden",children:(0,t.jsx)(s.Accordion.Context,{children:n=>{let d=n.getItemState({value:e.id});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Accordion.ItemTrigger,{className:"flex flex-1",children:(0,t.jsx)(A,{children:(0,t.jsxs)("div",{className:"flex items-center gap-0.5 text-sm font-medium text-foreground tracking-[-0.015em]",children:[e.name,(0,t.jsx)(o.ChevronRight,{className:(0,T.cn)("size-3.5 duration-200 text-muted-foreground transition-transform",d.expanded?"rotate-90":"rotate-0")})]})})}),(0,t.jsx)(r.m.div,{initial:{height:0},animate:{height:d.expanded?"auto":0},transition:{type:"easeOut",duration:.2},className:"pl-2",children:(0,t.jsxs)(s.Accordion.ItemContent,{children:[(0,t.jsx)(E,{href:`/team/${a.details.id}/group/${e.id}/threads`,content:e.name,Icon:h.MessageSquare,children:(0,t.jsxs)("span",{className:"flex gap-1",children:["Chats",i>0&&(0,t.jsx)("span",{className:"text-muted-secondary font-book",children:i})]})},`${e.id}-threads`),(0,t.jsx)(E,{href:`/team/${a.details.id}/group/${e.id}/notebooks`,content:e.name,Icon:p.Notebook,children:(0,t.jsxs)("span",{className:"flex gap-1",children:["Notebooks",l>0&&(0,t.jsx)("span",{className:"text-muted-secondary font-book",children:l})]})},`${e.id}-workflows`),(0,t.jsx)(E,{href:`/team/${a.details.id}/group/${e.id}/files`,content:e.name,Icon:u.Files,children:"Files"},`${e.id}-files`)]})})]})}})},e.id)},L=()=>{let{data:e}=(0,y.useCurrentTeam)(),{data:i}=(0,F.useTeamGroups)(e?.details.id),{getTeamGroupConversations:n}=(0,v.useChatAPI)(),[l,d]=(0,a.useState)({});return((0,a.useEffect)(()=>{(async()=>{if(!e?.details?.id||!i?.length)return;let t={};for(let a of i)try{let s=await n(e.details.id,a.id),r=Array.isArray(s)?s.length:0;t[a.id]={chatThreads:r,notebooks:0}}catch(e){console.error(`Failed to fetch chat counts for group ${a.id}:`,e),t[a.id]={chatThreads:0,notebooks:0}}d(t)})()},[e?.details?.id,i,n]),N.FEATURE_FLAGS.TEAM_GROUPS&&e?.details&&i?.length&&0!==i.length)?(0,t.jsx)(s.Accordion.Root,{collapsible:!0,className:"mt-3 flex flex-col",children:(0,t.jsx)(s.Accordion.Context,{children:a=>{let n=a.getItemState({value:"team-groups"});return(0,t.jsxs)(s.Accordion.Item,{value:"team-groups",className:"flex flex-col overflow-hidden",children:[(0,t.jsx)(s.Accordion.ItemTrigger,{className:"group",children:(0,t.jsx)(A,{children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,t.jsxs)("p",{className:"flex-1 min-w-0 truncate text-left",children:[e.details.team_name," Subteams"]}),(0,t.jsx)(o.ChevronRight,{className:(0,T.cn)("size-3.5 duration-200 group-hover:opacity-100 opacity-0",n.expanded?"rotate-90":"rotate-0")})]})})}),(0,t.jsx)(r.m.div,{initial:{height:0},animate:{height:n.expanded?"auto":0},transition:{type:"easeOut",duration:.2},children:(0,t.jsx)(s.Accordion.ItemContent,{className:"relative",children:(0,t.jsx)(U,{teamId:e.details.id,teamGroups:i||[],groupCounts:l,currentTeam:e})})})]})}})}):(0,t.jsx)(t.Fragment,{})};var $=e.i(367944);let G=(0,a.forwardRef)(({children:e,content:a,onClick:s,Icon:r,active:i},n)=>(0,t.jsx)(I.Tooltip,{children:(0,t.jsx)(I.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(b.NavigationMenu.Item,{ref:n,onClick:s,className:(0,T.cn)("w-full flex flex-row items-center gap-2 px-2 py-1 font-medium rounded-lg text-sm tracking-[-0.015em]","text-sm cursor-pointer hover:bg-[rgba(64,64,64,0.04)] dark:hover:bg-[rgba(240,240,240,0.04)] transition-colors",i&&"bg-[rgba(240,240,240,0.05)]"),children:[(0,t.jsx)(r,{className:"size-3.5 text-muted-foreground flex-shrink-0"}),(0,t.jsx)("div",{className:"inline-flex gap-1 w-full text-foreground",children:(0,t.jsx)("div",{className:"flex gap-1 justify-between w-full items-center",children:e})})]})})}));G.displayName="MenuItem";var B=e.i(531278);let V=({children:e,hasMore:s,isLoadingMore:r,loadMore:i,className:n="",loaderClassName:l=""})=>{let o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=o.current;if(!e)return;let t=()=>{let{scrollHeight:t,scrollTop:a,clientHeight:n}=e;t-a-n<=50&&s&&!r&&i()};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[s,r,i]),(0,t.jsxs)("div",{ref:o,className:`overflow-auto ${n}`,children:[e,r&&(0,t.jsx)("div",{className:`flex justify-center p-2 ${l}`,children:(0,t.jsx)(B.Loader2,{className:"h-5 w-5 animate-spin"})})]})};var z=e.i(541071),H=e.i(788699),q=e.i(840433),Y=e.i(116019),J=e.i(831761),K=e.i(167881),Q=e.i(630374),W=e.i(463415),X=e.i(23750),Z=e.i(915492);let ee=(0,a.memo)(({conversationId:e,isCurrentConversation:a,setActiveConversationId:s,handleInputChange:i,handleInputBlur:n,setEditing:l,editing:o,deleteConversation:d,setDeleting:c,deleting:u,setConversations:m,conversationName:h,isPinned:x,pinConversation:p,unpinConversation:g,onClick:f})=>{let b=(0,_.useRouter)(),{resetChat:v}=(0,$.useChatContext)(),{isSidebarOpen:j}=(0,Z.useSidebarsContext)();return(0,t.jsx)("li",{value:e,className:(0,T.cn)("flex-row gap-3 px-2 py-1 text-muted-foreground group rounded-md cursor-pointer text-xs font-semibold flex justify-between text-start items-start sidesecondary/80 dark:text-white hover:sidesecondary hover:bg-[rgba(64,64,64,0.04)] dark:hover:bg-[rgba(240,240,240,0.04)] dark:hover:text-white",a&&"sidesecondary/80 bg-[rgba(64,64,64,0.05)] dark:bg-[rgba(240,240,240,0.05)] dark:text-white"),children:(0,t.jsx)("div",{className:"w-full group rounded-md cursor-pointer text-xs font-semibold flex justify-between text-start items-start hover:sidesecondary dark:hover:text-white",onClick:t=>{try{if(t.target instanceof Element&&t.target.className.includes("triple-dot-menu"))return}catch(e){}b.push(`/chat?id=${e}`,void 0),v(e),f&&f()},"data-convo-id":e,children:(0,t.jsxs)("div",{className:"relative flex flex-row justify-between !dark:hover:text-white self-center w-full",children:[(0,t.jsx)("div",{className:(0,T.cn)("text-xs truncate w-full tracking-[-0.015em]",a?"font-semibold text-foreground":"text-muted-foreground"),children:(0,t.jsxs)("div",{className:(0,T.cn)("flex flex-row space-x-1 items-center",u===e&&"animate-pulse"),children:[x&&(0,t.jsx)(q.Pin,{className:"flex-shrink-0 mr-1 w-3 h-3 text-muted-foreground "}),(0,t.jsx)(r.m.span,{exit:{opacity:0},className:"overflow-hidden overflow-ellipsis text-start font-normal",children:h||"New Thread"})]})}),(0,t.jsxs)(W.DropdownMenu,{children:[(0,t.jsx)(W.DropdownMenuTrigger,{onClick:e=>e.stopPropagation(),children:(0,t.jsx)("div",{className:`absolute -right-1 top-1/2 -translate-y-1/2 flex justify-end h-full w-12 bg-gradient-to-l from-[#F0F1F2] dark:from-[#292929] to-transparent ${a?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity duration-300 `,children:(0,t.jsx)(z.MoreHorizontal,{className:"w-3.5 h-3.5"})})}),(0,t.jsxs)(W.DropdownMenuContent,{portal:j,className:"font-normal",children:[(0,t.jsxs)(W.DropdownMenuItem,{className:"triple-dot-menu",onMouseDown:e=>{e.stopPropagation()},onClick:t=>{x?g(e):p(e),t.stopPropagation()},children:[(0,t.jsx)(q.Pin,{className:"mr-2 w-3 h-3"}),x?"Unpin":"Pin"]}),(0,t.jsxs)(Q.Dialog,{modal:!0,children:[(0,t.jsxs)(Q.DialogDropdownTrigger,{onClick:e=>{e.stopPropagation()},children:[(0,t.jsx)(H.Pencil,{className:"mr-2 w-3 h-3"}),"Rename"]}),(0,t.jsxs)(Q.DialogContent,{"aria-describedby":"rename thread",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,t.jsx)(Q.DialogTitle,{children:"Rename thread"}),(0,t.jsx)(Q.DialogDescription,{children:"Give your thread a special name."}),(0,t.jsx)(X.Input,{type:"text",placeholder:"New thread name",id:`${e}-input`,value:h,onChange:t=>i(e,t),autoFocus:!0}),(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(Q.DialogClose,{className:"flex-1",onClick:()=>{l(null)},asChild:!0,children:(0,t.jsx)(K.Button,{variant:"outline",children:"Cancel"})}),(0,t.jsx)(Q.DialogClose,{asChild:!0,children:(0,t.jsx)(K.Button,{disabled:u===e,variant:"default",onClick:async()=>{l(e),n(e)},className:"flex-1",children:o===e?(0,t.jsx)(J.default,{}):"Save"})})]})]})]}),(0,t.jsxs)(Q.Dialog,{modal:!0,children:[(0,t.jsxs)(Q.DialogDropdownTrigger,{onClick:e=>{e.stopPropagation()},children:[(0,t.jsx)(Y.Trash,{className:"flex-shrink-0 mr-2 w-3 h-3"}),"Delete"]}),(0,t.jsxs)(Q.DialogContent,{"aria-describedby":"delete thread",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,t.jsx)(Q.DialogTitle,{children:"Are you sure you want to delete this thread?"}),(0,t.jsx)(Q.DialogDescription,{children:"This action cannot be undone. All messages in this thread will be permanently deleted."}),(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(Q.DialogClose,{className:"flex-1",onClick:()=>{c(null)},asChild:!0,children:(0,t.jsx)(K.Button,{variant:"outline",children:"Cancel"})}),(0,t.jsx)(K.Button,{disabled:u===e,variant:"destructive",onClick:async()=>{c(e),x&&g(e),await d(e),m(t=>{let a={...t};return delete a[e],a}),c(null),a&&(s(null),b.push("/chat",void 0))},className:"flex-1",children:u===e?(0,t.jsx)(J.default,{}):"Delete"})]})]})]})]})]})]})})})});var et=e.i(555436);let ea=()=>{let[e,s]=(0,a.useState)(""),{user:r}=(0,P.useAuth0)(),{getFilteredConversations:i}=(0,v.useChatAPI)(),{setFilteredConversations:n,setConversations:l}=(0,$.useChatContext)(),o=(0,a.useCallback)(()=>{if(N.FEATURE_FLAGS.SEARCH_CONVERSATIONS){if(!e)return n([]);(async()=>{if(N.FEATURE_FLAGS.SEARCH_CONVERSATIONS&&r)try{let t=await i(e);t?.conversations?(l(e=>{let a={...e};return Object.entries(t.conversations).forEach(([e,t])=>{a[e]||(a[e]=t)}),a}),n(Object.keys(t.conversations))):n([])}catch(e){console.error("error getting filtered conversations",e),n([])}})()}},[e,n,r,i,l]);return(0,a.useEffect)(()=>{let e=setTimeout(()=>o(),500);return()=>clearTimeout(e)},[e,o]),(0,t.jsx)("div",{className:"z-10 sticky top-0 py-1.5 bg-message",children:(0,t.jsxs)("div",{className:"relative flex flex-row items-center rounded-lg px-2 bg-[rgba(64,64,64,0.05)] dark:bg-[rgba(240,240,240,0.05)] gap-2 border border-border",children:[(0,t.jsx)(et.Search,{className:"h-3.5 w-3.5 text-muted-secondary"}),(0,t.jsx)(X.Input,{className:"flex flex-1 bg-transparent px-2 py-1 h-6 p-0 border-none focus-visible:ring-0 text-xs placeholder:text-muted-secondary tracking-[-0.015em]",type:"text",value:e,onChange:e=>{s(e.target.value)},placeholder:"Search chats"})]})})},es=()=>{let{conversations:e,activeConversationId:i,setActiveConversationId:n,setConversations:l,filteredConversations:d,paginationMetadata:c,setPaginationMetadata:u}=(0,$.useChatContext)(),{getConversations:m}=(0,v.useChatAPI)(),[x,p]=(0,a.useState)(2),g=(0,a.useMemo)(()=>{if(!c)return!1;let{total_count:e,page:t,per_page:a}=c;return e>t*a},[c]),[f,b]=(0,a.useState)(!1),j=async()=>{b(!0);try{let e=await m({page:x,per_page:c.per_page});l(t=>({...t,...e.conversations})),u(e.metadata),p(e=>e+1)}catch(e){console.error("Error loading more conversations:",e)}finally{b(!1)}},{deleteConversation:y,patchConversation:w}=(0,v.useChatAPI)(),[k,A]=(0,a.useState)(null),[C,_]=(0,a.useState)(null),[S,I]=(0,a.useState)([]),E=(t,a)=>{e[t].name=a.target.value,l({...e})},P=async t=>{l({...e}),await w({conversationId:t,name:e[t].name}),A(null)},R=e=>{l(t=>({...t,[e]:{...t[e],isPinned:!0}})),I(t=>{let a=[...t,e];try{window.localStorage.setItem("pinnedConversations",JSON.stringify(a))}catch(e){console.error("error setting pinned conversations",e)}return a})},O=e=>{l(t=>({...t,[e]:{...t[e],isPinned:!1}})),I(t=>{let a=t.filter(t=>t!==e);try{window.localStorage.setItem("pinnedConversations",JSON.stringify(a))}catch(e){console.error("error setting pinned conversations",e)}return a})};(0,a.useEffect)(()=>{let e;try{e=window.localStorage.getItem("pinnedConversations")}catch(e){console.error("Error getting pinned conversations",e)}if(e){let t=JSON.parse(e);I(t),l(e=>{let a={...e};return t.forEach(e=>{a[e]&&(a[e].isPinned=!0)}),a})}},[l]);let F=(0,a.useMemo)(()=>{let t=Object.keys(e).sort((t,a)=>{let s=new Date(e[t].updated_at||Date.now());return new Date(e[a].updated_at||Date.now()).getTime()-s.getTime()});t=[...t.filter(e=>S.includes(e)),...t.filter(e=>!S.includes(e))],d?.length>0&&(t=t.filter(e=>d.includes(e)));let a=new Date;a.setHours(0,0,0,0);let s=new Date(a);return s.setDate(a.getDate()-7),t.reduce((t,r)=>{let i=new Date(e[r].updated_at||Date.now());return t[S.includes(r)?"Pinned":i>=a?"Today":i>=s?"Past Week":"Older"].push(r),t},{Pinned:[],Today:[],"Past Week":[],Older:[]})},[e,d,S]),D=async e=>{"Enter"===e.key&&e.target.blur()},U=Object.fromEntries(Object.entries(F).filter(([e,t])=>t.length>0));return(0,t.jsx)(s.Accordion.Root,{collapsible:!0,className:"flex flex-col",children:(0,t.jsx)(s.Accordion.Context,{children:d=>{let u=d.getItemState({value:"threads"});return(0,t.jsxs)(s.Accordion.Item,{value:"threads",className:"flex flex-col overflow-hidden",children:[(0,t.jsx)(s.Accordion.ItemTrigger,{className:"flex justify-between items-center",children:(0,t.jsxs)(G,{Icon:h.MessageSquare,active:!1,children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("span",{className:"whitespace-nowrap font-book",children:"Chats"}),c?.total_count>0&&(0,t.jsx)("span",{className:"text-muted-secondary font-book",children:c?.total_count})]}),(0,t.jsx)(s.Accordion.ItemIndicator,{asChild:!0,children:(0,t.jsx)(o.ChevronRight,{className:(0,T.cn)("text-muted-foreground size-3.5 duration-200",u.expanded?"rotate-90":"rotate-0")})})]})}),(0,t.jsx)(r.m.ul,{initial:{height:0},animate:{height:u.expanded?"auto":0},transition:{type:"easeOut",duration:"0.2"},children:(0,t.jsx)(s.Accordion.ItemContent,{className:(0,T.cn)("relative pl-0 pb-2"),children:(0,t.jsxs)(V,{hasMore:g,isLoadingMore:f,loadMore:j,className:"max-h-[185px] sm:max-h-[200px] flex flex-col subtle-scroll",children:[N.FEATURE_FLAGS.SEARCH_CONVERSATIONS&&(0,t.jsx)(ea,{}),Object.keys(U).map(s=>{let r=F[s];return r.length>0?(0,t.jsx)(a.Fragment,{children:r.map(a=>(0,t.jsx)(ee,{conversationId:a,isCurrentConversation:a===i,setActiveConversationId:n,handleInputChange:E,handleInputBlur:P,handleInputKeyPress:D,setEditing:A,editing:k,setDeleting:_,deleting:C,deleteConversation:y,setConversations:l,conversationName:e[a].name,isPinned:S.includes(a),pinConversation:R,unpinConversation:O},`thread-item-${a}`))},s):null})]})})})]})}})})},er=(0,a.forwardRef)((e,a)=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 2447.6 2452.5",viewBox:"0 0 2447.6 2452.5",className:"h-4 w-4","aria-hidden":"true",ref:a,...e,children:(0,t.jsxs)("g",{clipRule:"evenodd",fillRule:"evenodd",children:[(0,t.jsx)("path",{d:"m897.4 0c-135.3.1-244.8 109.9-244.7 245.2-.1 135.3 109.5 245.1 244.8 245.2h244.8v-245.1c.1-135.3-109.5-245.1-244.9-245.3.1 0 .1 0 0 0m0 654h-652.6c-135.3.1-244.9 109.9-244.8 245.2-.2 135.3 109.4 245.1 244.7 245.3h652.7c135.3-.1 244.9-109.9 244.8-245.2.1-135.4-109.5-245.2-244.8-245.3z",fill:"currentColor"}),(0,t.jsx)("path",{d:"m2447.6 899.2c.1-135.3-109.5-245.1-244.8-245.2-135.3.1-244.9 109.9-244.8 245.2v245.3h244.8c135.3-.1 244.9-109.9 244.8-245.3zm-652.7 0v-654c.1-135.2-109.4-245-244.7-245.2-135.3.1-244.9 109.9-244.8 245.2v654c-.2 135.3 109.4 245.1 244.7 245.3 135.3-.1 244.9-109.9 244.8-245.3z",fill:"currentColor"}),(0,t.jsx)("path",{d:"m1550.1 2452.5c135.3-.1 244.9-109.9 244.8-245.2.1-135.3-109.5-245.1-244.8-245.2h-244.8v245.2c-.1 135.2 109.5 245 244.8 245.2zm0-654.1h652.7c135.3-.1 244.9-109.9 244.8-245.2.2-135.3-109.4-245.1-244.7-245.3h-652.7c-135.3.1-244.9 109.9-244.8 245.2-.1 135.4 109.4 245.2 244.7 245.3z",fill:"currentColor"}),(0,t.jsx)("path",{d:"m0 1553.2c-.1 135.3 109.5 245.1 244.8 245.2 135.3-.1 244.9-109.9 244.8-245.2v-245.2h-244.8c-135.3.1-244.9 109.9-244.8 245.2zm652.7 0v654c-.2 135.3 109.4 245.1 244.7 245.3 135.3-.1 244.9-109.9 244.8-245.2v-653.9c.2-135.3-109.4-245.1-244.7-245.3-135.4 0-244.9 109.8-244.8 245.1 0 0 0 .1 0 0",fill:"currentColor"})]})}));e.s(["default",0,()=>{let{breakpoint:e}=(0,w.useUserContext)(),i="initial"===e||"xs"===e||"sm"===e||"md"===e,{data:C}=(0,y.useCurrentTeam)(),{data:_}=(0,y.useTeams)(),{getTeamConversations:S}=(0,v.useChatAPI)(),{isCaesar:I}=(0,w.useUserContext)(),{data:P}=(0,k.useUserInformation)(),{data:R}=(0,j.useListWorkflows)(),{data:O}=(0,j.useListWorkflows)({teamId:C?.details?.id,type:"templates"}),[F,D]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{if(C?.details?.id)try{let e=await S(C.details.id);D(e||[])}catch(e){console.error("Failed to fetch team conversations:",e),D([])}else D([])})()},[C?.details?.id,S]);let U=Array.isArray(R)?R.length:void 0,M=Array.isArray(O)?O.length:void 0,$=F?.length||0;return(0,a.useMemo)(()=>!!(_&&Array.isArray(_))&&_.some(e=>e.team_owner_auth_id===P?.id),[_,P]),(0,t.jsxs)(b.NavigationMenu.Root,{className:"mt-3 ps-2 h-full overflow-scroll subtle-scroll",children:[(0,t.jsx)(b.NavigationMenu.List,{className:"flex flex-col justify-center gap-1",children:(0,t.jsxs)(s.Accordion.Root,{multiple:!0,collapsible:!0,defaultValue:["team-workspace","try-content"],className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(es,{}),(0,t.jsx)(E,{href:"/notebooks",Icon:p.Notebook,id:"notebooks_button:personal_workspace:sidebar",children:(0,t.jsxs)("span",{className:"flex gap-1",children:["Notebooks",U>0&&(0,t.jsx)("span",{className:"text-muted-secondary",children:U})]})}),(0,t.jsx)(E,{href:"/files",Icon:u.Files,id:"files_button:personal_workspace:sidebar",children:"Files"}),(0,t.jsx)(E,{href:"/data-connectors",Icon:f.Unplug,id:"data_connectors_button:personal_workspace:sidebar",children:"Data Connectors"}),N.FEATURE_FLAGS.SEPARATE_DASHBOARDS&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E,{href:"/dashboards",Icon:m,id:"dashboards_button:personal_workspace:sidebar",children:"Dashboards"}),(0,t.jsx)(E,{href:"/tiles",Icon:g,id:"tiles_button:personal_workspace:sidebar",children:"Tiles"})]}),N.FEATURE_FLAGS.CUSTOM_AGENTS&&(0,t.jsx)(E,{href:"/custom-agents",Icon:l.Box,id:"custom_agents_button:personal_workspace:sidebar",children:"Custom Agents"}),N.FEATURE_FLAGS.QUERY_TOOL_WITHOUT_CONVO&&(0,t.jsx)(E,{href:"/query",Icon:n,id:"query_tool_button:personal_workspace:sidebar",children:"Query Tool"})]}),C?.details&&(0,t.jsx)(s.Accordion.Context,{children:e=>{let a=e.getItemState({value:"team-workspace"});return(0,t.jsxs)(s.Accordion.Item,{value:"team-workspace",className:"mt-3 flex flex-col overflow-hidden",children:[(0,t.jsx)(s.Accordion.ItemTrigger,{className:"group",children:(0,t.jsx)(A,{children:(0,t.jsxs)("div",{className:"flex w-full min-w-0 items-center justify-between gap-1",children:[(0,t.jsx)("p",{className:"flex-1 min-w-0 truncate text-left",children:C.details.team_name}),(0,t.jsx)(o.ChevronRight,{className:(0,T.cn)("size-3.5 duration-200 group-hover:opacity-100 opacity-0",a.expanded?"rotate-90":"rotate-0")})]})})}),(0,t.jsx)(r.m.div,{initial:{height:0},animate:{height:a.expanded?"auto":0},transition:{type:"easeOut",duration:.2},children:(0,t.jsxs)(s.Accordion.ItemContent,{className:"flex flex-col",children:[N.FEATURE_FLAGS.TEAM_CHAT_PAGE&&(0,t.jsx)(E,{href:`/team/${C.details.id}/threads`,Icon:h.MessageSquare,id:"chats_button:teams_workspace:sidebar",children:(0,t.jsxs)("span",{className:"flex gap-1",children:["Chats",$>0&&(0,t.jsx)("span",{className:"text-muted-secondary font-book",children:$})]})}),(0,t.jsx)(E,{href:`/team/${C.details.id}/notebooks`,Icon:p.Notebook,id:"notebooks_button:teams_workspace:sidebar",children:(0,t.jsxs)("span",{className:"flex gap-1",children:["Notebooks",M>0&&(0,t.jsx)("span",{className:"text-muted-secondary font-book",children:M})]})}),N.FEATURE_FLAGS.SEPARATE_DASHBOARDS&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E,{href:`/team/${C.details.id}/dashboards`,Icon:m,id:"dashboards_button:teams_workspace:sidebar",children:"Dashboards"}),(0,t.jsx)(E,{href:`/team/${C.details.id}/tiles`,Icon:g,id:"tiles_button:teams_workspace:sidebar",children:"Tiles"})]}),(0,t.jsx)(E,{href:`/team/${C.details.id}/files`,Icon:u.Files,id:"files_button:teams_workspace:sidebar",children:"Files"}),N.FEATURE_FLAGS.TEAM_GROUPS&&(0,t.jsx)(L,{})]})})]})}}),(0,t.jsx)(s.Accordion.Context,{children:e=>{let a=e.getItemState({value:"try-content"});return(0,t.jsxs)(s.Accordion.Item,{value:"try-content",className:"mt-8 flex flex-col overflow-hidden",children:[(0,t.jsx)(s.Accordion.ItemTrigger,{className:"flex justify-between items-center group",children:(0,t.jsx)(A,{children:(0,t.jsxs)("div",{className:"flex flex-1 items-center justify-between gap-1",children:["Try",(0,t.jsx)(o.ChevronRight,{className:(0,T.cn)("size-3.5 duration-200 group-hover:opacity-100 opacity-0",a.expanded?"rotate-90":"rotate-0")})]})})}),(0,t.jsx)(r.m.div,{initial:{height:0},animate:{height:a.expanded?"auto":0},transition:{type:"easeOut",duration:.15},children:(0,t.jsxs)(s.Accordion.ItemContent,{className:"flex flex-col gap-0.5",children:[!1,(0,t.jsx)(E,{href:"/data-connectors",Icon:c.Database,id:"connect_data_button:try_content:sidebar",active:!1,children:"Connect your data"}),(0,t.jsx)(E,{href:"/notebooks/explore",Icon:d,id:"explore_notebooks_button:try_content:sidebar",children:"Notebook Templates"}),!N.FEATURE_FLAGS.IS_HBS&&!i&&(0,t.jsx)(E,{href:"https://community.julius.ai",Icon:er,id:"community_slack_button:try_content:sidebar",active:!1,externalLink:!0,children:"Community Slack"}),!N.FEATURE_FLAGS.IS_HBS&&I&&N.FEATURE_FLAGS?.EVALUATION_SUITE&&(0,t.jsx)(E,{href:"/evals",Icon:x.MonitorPlay,id:"evals_button:try_content:sidebar",children:"Evals"})]})})]})}})]})}),(0,t.jsx)("div",{className:"absolute flex justify-center w-full top-0 left-1/2",children:(0,t.jsx)(b.NavigationMenu.Viewport,{})})]})}],921991)},737170,110369,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(37727),r=e.i(657688),i=e.i(522016),n=e.i(604570),l=e.i(167881);let o=({href:e,children:a,className:s})=>e?e&&(e.startsWith("http://")||e.startsWith("https://"))?(0,t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:s,children:a}):(0,t.jsx)(i.default,{href:e,className:s,children:a}):null;function d({id:e,title:i,description:d,imageSrc:c,buttonHref:u="/settings/subscription",buttonText:m="Get started",buttonVariant:h="secondary",onPrimaryButtonClick:x,secondaryButtonHref:p,secondaryButtonText:g="Learn more",closable:f=!0}){let[b,v]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{f&&e&&localStorage.getItem(`dismissed-${e}`)&&v(!1)},[e,f]),b)?(0,t.jsxs)("div",{className:"relative",children:[f&&(0,t.jsx)(l.Button,{variant:"ghost",className:"absolute right-0 top-0 rounded-full p-0 w-7 h-7 flex items-center justify-center !z-[1]",onClick:()=>{v(!1),n.default.capture("dismissed_footer_panel",{id:e}),e&&localStorage.setItem(`dismissed-${e}`,"true")},children:(0,t.jsx)(s.X,{className:"w-3 h-3 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex flex-col p-2.5 rounded-xl bg-background border border-border shadow-subtle",children:[i&&(0,t.jsx)("h3",{className:"text-xs font-medium text-card-foreground tracking-[-0.015em] mb-2 leading-[1.4em]",children:i}),d&&(0,t.jsx)("p",{className:`text-2xs text-muted-foreground font-book tracking-[-0.015em] leading-[1.4em] ${i?"mb-2":"mb-1.5"}`,children:d}),c&&(0,t.jsx)("div",{className:"mb-1.5 w-full h-fit max-h-[110px] border border-border rounded-lg overflow-hidden",children:(0,t.jsx)(r.default,{src:c,alt:i||d||"Panel image",width:200,height:110,className:"w-full h-auto object-cover"})}),(0,t.jsxs)("div",{className:`flex w-full ${p?"gap-2":"justify-center"}`,children:[p&&(0,t.jsx)(o,{href:p,className:"w-full",children:(0,t.jsx)(l.Button,{variant:"ghost",className:"h-7 px-3 py-1.5 w-full text-xs text-muted-foreground",children:g})}),(0,t.jsx)(o,{href:u,className:p?"w-full":"",children:(0,t.jsx)(l.Button,{variant:h,className:`h-7 px-3 py-1.5 text-xs ${p?"w-full":"min-w-[140px]"}`,onClick:x,children:m})})]})]})]}):null}e.s(["default",()=>d],737170);var c=e.i(611802),u=e.i(796610),m=e.i(287336),h=e.i(620949);function x(){let{data:e,isFetching:s}=(0,h.useUserSubscription)(),{data:r,isFetching:o}=(0,h.useUserPlan)(),{data:d,isFetching:x}=(0,u.useCurrentTeam)(),[p,g]=(0,a.useState)({type:"loading"});(0,a.useEffect)(()=>{!async function(){(await (0,c.getCalApi)({namespace:"julius-ai-sales-onboarding"}))("ui",{cssVarsPerTheme:{light:{"cal-brand":"#2463eb"},dark:{"cal-brand":"#2463eb"}},hideEventTypeDetails:!1,layout:"month_view"})}()},[]);let f={lite:"Plus",standard:"Pro",team:"Team",enterprise:"Enterprise",business:"Business"},b=(0,a.useMemo)(()=>{if(s||o||x||!e||!r||!d)return{type:"loading"};let t=e.plan?f[e.plan.toLowerCase()]:"Free",a=d.paid??!1;if("Free"!==t&&"Plus"!==t||a)return{type:"hidden"};let i=r.messages_used||0,n=r.messages_limit||0,l=Math.max(0,n-i);if("team_sub"===e.subscription_association)return{type:"show",content:{name:"team_unpaid",header:"Your current team is not paid",paragraph:"Upgrade your team to continue using Julius",showProgress:!1,progressValue:0,buttonText:{primary:"Activate Team",secondary:"Talk to Sales"},buttonHref:{primary:"/settings/teams",secondary:"https://cal.com/sonwalkar/25"},posthogPrimaryEvent:"upgrade:upgrade_panel:sidebar",posthogSecondaryEvent:"talk_to_sales:upgrade_panel:sidebar"}};if("user_sub"===e.subscription_association)if(l>0)return{type:"show",content:{name:"messages_remaining",header:`${l} messages left`,paragraph:"Upgrade for unlimited usage",showProgress:n>0&&-1!==n,progressValue:-1===n?0:i/n*100,buttonText:{primary:"Upgrade",secondary:"Talk to Sales"},buttonHref:{primary:"/settings/subscription",secondary:"https://cal.com/sonwalkar/25"},posthogPrimaryEvent:"upgrade:upgrade_panel:sidebar",posthogSecondaryEvent:"talk_to_sales:upgrade_panel:sidebar"}};else return{type:"show",content:{name:"no_messages_left",header:"No messages left",paragraph:"Upgrade now to continue using Julius",showProgress:!1,progressValue:0,buttonText:{primary:"Upgrade Now",secondary:"Talk to Sales"},buttonHref:{primary:"/settings/subscription",secondary:"https://cal.com/sonwalkar/25"},posthogPrimaryEvent:"upgrade:upgrade_panel:sidebar",posthogSecondaryEvent:"talk_to_sales:upgrade_panel:sidebar"}};return{type:"hidden"}},[s,o,x,e,r,d]);if((0,a.useEffect)(()=>{"loading"!==b.type&&g(b)},[b]),"loading"===p.type||"hidden"===p.type)return null;let{content:v}=p;return(0,t.jsxs)("div",{className:"flex flex-col p-2.5 rounded-xl bg-background border border-border shadow-subtle","data-cy":"sidebar-upgrade-panel",children:[(0,t.jsx)("h3",{className:"text-xs font-medium text-card-foreground tracking-[-0.015em]","data-cy":"sidebar-upgrade-panel-header",children:v.header}),(0,t.jsx)("p",{className:"mt-0.5 mb-2.5 text-2xs text-muted-foreground font-book tracking-[-0.015em] leading-[1.4em]",children:v.paragraph}),v.showProgress&&(0,t.jsx)(m.Progress,{className:"h-[5px] mb-2.5",value:v.progressValue}),(0,t.jsxs)("div",{className:"flex w-full grid-cols-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",className:"h-7 px-2 py-1.5 w-full text-xs text-muted-foreground","data-cy":"sidebar-upgrade-panel-secondary-button","data-cal-namespace":"julius-ai-sales-onboarding","data-cal-link":"team/julius/julius-ai-sales-onboarding","data-cal-config":'{"layout":"month_view"}',onClick:()=>{n.default.capture(v.posthogSecondaryEvent,{state:v.name})},children:v.buttonText.secondary}),(0,t.jsx)(i.default,{href:v.buttonHref.primary,className:"w-full","data-cy":"sidebar-upgrade-panel-primary-button",onClick:()=>{n.default.capture(v.posthogPrimaryEvent,{state:v.name})},children:(0,t.jsx)(l.Button,{variant:"secondary",className:"h-7 px-2 py-1.5 w-full text-xs",children:v.buttonText.primary})})]})]})}e.s(["default",()=>x],110369)}]);

//# debugId=3fb52c10-9867-ca77-40c7-349ce5ec8c61
//# sourceMappingURL=8e94e24a7b978917.js.map