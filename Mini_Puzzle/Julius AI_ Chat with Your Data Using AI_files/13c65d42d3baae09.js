;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b93f1312-6083-838c-95a0-05c389476133")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,868983,e=>{"use strict";let t=(0,e.i(475254).default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);e.s(["WandSparkles",()=>t],868983)},664747,e=>{"use strict";let[t,n]=(0,e.i(532592).createContext)({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"});e.s(["PresenceProvider",()=>t,"usePresenceContext",()=>n])},520953,e=>{"use strict";var t=e.i(911899),n=e.i(750377),s=e.i(978445),i=(0,t.createMachine)({props:({props:e})=>({...e,present:!!e.present}),initialState:({prop:e})=>e("present")?"mounted":"unmounted",refs:()=>({node:null,styles:null}),context:({bindable:e})=>({unmountAnimationName:e(()=>({defaultValue:null})),prevAnimationName:e(()=>({defaultValue:null})),present:e(()=>({defaultValue:!1})),initial:e(()=>({sync:!0,defaultValue:!1}))}),exit:["cleanupNode"],watch({track:e,prop:t,send:n}){e([()=>t("present")],()=>{n({type:"PRESENCE.CHANGED"})})},on:{"NODE.SET":{actions:["setupNode"]},"PRESENCE.CHANGED":{actions:["setInitial","syncPresence"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["clearPrevAnimationName","invokeOnExitComplete"]},"UNMOUNT.SUSPEND":{target:"unmountSuspended"}}},unmountSuspended:{effects:["trackAnimationEvents"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["clearPrevAnimationName","invokeOnExitComplete"]}}},unmounted:{on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}},implementations:{actions:{setInitial:({context:e})=>{e.get("initial")||queueMicrotask(()=>{e.set("initial",!0)})},invokeOnExitComplete:({prop:e,refs:t})=>{e("onExitComplete")?.();let s=t.get("node");if(!s)return;let i=new((0,n.getWindow)(s)).CustomEvent("exitcomplete",{bubbles:!1});s.dispatchEvent(i)},setupNode:({refs:e,event:t})=>{e.get("node")!==t.node&&(e.set("node",t.node),e.set("styles",(0,n.getComputedStyle)(t.node)))},cleanupNode:({refs:e})=>{e.set("node",null),e.set("styles",null)},syncPresence:({context:e,refs:t,send:s,prop:i})=>{let o=i("present");if(o)return s({type:"MOUNT",src:"presence.changed"});let r=t.get("node");if(!o&&r?.ownerDocument.visibilityState==="hidden")return s({type:"UNMOUNT",src:"visibilitychange"});(0,n.raf)(()=>{let n=a(t.get("styles"));e.set("unmountAnimationName",n),"none"===n||n===e.get("prevAnimationName")||t.get("styles")?.display==="none"||t.get("styles")?.animationDuration==="0s"?s({type:"UNMOUNT",src:"presence.changed"}):s({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName:({context:e,refs:t})=>{(0,n.raf)(()=>{e.set("prevAnimationName",a(t.get("styles")))})},clearPrevAnimationName:({context:e})=>{e.set("prevAnimationName",null)}},effects:{trackAnimationEvents:({context:e,refs:t,send:s,prop:i})=>{let o=t.get("node");if(!o)return;let r=n=>{(n.composedPath?.()?.[0]??n.target)===o&&e.set("prevAnimationName",a(t.get("styles")))},l=r=>{let l=a(t.get("styles"));(0,n.getEventTarget)(r)!==o||l!==e.get("unmountAnimationName")||i("present")||s({type:"UNMOUNT",src:"animationend"})},u=e=>{(0,n.getEventTarget)(e)!==o||i("present")||s({type:"UNMOUNT",src:"animationcancel"})};o.addEventListener("animationstart",r),o.addEventListener("animationcancel",u),o.addEventListener("animationend",l);let c=(0,n.setStyle)(o,{animationFillMode:"forwards"});return()=>{o.removeEventListener("animationstart",r),o.removeEventListener("animationcancel",u),o.removeEventListener("animationend",l),(0,n.nextTick)(()=>c())}}}}});function a(e){return e?.animationName||"none"}(0,s.createProps)()(["onExitComplete","present","immediate"]);var o=e.i(204299),r=e.i(271645);let l=(e={})=>{let{lazyMount:t,unmountOnExit:n,present:s,skipAnimationOnMount:a=!1,...l}=e,u=(0,r.useRef)(!1),c={...l,present:s,onExitComplete:function(e,t={}){var n;let s,{sync:i=!1}=t,a=(n=e,(s=(0,r.useRef)(n)).current=n,s);return(0,r.useCallback)((...e)=>i?queueMicrotask(()=>a.current?.(...e)):a.current?.(...e),[i,a])}(e.onExitComplete)},d=function(e,t){let{state:n,send:s,context:i}=e,a=n.matches("mounted","unmountSuspended");return{skip:!i.get("initial"),present:a,setNode(e){e&&s({type:"NODE.SET",node:e})},unmount(){s({type:"UNMOUNT"})}}}((0,o.useMachine)(i,c),o.normalizeProps);d.present&&(u.current=!0);let m=!d.present&&!u.current&&t||n&&!d.present&&u.current;return{ref:d.setNode,getPresenceProps:()=>({"data-state":d.skip&&a?void 0:s?"open":"closed",hidden:!d.present}),present:d.present,unmounted:m}};e.s(["usePresence",()=>l],520953)},537795,e=>{"use strict";var t=e.i(843476),n=e.i(271645),s=e.i(93572),i=e.i(367944),a=e.i(394073),o=e.i(824511),r=e.i(16715),l=e.i(604570),u=e.i(210677);let c=()=>{let{nextMessageSuggestions:e,generateBotResponse:s,handleMessageCompleteActions:a}=(0,u.useMessageContext)(),{messageListHandle:c,activeConversationId:d}=(0,i.useChatContext)();return((0,n.useEffect)(()=>{e.length>0&&l.default.capture("chat:suggestion:display")},[e]),0===e.length)?(0,t.jsx)("div",{className:"h-4"}):(0,t.jsxs)(o.m.div,{className:"flex flex-col items-center gap-0.5 mt-2 px-3",animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},initial:{height:0,opacity:0},transition:{duration:.3,ease:"easeOut"},children:[(0,t.jsxs)("h2",{className:"inline-flex items-center justify-between text-sm font-medium pt-3 w-full resizable-chat-width text-label-muted",children:["Suggestions",(0,t.jsxs)("button",{className:"inline-flex items-center gap-1.5 text-xs font-medium text-label-muted px-2 py-1 rounded-lg interactive transition-colors",onClick:()=>a(d,{temp:1}),children:[(0,t.jsx)(r.RefreshCw,{className:"size-3"}),"New suggestions"]})]}),(0,t.jsx)("div",{className:"flex flex-col w-full resizable-chat-width",children:e.map((e,n)=>(0,t.jsxs)("div",{children:[n>0&&(0,t.jsx)("div",{className:"h-px bg-stroke-subtle"}),(0,t.jsx)("button",{className:"disabled:opacity-50 py-2.5 -mx-2 px-2 text-left flex items-center w-[calc(100%+1.5rem)] interactive rounded-lg",onClick:()=>{c.current&&c.current.scrollToIndex({index:"LAST",align:"end",behavior:"smooth"}),l.default.capture("chat:suggestion:click",{suggestion:e}),s({content:e})},children:(0,t.jsx)("span",{className:"text-sm font-normal truncate text-label-secondary",children:e})})]},n))})]})};var d=e.i(316408);let m={index:"LAST",align:"end"},p=(0,n.memo)(({atBottomStateChange:e=()=>{}})=>{let{isGenerating:o,messageListHandle:r,activeConversationMessageGroups:l,attachments:u}=(0,i.useChatContext)(),p=(0,n.useRef)(!1),h=(0,n.useRef)(!1),[x,g]=(0,n.useState)(0),N=(0,n.useMemo)(()=>({Header:()=>(0,t.jsx)("div",{style:{height:"12px"}}),Footer:()=>(0,t.jsx)("div",{style:{height:Object.keys(u||{}).length>0?"200px":"165px"}})}),[u]),v=(0,n.useCallback)(e=>e?e.messages?e.messages.map(e=>e.content||e.function_call||"").join(" "):e.content||e.text||"":"",[]),f=(0,n.useCallback)((e,n)=>n?.suggestionDisplay?(0,t.jsx)(c,{},"suggestions"):(0,t.jsx)(d.default,{index:e,messageGroup:n}),[]),y=(0,n.useCallback)(e=>e?(p.current=o,h.current=!0,"smooth"):!!h.current&&"smooth",[o]),E=(0,n.useCallback)(e=>{(p.current||h.current)&&r.current&&r.current.scrollToIndex({index:"LAST",align:"end",behavior:"auto"}),g(e<5e4?1/0:2e3)},[r]),C=(0,n.useCallback)(t=>{h.current=t,p.current=t&&o,e(t)},[e,o]),b=a.FEATURE_FLAGS.CHAT_MESSAGE_SUGGESTIONS?[...l,{suggestionDisplay:!0}]:l;return(0,t.jsxs)("div",{className:"flex flex-col relative w-full h-full overflow-hidden",children:[(0,t.jsx)("div",{style:{position:"absolute",left:"-9999px",top:"-9999px",opacity:0,pointerEvents:"none",fontSize:"1px",lineHeight:"1px"},"aria-hidden":"true",children:l.map((e,n)=>(0,t.jsx)("div",{"data-message-index":n,children:v(e)},n))}),(0,t.jsx)("div",{style:{flex:"1 1 auto"},children:l&&l.length>0&&(0,t.jsx)(s.Virtuoso,{ref:r,style:{height:"100%"},data:b,components:N,initialTopMostItemIndex:m,skipAnimationFrameInResizeObserver:!0,followOutput:y,atBottomStateChange:C,totalListHeightChanged:E,atBottomThreshold:15,increaseViewportBy:x,itemContent:f})})]})});e.s(["default",0,p],537795)},797389,e=>{e.n(e.i(537795))}]);

//# debugId=b93f1312-6083-838c-95a0-05c389476133
//# sourceMappingURL=bdc892caeddc0cd6.js.map