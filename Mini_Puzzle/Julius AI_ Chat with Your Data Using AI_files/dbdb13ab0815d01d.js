;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="465ceb16-37c3-7899-78dd-b786ffc490db")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,728442,55383,e=>{"use strict";var t=e.i(843476),r=e.i(271645),l=e.i(952571),s=e.i(531278),a=e.i(107233),n=e.i(37727),i=e.i(657688),o=e.i(522016),d=e.i(618566),c=e.i(604570),u=e.i(471512),m=e.i(668252);let h=[{value:"0",label:"Monday"},{value:"1",label:"Tuesday"},{value:"2",label:"Wednesday"},{value:"3",label:"Thursday"},{value:"4",label:"Friday"},{value:"5",label:"Saturday"},{value:"6",label:"Sunday"}],x=[{label:"US & Canada",zones:[{value:"America/New_York",label:"Eastern Time"},{value:"America/Chicago",label:"Central Time"},{value:"America/Denver",label:"Mountain Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"America/Phoenix",label:"Arizona"},{value:"America/Anchorage",label:"Alaska"},{value:"Pacific/Honolulu",label:"Hawaii"}]},{label:"Europe",zones:[{value:"Europe/London",label:"London (GMT)"},{value:"Europe/Dublin",label:"Dublin (IST)"},{value:"Europe/Paris",label:"Paris (CET)"},{value:"Europe/Berlin",label:"Berlin (CET)"},{value:"Europe/Rome",label:"Rome (CET)"},{value:"Europe/Madrid",label:"Madrid (CET)"},{value:"Europe/Amsterdam",label:"Amsterdam (CET)"},{value:"Europe/Stockholm",label:"Stockholm (CET)"},{value:"Europe/Moscow",label:"Moscow (MSK)"}]},{label:"Asia Pacific",zones:[{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Asia/Shanghai",label:"Shanghai (CST)"},{value:"Asia/Hong_Kong",label:"Hong Kong (HKT)"},{value:"Asia/Singapore",label:"Singapore (SGT)"},{value:"Asia/Kolkata",label:"India (IST)"},{value:"Australia/Sydney",label:"Sydney (AEDT)"},{value:"Australia/Melbourne",label:"Melbourne (AEDT)"},{value:"Pacific/Auckland",label:"Auckland (NZDT)"}]},{label:"Other",zones:[{value:"UTC",label:"UTC"},{value:"America/Sao_Paulo",label:"São Paulo (BRT)"},{value:"Africa/Johannesburg",label:"Johannesburg (SAST)"}]}],f=x.flatMap(e=>e.zones),p=(e,t)=>"AM"===t?12===e?0:e:12===e?12:e+12,g=e=>{let t=f.find(t=>t.value===e);return t?t.label:e},v=(e,t)=>{var r;let l=e.split(" ");if(5!==l.length)return null;let[s,a,n,i,o]=l;if("*"===s&&"*"===a&&"*"===n&&"*"===o)return{frequency:"every-minute",hour:"12",minute:"00",amPm:"AM",weekday:"0",monthDay:"1"};if("*"===a&&"*"===n&&"*"===o&&"*"!==s)return{frequency:"every-hour",hour:"12",minute:s.padStart(2,"0"),amPm:"AM",weekday:"0",monthDay:"1"};let d=((e,t,r,l)=>{if(r===l)return{hour:e,minute:t};try{let s=new Date,a=s.getFullYear(),n=s.getMonth(),i=s.getDate(),o=`${a}-${String(n+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,d=`${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}:00`,c=new Intl.DateTimeFormat("en-US",{timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),u=new Date(`${o}T${d}`),m=c.formatToParts(u),h=parseInt(m.find(e=>"hour"===e.type)?.value||"0"),x=parseInt(m.find(e=>"minute"===e.type)?.value||"0"),f=e-h,p=t-x;u.setHours(u.getHours()+f,u.getMinutes()+p);let g=new Intl.DateTimeFormat("en-US",{timeZone:l,hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(u),v=parseInt(g.find(e=>"hour"===e.type)?.value||e.toString()),b=parseInt(g.find(e=>"minute"===e.type)?.value||t.toString());return{hour:v,minute:b}}catch(r){return console.error("Error translating time between timezones:",r),{hour:e,minute:t}}})(parseInt(a),parseInt(s),t,Intl.DateTimeFormat().resolvedOptions().timeZone),c=0===(r=d.hour)?{hour:12,amPm:"AM"}:r<12?{hour:r,amPm:"AM"}:12===r?{hour:12,amPm:"PM"}:{hour:r-12,amPm:"PM"},u="daily",m="0",h="1";return"*"===n&&"*"===o?u="daily":"*"===n&&"*"!==o?(u="weekly",m=o):"*"!==n&&"*"===o&&(u="monthly",h=n),{frequency:u,hour:c.hour.toString(),minute:d.minute.toString().padStart(2,"0"),amPm:c.amPm,weekday:m,monthDay:h}};e.s(["TIMEZONE_GROUPS",0,x,"WEEKDAYS",0,h,"convert12To24Hour",0,p,"getCronScheduleDescription",0,(e,t)=>{let r=v(e,t);if(!r)return"Invalid schedule";let l=(e=>{let{frequency:t,hour:r,minute:l,amPm:s,weekday:a,monthDay:n}=e;if("every-minute"===t)return"every minute";if("every-hour"===t)return`every hour at :${l}`;let i=`${r}:${l} ${s}`;switch(t){case"daily":return`every day at ${i}`;case"weekly":{let e=h.find(e=>e.value===a)?.label||"Monday";return`every ${e} at ${i}`}case"monthly":{let e=["st","nd","rd"][parseInt(n)-1]||"th";return`every month on the ${n}${e} at ${i}`}default:return""}})(r),s=g(t);return`${l} (${s})`},"getTimezoneDisplayName",0,g,"parseCronExpression",0,v],55383);var b=e.i(167881),w=e.i(630374),j=e.i(23750),y=e.i(10708),S=e.i(62870),k=e.i(319036),C=e.i(728231),N=e.i(647163);function M({tabs:e,value:r,onValueChange:l,className:s}){return(0,t.jsx)("div",{className:(0,N.cn)("flex gap-2 w-full border-b border-input",s),children:e.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)(b.Button,{variant:"ghost",size:"xs",className:"font-medium mb-1.5",onClick:()=>l(e.value),disabled:e.disabled,children:e.label}),r===e.value&&(0,t.jsx)("div",{className:"h-[2px] w-full bg-primary"})]},e.value))})}var T=e.i(616525),A=e.i(394073),E=e.i(620949),_=e.i(268580),P=e.i(52563),I=e.i(954616),R=e.i(912598);let F="https://hooks.slack.com/services/",L=e=>{let t=e.match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/i);return t?{hour:t[1],minute:t[2],amPm:t[3].toUpperCase()}:{hour:"9",minute:"00",amPm:"AM"}},D=(e,t,r)=>`${e}:${t} ${r}`,O=["12:00 AM","12:15 AM","12:30 AM","12:45 AM","1:00 AM","1:15 AM","1:30 AM","1:45 AM","2:00 AM","2:15 AM","2:30 AM","2:45 AM","3:00 AM","3:15 AM","3:30 AM","3:45 AM","4:00 AM","4:15 AM","4:30 AM","4:45 AM","5:00 AM","5:15 AM","5:30 AM","5:45 AM","6:00 AM","6:15 AM","6:30 AM","6:45 AM","7:00 AM","7:15 AM","7:30 AM","7:45 AM","8:00 AM","8:15 AM","8:30 AM","8:45 AM","9:00 AM","9:15 AM","9:30 AM","9:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","1:00 PM","1:15 PM","1:30 PM","1:45 PM","2:00 PM","2:15 PM","2:30 PM","2:45 PM","3:00 PM","3:15 PM","3:30 PM","3:45 PM","4:00 PM","4:15 PM","4:30 PM","4:45 PM","5:00 PM","5:15 PM","5:30 PM","5:45 PM","6:00 PM","6:15 PM","6:30 PM","6:45 PM","7:00 PM","7:15 PM","7:30 PM","7:45 PM","8:00 PM","8:15 PM","8:30 PM","8:45 PM","9:00 PM","9:15 PM","9:30 PM","9:45 PM","10:00 PM","10:15 PM","10:30 PM","10:45 PM","11:00 PM","11:15 PM","11:30 PM","11:45 PM"];e.s(["default",0,({workflow:e,children:f})=>{let[z,$]=(0,r.useState)(!1),[U,B]=(0,r.useState)("schedule"),[K,q]=(0,r.useState)("daily"),[W,G]=(0,r.useState)("9:00 AM"),[H,V]=(0,r.useState)("0"),[Q,J]=(0,r.useState)("1"),[Y,Z]=(0,r.useState)("UTC"),[X,ee]=(0,r.useState)(null),[et,er]=(0,r.useState)(""),[el,es]=(0,r.useState)(!1),[ea,en]=(0,r.useState)(""),[ei,eo]=(0,r.useState)(""),{teamId:ed,groupId:ec}=(0,d.useParams)(),[eu,em]=(0,r.useState)({title:"",sections:[]}),eh=(0,d.useSearchParams)(),{data:ex,isLoading:ef}=(0,u.useWorkflowCrons)({teamId:ed,groupId:ec}),{mutateAsync:ep,isPending:eg}=(0,u.useCreateWorkflowCron)(),{mutateAsync:ev,isPending:eb}=(0,u.useUpdateWorkflowCron)(),{mutateAsync:ew,isPending:ej}=(0,u.useDeleteWorkflowCron)(),{mutateAsync:ey,isPending:eS,isError:ek}=(()=>{let{getAccessTokenSilently:e}=(0,P.useAuth0)(),t=(0,R.useQueryClient)();return(0,I.useMutation)({mutationFn:async t=>{let r=await e(),l={};t.cron_metadata&&(l.cron_metadata=t.cron_metadata),t.teamId&&(l.team_id=t.teamId),t.groupId&&(l.group_id=t.groupId),t.benchmark_run_id&&(l.benchmark_run_id=t.benchmark_run_id);let s=await (0,N.customFetch)(`${A.SOCKET_URL}/kepler/api/notebooks/${t.workflowId}/schedule`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(l)}),a=await s.json();if(!s.ok)throw Error(a?.error??"Failed to schedule notebook run");if(a?.error)throw Error(a.error);if(!a?.notebook_id)throw Error("Instant notebook run did not return a notebook id");return a},onSuccess:async(e,r)=>{let{workflowId:l,teamId:s,groupId:a}=r;l&&(await t.refetchQueries({queryKey:["workflows/runs",l,s,a]}),await t.refetchQueries({queryKey:(0,u.getListWorkflowsQueryKey)({teamId:s,groupId:a,type:"runs"})}),await t.refetchQueries({queryKey:(0,u.getListWorkflowsQueryKey)({teamId:s,groupId:a,type:"templates"})}))}})})(),{data:eC}=(0,E.useUserInformation)(),eN=eC?.id,eM=e?.creator?.id===eN,{isCaesar:eT}=(0,T.useUserContext)()??{isCaesar:!1},{data:eA,isSuccess:eE}=(0,m.useSlackIntegration)(),{data:e_}=(0,m.useSlackChannels)(),eP=eg||eb||ej,eI=(0,r.useMemo)(()=>e?ex?.find(t=>t.content_id===e.id):null,[ex,e]);(0,r.useEffect)(()=>{if("true"===eh.get("schedule")&&!z){$(!0);let e=new URL(window.location.href);e.searchParams.delete("schedule"),window.history.replaceState({},"",e.toString())}},[eh,z]),(0,r.useEffect)(()=>{let e,t,r,l,s,a,n;G((t=(e=new Date).getHours(),r=15*Math.round(e.getMinutes()/15),l=t,s=r,60===r&&(l=(t+1)%24,s=0),a=l>=12?"PM":"AM",n=l%12||12,`${n}:${s.toString().padStart(2,"0")} ${a}`));try{let e=Intl.DateTimeFormat().resolvedOptions().timeZone;Z(e)}catch{Z("UTC")}},[]),(0,r.useEffect)(()=>{if(e)if(eI){if((A.FEATURE_FLAGS.CRON_MODEL_SELECTOR||A.FEATURE_FLAGS.CRON_MODEL_SELECTOR_CAESAR&&eT)&&(eI.cron_metadata?.model?er(String(eI.cron_metadata.model)):er("")),A.FEATURE_FLAGS.NOTEBOOK_CRONS_SLACK){let e=eI.cron_metadata?.slack_webhook_url;"string"==typeof e&&e.length>0?e.startsWith(F)?ee(e.slice(F.length)):ee(e):ee(null)}else ee(null);if(eI.cron_metadata?.slack_channel_id?(en(eI.cron_metadata.slack_channel_id),es(!0)):es(!1),eI.cron_metadata?.slack_channel_name&&eo(eI.cron_metadata.slack_channel_name),A.FEATURE_FLAGS.CUSTOM_SLACK_REPORT&&eI.cron_metadata?.custom_report_format)try{let e=JSON.parse(eI.cron_metadata.custom_report_format);if("object"!=typeof e||null===e||Array.isArray(e))em({title:"",sections:[]});else if(e.sections&&!Array.isArray(e.sections)){let t=Object.entries(e.sections).map(([e,t])=>({section_title:e,description:t}));em({title:e.title||"",sections:t})}else em({title:e.title||"",sections:e.sections||[]})}catch{em({title:"",sections:[]})}let e=v(eI.frequency,eI.timezone||"UTC");e&&(Z(eI.timezone||"UTC"),"every-minute"!==e.frequency||A.FEATURE_FLAGS.TEST_CRONS?(q(e.frequency),G(D(e.hour,e.minute,e.amPm)),V(e.weekday),J(e.monthDay)):(q("daily"),G("9:00 AM")))}else ee(null)},[eI,e]);let eR=()=>{if("every-minute"===K)return"* * * * *";let{hour:e,minute:t,amPm:r}=L(W);if("every-hour"===K){let e=parseInt(t);return`${e} * * * *`}let l=parseInt(t),s=p(parseInt(e),r);switch(K){case"daily":default:return`${l} ${s} * * *`;case"weekly":return`${l} ${s} * * ${H}`;case"monthly":return`${l} ${s} ${Q} * *`}},eF=()=>{let e={};return(A.FEATURE_FLAGS.CRON_MODEL_SELECTOR||A.FEATURE_FLAGS.CRON_MODEL_SELECTOR_CAESAR&&eT)&&et&&(e.model=et),eE&&el&&(A.FEATURE_FLAGS.NOTEBOOK_CRONS_SLACK&&X&&(e.slack_webhook_url=`${F}${X}`),ea&&ei&&(e.slack_channel_id=ea,e.slack_channel_name=ei,e.slack_team_id=eA.slack_team_id),A.FEATURE_FLAGS.CUSTOM_SLACK_REPORT&&(eu?.title||(eu?.sections||[]).length>0)&&(e.custom_report_format=JSON.stringify(eu))),e},eL=async()=>{let t={},r=eI?.cron_metadata||{};if(A.FEATURE_FLAGS.CRON_MODEL_SELECTOR||A.FEATURE_FLAGS.CRON_MODEL_SELECTOR_CAESAR&&eT)if(et)t={...r,model:et};else{let{model:e,...l}=r;t=l}let l=eF();t={...t,...l},eE&&el&&(ea||X)||(delete t.slack_channel_id,delete t.slack_channel_name,delete t.slack_webhook_url,delete t.custom_report_format,delete t.slack_team_id);let s={cron_name:`${e.plan.name} - ${K.charAt(0).toUpperCase()+K.slice(1)} Run`,frequency:eR(),content_type:"notebook",content_id:e.id,timezone:Y||"UTC",cron_metadata:Object.keys(t).length>0?t:void 0};eI?(await ev({cronId:eI.id,params:s}),c.default.capture("workflow_cron_updated",{workflowId:e.id})):(await ep(s),c.default.capture("workflow_cron_created",{workflowId:e.id})),$(!1)},eD=async()=>{eI&&(await ew({cronId:eI.id,workflowId:e.id}),c.default.capture("workflow_cron_deleted",{workflowId:e.id}),$(!1))},eO=async()=>{try{let t=eF(),r=await ey({workflowId:e.id,cron_metadata:Object.keys(t).length>0?t:void 0,teamId:ed,groupId:ec});r.notebook_id&&(await eL(),window.open(_.workflowService.getWorkflowUrl(r.notebook_id,null),"_blank")),c.default.capture("workflow_schedule_tested",{workflowId:e.id})}catch(e){console.error("Schedule test failed:",e)}},ez=["daily","weekly","monthly"];return(A.FEATURE_FLAGS.TEST_CRONS||eT)&&(ez.push("every-minute"),ez.push("every-hour")),(0,t.jsxs)(w.Dialog,{open:z,onOpenChange:$,children:[(0,t.jsx)(w.DialogTrigger,{asChild:!0,children:f}),(0,t.jsxs)(w.DialogContent,{className:"flex flex-col max-h-[85vh]",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)(w.DialogTitle,{className:"flex items-center gap-2",children:["Schedule Notebook",(0,t.jsxs)(C.Tooltip,{children:[(0,t.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(l.Info,{size:16,className:"text-muted-foreground"})}),(0,t.jsx)(C.TooltipContent,{children:"Configure this notebook to run automatically on a schedule"})]})]}),(0,t.jsx)(M,{tabs:[{value:"schedule",label:"Schedule"},{value:"slack",label:"Slack Report"}],value:U,onValueChange:B,className:"mb-4"}),"schedule"===U&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col gap-4 overflow-y-auto",children:[(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:ez.map(e=>(0,t.jsx)(b.Button,{type:"button",variant:K===e?"default":"outline",size:"sm",onClick:()=>q(e),disabled:eP||!eM,className:(0,N.cn)("capitalize",("every-minute"===e||"every-hour"===e)&&K!==e&&"bg-destructive/20 text-destructive border-destructive hover:bg-destructive/30 hover:text-destructive"),children:"every-minute"===e?"Every Minute":"every-hour"===e?"Every Hour":e},e))})}),"weekly"===K&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(y.Label,{htmlFor:"weekday",children:"Day of Week"}),(0,t.jsxs)(S.Select,{value:H,onValueChange:V,disabled:eP||!eM,children:[(0,t.jsx)(S.SelectTrigger,{id:"weekday",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsx)(S.SelectContent,{children:h.map(e=>(0,t.jsx)(S.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),"monthly"===K&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(y.Label,{htmlFor:"monthday",children:"Day of Month"}),(0,t.jsxs)(S.Select,{value:Q,onValueChange:J,disabled:eP||!eM,children:[(0,t.jsx)(S.SelectTrigger,{id:"monthday",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsx)(S.SelectContent,{children:Array.from({length:28},(e,t)=>t+1).map(e=>(0,t.jsx)(S.SelectItem,{value:e.toString(),children:e},e))})]})]}),"every-hour"===K&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(y.Label,{htmlFor:"minute",children:"Minute"}),(0,t.jsxs)(S.Select,{value:L(W).minute,onValueChange:e=>{let{hour:t,amPm:r}=L(W);G(D(t,e,r))},disabled:eP||!eM,children:[(0,t.jsx)(S.SelectTrigger,{id:"minute",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsx)(S.SelectContent,{children:Array.from({length:60},(e,t)=>t.toString().padStart(2,"0")).map(e=>(0,t.jsxs)(S.SelectItem,{value:e,children:[":",e]},e))})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Schedule will run at this minute past every hour (e.g., 1:",L(W).minute,", 2:",L(W).minute,")"]})]}),"every-minute"!==K&&"every-hour"!==K&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,t.jsx)(y.Label,{htmlFor:"time",children:"Time"}),(0,t.jsxs)(S.Select,{value:W,onValueChange:G,disabled:eP||!eM,children:[(0,t.jsx)(S.SelectTrigger,{id:"time",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{placeholder:"Select time"})}),(0,t.jsx)(S.SelectContent,{className:"max-h-[300px]",children:O.map(e=>(0,t.jsx)(S.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,t.jsx)(y.Label,{htmlFor:"timezone",children:"Timezone"}),(0,t.jsxs)(S.Select,{value:Y,onValueChange:Z,disabled:eP||!eM,children:[(0,t.jsx)(S.SelectTrigger,{id:"timezone",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{children:g(Y)})}),(0,t.jsx)(S.SelectContent,{children:x.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground",children:e.label}),e.zones.map(e=>(0,t.jsx)(S.SelectItem,{value:e.value,children:g(e.value)},e.value))]},e.label))})]})]})]})}),(A.FEATURE_FLAGS.CRON_MODEL_SELECTOR||A.FEATURE_FLAGS.CRON_MODEL_SELECTOR_CAESAR&&eT)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"model",children:"Model"}),(0,t.jsxs)(S.Select,{value:et||"account-current",onValueChange:e=>er("account-current"===e?"":e),disabled:eP||!eM,children:[(0,t.jsx)(S.SelectTrigger,{id:"model",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsxs)(S.SelectContent,{children:[(0,t.jsx)(S.SelectItem,{value:"account-current",children:"Account Current"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-1",children:"GPT-5.1"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-1-thinking",children:"GPT-5.1 (Thinking)"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-2",children:"GPT-5.2"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-1-mini",children:"GPT-5.1 Mini"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-1-nano",children:"GPT-5.1 Nano"}),(0,t.jsx)(S.SelectItem,{value:"claude-sonnet-4.5",children:"Claude 4.5 Sonnet"}),(0,t.jsx)(S.SelectItem,{value:"gemini-3",children:"Gemini 3"}),(0,t.jsx)(S.SelectItem,{value:"claude-sonnet-4",children:"Claude 4 Sonnet"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-3 bg-muted/30",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Next scheduled run in ",(()=>{let e=new Date,t=new Date(e),{hour:r,minute:l,amPm:s}=L(W),a=p(+r,s);switch(K){case"every-hour":{t.setMinutes(+l,0,0),t<=e&&t.setHours(t.getHours()+1);let r=t.getTime()-e.getTime();if(r<6e4)return"less than 1 minute";let s=Math.floor(r/36e5),a=Math.floor(r%36e5/6e4);if(s>0)return`${s}h and ${a}min`;return`${a}min`}case"daily":t.setHours(a,+l,0,0),t<=e&&t.setDate(t.getDate()+1);break;case"weekly":{t.setHours(a,+l,0,0);let r=(H-e.getDay()+7)%7;0===r&&t<=e&&(r=7),t.setDate(t.getDate()+r);break}case"monthly":t.setHours(a,+l,0,0),t.setDate(+Q),t<=e&&t.setMonth(t.getMonth()+1)}let n=t.getTime()-e.getTime();if(n<6e4)return"less than 1 minute";let i=Math.floor(n/864e5),o=Math.floor((n%=864e5)/36e5),d=Math.floor((n%=36e5)/6e4),c=[];return i&&c.push(`${i}d`),o&&c.push(`${o}h`),d&&c.push(`${d}min`),c.join(" and ")})()]}),(0,t.jsx)(b.Button,{variant:"outline",size:"sm",onClick:eO,disabled:eP||ef||eS||!eM,children:eS?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):"Test now"})]}),ek&&(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Schedule test failed"}),A.FEATURE_FLAGS.TEST_CRONS&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,t.jsxs)("p",{children:["Cron: ",(0,t.jsx)("code",{className:"px-1 rounded bg-muted",children:eR()})]})})]}),"slack"===U&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col gap-4 overflow-y-auto",children:[!eE&&(0,t.jsxs)("div",{className:"flex items-center gap-4 border rounded-lg p-4 bg-muted/30",children:[(0,t.jsx)(i.default,{src:"/slack.svg",alt:"Slack",width:32,height:32,className:"flex-shrink-0 -rotate-90"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-foreground",children:"Connect Slack"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Set Julius up in Slack to send reports"})]}),(0,t.jsx)(b.Button,{variant:"outline",size:"sm",asChild:!0,className:"flex-shrink-0",children:(0,t.jsx)(o.default,{href:"/data-connectors",children:"Connect"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(y.Label,{htmlFor:"send-slack-report",className:"text-base",children:"Send Slack Report"}),(0,t.jsx)(k.Switch,{id:"send-slack-report",checked:el,onCheckedChange:e=>{es(e),e||(en(""),eo(""))},disabled:eP||!eM||!eE})]}),(0,t.jsxs)("div",{className:(0,N.cn)("flex flex-col gap-4",!el&&"opacity-50"),children:[A.FEATURE_FLAGS.SLACK_INTEGRATION&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(y.Label,{children:"Choose channel"}),(0,t.jsxs)(S.Select,{value:ea,onValueChange:e=>{let t=e_?.find(t=>t.id===e);t&&(en(t.id),eo(t.name))},disabled:eP||!eM||!el||!eE,children:[(0,t.jsx)(S.SelectTrigger,{className:"w-full",children:(0,t.jsx)(S.SelectValue,{placeholder:"Select a channel",children:ei?`#${ei}`:"Select a channel"})}),(0,t.jsx)(S.SelectContent,{children:e_?.map(e=>(0,t.jsxs)(S.SelectItem,{value:e.id,children:["#",e.name]},e.id))})]})]}),A.FEATURE_FLAGS.CUSTOM_SLACK_REPORT&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"report-title",children:"Report title"}),(0,t.jsx)(j.Input,{id:"report-title",value:eu?.title,onChange:e=>{em({...eu,title:e.target.value})},placeholder:"e.g., Weekly Sales Report",disabled:eP||!eM||!el})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{className:"text-sm",children:"Report structure"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set up a custom structure for the report to follow"})]}),(0,t.jsx)("div",{className:"space-y-2",children:(eu?.sections||[]).map((e,r)=>(0,t.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-10 text-sm text-muted-foreground",children:r+1}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(j.Input,{value:e.section_title,onChange:e=>{let t=[...eu?.sections||[]];t[r]={...t[r],section_title:e.target.value},em({...eu,sections:t})},placeholder:"Section title (e.g., Key Findings)",disabled:eP||!eM||!el}),(0,t.jsx)(j.Input,{value:e.description,onChange:e=>{let t=[...eu?.sections||[]];t[r]={...t[r],description:e.target.value},em({...eu,sections:t})},placeholder:"What should Julius write in this section?",disabled:eP||!eM||!el})]}),(0,t.jsx)(b.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{let e=(eu?.sections||[]).filter((e,t)=>t!==r);em({...eu,sections:e})},disabled:eP||!eM||!el,className:"h-10 w-10 mt-0",children:(0,t.jsx)(n.X,{className:"h-4 w-4"})})]},r))}),(0,t.jsxs)(b.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{em({...eu,sections:[...eu?.sections||[],{section_title:"",description:""}]})},disabled:eP||!eM||!el,className:"gap-1",children:[(0,t.jsx)(a.Plus,{className:"h-4 w-4"}),"Add section"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-2 mt-4",children:[(0,t.jsx)("div",{children:eI&&(eM?(0,t.jsx)(b.Button,{variant:"outline",size:"sm",onClick:eD,disabled:eP||ef||eS||!eM,className:"border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",children:eP?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Disabling..."]}):"Disable Schedule"}):(0,t.jsxs)(C.Tooltip,{children:[(0,t.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"inline-block",children:(0,t.jsx)(b.Button,{variant:"outline",size:"sm",onClick:eD,disabled:eP||ef||eS||!eM,className:"border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",children:"Disable Schedule"})})}),(0,t.jsx)(C.TooltipContent,{children:"Must be owner of the notebook to disable schedule"})]}))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(w.DialogClose,{asChild:!0,children:(0,t.jsx)(b.Button,{variant:"outline",size:"sm",disabled:eP||eS,children:"Cancel"})}),eM?(0,t.jsx)(b.Button,{size:"sm",onClick:eL,disabled:eP||ef||eS||!eM,children:eP?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save"}):(0,t.jsxs)(C.Tooltip,{children:[(0,t.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"inline-block",children:(0,t.jsx)(b.Button,{size:"sm",onClick:eL,disabled:eP||ef||eS||!eM,children:eP?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save"})})}),(0,t.jsx)(C.TooltipContent,{children:"Must be owner of the notebook to save schedule"})]})]})]})]})]})}],728442)},792155,e=>{"use strict";var t=e.i(843476),r=e.i(463415),l=e.i(728231),s=e.i(647163);e.s(["default",0,({sharedClassName:e,secondaryClassName:a,primarySlot:n,children:i,disabled:o,tooltip:d,dropdownDisabled:c=!1,secondarySlot:u=null})=>(0,t.jsxs)(r.DropdownMenu,{children:[(0,t.jsxs)("div",{className:(0,s.cn)("flex items-center rounded-lg",e),children:[n,(0,t.jsxs)(l.Tooltip,{children:[(0,t.jsx)(l.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(r.DropdownMenuTrigger,{disabled:o||c,className:(0,s.cn)("h-full py-1 px-2 border-l border-l-transparent  hover:bg-message","rounded-tr-lg rounded-br-lg","disabled:opacity-50 disabled:cursor-not-allowed",a),children:u})}),d&&(0,t.jsx)(l.TooltipContent,{children:d})]})]}),(0,t.jsx)(r.DropdownMenuContent,{className:"p-0",children:i})]})])},314847,e=>{"use strict";var t=e.i(843476),r=e.i(271645),l=e.i(52563),s=e.i(63209),a=e.i(475254);let n=(0,a.default)("arrow-down-from-line",[["path",{d:"M19 3H5",key:"1236rx"}],["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m6 15 6 6 6-6",key:"h15q88"}]]),i=(0,a.default)("arrow-up-from-line",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var o=e.i(595468),d=e.i(531278),c=e.i(770703),u=e.i(150509),m=e.i(982926),h=e.i(483202),x=e.i(167881),f=e.i(184762),p=e.i(728231),g=e.i(711712),v=e.i(414571),b=e.i(866684),w=e.i(37410),j=e.i(975558),y=e.i(753751),S=e.i(218846),k=e.i(647163),C=e.i(350271),N=e.i(268580);let M=N.workflowService.cellTypes["ai-prompt"],T=({placeholder:e,className:l})=>{let s=(0,r.useRef)(void 0),[a]=(0,r.useState)(M),[n,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(!1),c=(0,r.useCallback)(e=>{d(!1)},[]),u=(0,S.default)({isActive:!0,handler:c}),m=v.default.use.addToQueue(),h=(0,r.useCallback)(e=>{s.current&&"Escape"===e.key&&(d(!1),s.current.blur()),s.current&&"Enter"===e.key&&!e.shiftKey&&s.current.form&&n.trim()&&(s.current.closest("form")?.dispatchEvent(new Event("submit",{bubbles:!0})),e.preventDefault())},[n]);return(0,t.jsx)("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center z-30",children:(0,t.jsx)("div",{className:"flex items-center rounded-lg gap-2 shadow-md max-w-[calc(100vw-24px)]",children:(0,t.jsxs)("form",{ref:u,className:`relative flex flex-row items-center ${l}`,onSubmit:e=>{e.preventDefault(),m((0,v.addCell)(-1,a.value,{display:n}).id),i(""),setTimeout(()=>{d(!1)},50)},children:[(0,t.jsxs)(w.Field.Root,{className:`flex rounded-lg border border-border bg-background items-end transition-[width] duration-150 ease-out ${o?"w-[min(480px,calc(100vw-240px))]":"w-[min(200px,calc(100vw-240px))]"}`,children:[(0,t.jsx)(C.default,{"data-bar-action":"true",value:a.value,heading:a.title,onCellChange:(e,t)=>{(0,v.addCell)(-1,e,{..."user-code"!==e?{content:""}:{content:t}})},children:(0,t.jsx)("button",{className:"p-1.5 mb-1 rounded-full transition-colors",children:(0,t.jsx)(a.Icon,{className:"w-4 h-4"})})}),(0,t.jsx)(w.Field.Textarea,{id:"notebook-bottom-bar",ref:s,value:n,onChange:e=>i(e.target.value),className:"w-full px-3 bg-transparent border-none outline-none resize-none overflow-hidden text-sm focus:ring-0 placeholder:text-muted-secondary flex-1 py-0 whitespace-nowrap leading-9","data-placeholder-unfocused":e.unfocused,"data-placeholder-focused":e.focused,placeholder:e.unfocused,autoresize:!0,rows:1,onClick:()=>{d(!0)},onFocus:e=>{d(!0),e.target.setAttribute("placeholder",e.target.dataset.placeholderFocused)},onBlur:e=>{e.target.setAttribute("placeholder",e.target.dataset.placeholderUnfocused)},onKeyDown:h}),o&&(0,t.jsx)("button",{"data-bar-action":"true",type:"submit",onMouseDown:e=>e.preventDefault(),disabled:!n.trim(),className:`flex items-center justify-center size-6 rounded-full transition-colors mb-1.5 mr-1.5 ${!n.trim()?"bg-muted text-muted-secondary":"bg-primary hover:bg-primary/90 text-primary-foreground"}`,children:(0,t.jsx)(j.ArrowUp,{className:"size-3.5"})})]}),!n&&(0,t.jsx)(y.CommandShortcut,{className:(0,k.cn)("absolute top-1/2 -translate-y-1/2 text-muted-secondary text-xs",o?"right-9":"right-2"),children:"⌘K"})]})})})},A=(0,c.default)(()=>e.A(933415),{loadableGenerated:{modules:[870738]},loading:()=>(0,t.jsx)("div",{className:"h-1"})}),E=(0,c.default)(()=>e.A(434172).then(e=>e.Virtuoso),{loadableGenerated:{modules:[7983]},ssr:!1}),_={Header:()=>(0,t.jsx)("div",{className:"flex items-end justify-center h-6",children:(0,t.jsx)(g.default,{cellIndex:-1,cellId:void 0})}),Footer:()=>(0,t.jsx)("div",{style:{height:"116px"}})},P=(e,r,l)=>(0,t.jsx)(A,{index:e,workflowStep:r,stepCount:l.itemCount}),I={height:"100%",overflowY:"scroll"},R=(0,r.memo)(()=>{let{getAccessTokenSilently:e,user:a}=(0,l.useAuth0)(),{handleLogout:c}=(0,h.useUserAPI)(),{workflowId:g,workflowConversationId:w,virtuoso:j,allStepsComplete:y,accessRole:S}=(0,b.useWorkflowContext)(),k="editor"===S,[C,M]=(0,r.useState)(""),[A,R]=(0,r.useState)("idle"),[F,L]=(0,r.useState)(void 0),{mutateAsync:D,isPending:O}=(0,m.useRequestWorkflowAccess)({workflowId:g}),z=(0,r.useCallback)(e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e){if("string"==typeof e.error)return e.error;if("string"==typeof e.message)return e.message}return"Failed to request access"},[]),{data:$,isSuccess:U,isLoading:B,isError:K,error:q}=(0,m.useWorkflowQuery)({workflowId:g}),{isLoading:W}=(0,u.useConversationMessages)(w),G=(0,r.useMemo)(()=>$?.plan?.steps||[],[$]),{context:H}=(0,r.useMemo)(()=>({context:{itemCount:G.length,allStepsComplete:y}}),[y,G.length]),V=(0,r.useRef)(),Q=(0,r.useRef)(),J=v.default.use.initCells(),Y=v.default.use.initialized(),Z=v.default.use.activeStepId(),[X,ee]=(0,r.useState)(void 0),et=(0,r.useCallback)(()=>{if(!Z)return;let e=G.findIndex(e=>e.id===Z);-1!==e&&N.workflowService.scrollToCell(j,e)},[Z,G,j]);(0,r.useEffect)(()=>{if(!Z||!Y)return ee(void 0);let e=new IntersectionObserver(e=>{let t=e.at(0);t.isIntersecting?ee("visible"):ee(t.target.getBoundingClientRect().top<0?"above":"below")},{threshold:0}),t=document.querySelector(`[data-cell-id="${Z}"]`);return t&&e.observe(t),()=>e.disconnect()},[Z,Y]),(0,r.useEffect)(()=>{U&&J($,e)},[e,J,$,U]),(0,r.useEffect)(()=>{let e=e=>{if(Q.current=V.current,V.current=e.key,((e,t)=>{if("Escape"===e.key){let e=v.default.getState();return e.focusCell(e.focusedCellId,!1),!0}if(["TEXTAREA","INPUT"].includes(document.activeElement.tagName))return!1;if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();let r=v.default.getState(),l=N.workflowService.getWorkflow(r.workflowId)?.plan.steps;if(!r.focusedCellId){let e=l[0];return r.focusCell(e.id,!0),N.workflowService.scrollToCell(t,0),!0}let s="ArrowUp"===e.key?-1:1,a=N.workflowService.getIndexbyStepId(r.workflowId,r.focusedCellId);if(void 0===a)return!0;let n=a+s;if(n>=0&&n<l.length){let e=l[n];r.focusCell(e.id,!0),N.workflowService.scrollToCell(t,n)}return!0}return!1})(e,j)||((e,t)=>{if(e.metaKey&&"Enter"===e.key){let e=v.default.getState(),r=N.workflowService.getWorkflow(e.workflowId)?.plan.steps;if(!e.focusedCellId)return!0;e.addToQueue(e.focusedCellId);let l=N.workflowService.getIndexbyStepId(e.workflowId,e.focusedCellId)+1;if(l<r.length){let s=r[l];e.focusCell(s.id,!0),N.workflowService.scrollToCell(t,l)}return!0}return!1})(e,j)||(e=>{if(["TEXTAREA","INPUT"].includes(document.activeElement.tagName))return!1;if("a"===e.key||"b"===e.key){let t=v.default.getState();if(!t.focusedCellId)return!0;let r=N.workflowService.getIndexbyStepId(t.workflowId,t.focusedCellId)+ +("a"!==e.key);return r>-1&&(0,v.addCell)(r),!0}return!1})(e)||(e=>{if(e.metaKey&&"k"===e.key){let e=document.getElementById("notebook-bottom-bar");if(e)return e.focus(),!0}return!1})(e))return;let t=((e,t)=>{let r,l=e.key;if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||!["d","c","m","p","f","u"].includes(l)||["TEXTAREA","INPUT"].includes(document.activeElement.tagName))return;let{focusedCellId:s,workflowId:a,focusCell:n}=v.default.getState();if(!s)return;let i=N.workflowService.getWorkflow(a)?.plan.steps,o=N.workflowService.getIndexbyStepId(a,s);if(["d","c"].includes(l)&&l===t){if("d"===l){let e=-1,t=o+1,r=o-1;return t<i.length?e=t:r>-1&&(e=r),e>-1&&n(i[e].id,!0),{action:"delete",stepId:s}}else if("c"===l)return{action:"duplicate"}}if("m"===l?r=N.workflowService.cellTypes.markdown:"p"===l?r=N.workflowService.cellTypes["ai-prompt"]:"u"===l?r=N.workflowService.cellTypes["user-prompt"]:"f"===l&&(r=N.workflowService.cellTypes["file-upload"]),r)return{action:"modify",stepId:s,selectedCellType:r}})(e,Q.current);if(t){if("delete"==t.action)return void(0,v.removeCell)(t.stepId);if("modify"==t.action)return void(0,v.updateCell)(t.stepId,{userInputType:t.selectedCellType?.inputType,role:t.selectedCellType?.role,type:t.selectedCellType?.value})}};if(k)return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[j,k]);let er=(0,r.useCallback)(e=>!!e&&"object"==typeof e&&e?.error==="[122] You are not authorized.",[]);return(0,t.jsxs)("div",{className:"relative flex flex-1 flex-col w-full",children:[Y&&(0,t.jsx)(E,{ref:j,style:I,data:G,components:_,context:H,skipAnimationFrameInResizeObserver:!0,computeItemKey:(e,t)=>t?.id??e,atBottomThreshold:15,increaseViewportBy:1/0,itemContent:P}),Y&&["above","below"].includes(X)&&(0,t.jsxs)(p.Tooltip,{children:[(0,t.jsx)(p.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(x.Button,{size:"icon",variant:"outline",className:"rounded-full fixed bottom-6 left-1/2 transform translate-x-1/2 z-50 shadow-lg",onClick:et,"aria-label":"Scroll to active cell",children:"above"===X?(0,t.jsx)(i,{className:"size-4"}):(0,t.jsx)(n,{className:"size-4"})})}),(0,t.jsx)(p.TooltipContent,{children:"Jump to active cell"})]}),!Y&&(W||B)&&(0,t.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,t.jsx)(d.Loader2,{className:"animate-spin size-8"})}),!Y&&K&&er(q)&&(0,t.jsx)("div",{className:"flex flex-col h-full items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-lg border border-input bg-background p-6 shadow-sm",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold tracking-[-0.015em]",children:"You need access"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Request access or switch to an account with access"}),"success"===A?(0,t.jsx)("div",{className:"mt-6 space-y-2 rounded-md border border-green-200 bg-green-50 p-3 text-sm text-green-800",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.CheckCircle2,{className:"size-4"}),(0,t.jsx)("span",{children:"Request sent to the owner"})]})}):(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsx)(f.Textarea,{rows:3,placeholder:"Message (optional)",value:C,onChange:e=>M(e.target.value)}),"error"===A&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-destructive",children:[(0,t.jsx)(s.AlertCircle,{className:"size-3.5"}),(0,t.jsx)("span",{children:F||"Failed to send request. Try again."})]}),(0,t.jsx)(x.Button,{className:"w-full",disabled:O,onClick:async()=>{try{await D({message:C?.trim()||void 0}),R("success"),L(void 0),M("")}catch(e){R("error"),L(z(e))}},children:O?(0,t.jsx)(d.Loader2,{className:"size-4 animate-spin"}):"Request access"})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsx)("span",{className:"truncate",children:a?.email?`You're signed in as ${a.email}`:""}),(0,t.jsx)(x.Button,{variant:"link",className:"h-auto px-0",onClick:c,children:"Sign out"})]})]})}),(0,t.jsx)(T,{placeholder:{focused:"What do you want Julius to do?",unfocused:"Add cell"}})]})});e.s(["default",0,R],314847)},975558,e=>{"use strict";let t=(0,e.i(475254).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["ArrowUp",()=>t],975558)},123287,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",()=>t])},352558,e=>{"use strict";let t=(0,e.i(475254).default)("circle-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);e.s(["CircleOff",()=>t],352558)},595468,e=>{"use strict";var t=e.i(123287);e.s(["CheckCircle2",()=>t.default])},218846,e=>{"use strict";var t=e.i(271645);e.s(["default",0,({isActive:e,handler:r})=>{let l=(0,t.useRef)(null),s=(0,t.useCallback)(t=>{!e||!l.current||l.current.contains(t.target)||"HTML"===(t?.target).nodeName||document.querySelector("[data-radix-focus-guard]")||r(t)},[e,l,r]);return(0,t.useEffect)(()=>(e&&(document.addEventListener("mousedown",s),document.addEventListener("touchstart",s)),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s)}),[e,s]),l}])},736382,e=>{"use strict";var t=e.i(271645),r=e.i(540143),l=e.i(619273),s=e.i(912598);function a(e,t){let r=(0,s.useQueryClient)(t);return i({filters:{...e,status:"pending"}},r).length}function n(e,t){return e.findAll(t.filters).map(e=>t.select?t.select(e):e.state)}function i(e={},a){let o=(0,s.useQueryClient)(a).getMutationCache(),d=t.useRef(e),c=t.useRef(null);return null===c.current&&(c.current=n(o,e)),t.useEffect(()=>{d.current=e}),t.useSyncExternalStore(t.useCallback(e=>o.subscribe(()=>{let t=(0,l.replaceEqualDeep)(c.current,n(o,d.current));c.current!==t&&(c.current=t,r.notifyManager.schedule(e))}),[o]),()=>c.current,()=>c.current)}e.s(["useIsMutating",()=>a,"useMutationState",()=>i])},830204,e=>{"use strict";var t=e.i(843476),r=e.i(271645),l=e.i(150509),s=e.i(414571),a=e.i(866684),n=e.i(709557),i=e.i(720858);let o=(0,r.createContext)(void 0);e.s(["default",0,({children:e,cellIndex:d,stepId:c,step:u})=>{let{workflowConversationId:m,accessRole:h}=(0,a.useWorkflowContext)(),[x,f]=(0,r.useState)([]),[p,g]=(0,r.useState)(!1),v=(0,n.default)(e=>e.socket),b=(0,n.default)(e=>e.isConnected),w=(0,s.default)(e=>e.cells[c]),j=(0,s.default)(e=>e.activeStepId===c),y=(0,s.default)(e=>e.hoveredCellId===c),S=w?.isCollapsed??!1,k=s.default.use.editedCellId(),C=s.default.use.focusedCellId(),N=s.default.use.editCell(),M=s.default.use.hoverCell(),T=s.default.use.focusCell(),A=(0,r.useMemo)(()=>"viewer"!==h&&!!b&&k===c,[h,k,b,c]),E=(0,r.useMemo)(()=>"viewer"!==h&&!!b&&u.status!==i.WorkflowCellStatus.QUEUED,[h,b,u]),_=(0,r.useMemo)(()=>C===c,[C,c]),{data:P}=(0,l.useConversationMessages)(m,{select:(0,r.useCallback)(e=>e.filter(e=>e.plan_step_id===c),[c])});return(0,r.useEffect)(()=>{if(!v)return;let{on:e}=n.default.getState(),t=e("stream_result",e=>{if(e?.message&&e?.conversation_id&&e?.workflow_step_id===c){let t=JSON.parse(e.message);t&&t?.stream_result&&g(!0)}}),r=e("stream_end",e=>{e.workflow_step_id===c&&g(!1)});return()=>{t(),r()}},[g,v,c]),(0,t.jsx)(o.Provider,{value:{cellId:c,cell:w,step:u,cellIndex:d,isGenerating:p,messages:P||[],hoverCell:M,editCell:N,focusCell:T,isEditable:E,isHovering:y,isEditing:A,isFocused:_,isRunning:j,isCollapsed:S,localAttachments:x,setLocalAttachments:f},children:e})},"useWorkflowCellContext",0,()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useWorkflowCell must be used within a WorkflowCellProvider");return e}])},220668,e=>{"use strict";let[t,r]=(0,e.i(532592).createContext)({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1});e.s(["FieldProvider",()=>t,"useFieldContext",()=>r])},37410,e=>{"use strict";e.s([],543313),e.i(543313);var t=e.i(220668);let r=e=>e.children((0,t.useFieldContext)());var l=e.i(843476),s=e.i(911899),a=e.i(271645),n=e.i(978605);let i=(0,a.forwardRef)((e,r)=>{let a=(0,t.useFieldContext)(),i=(0,s.mergeProps)(a.getErrorTextProps(),e);return a?.invalid?(0,l.jsx)(n.ark.span,{...i,ref:r}):null});i.displayName="FieldErrorText";let o=(0,a.forwardRef)((e,r)=>{let a=(0,t.useFieldContext)(),i=(0,s.mergeProps)(a?.getHelperTextProps(),e);return(0,l.jsx)(n.ark.span,{...i,ref:r})});o.displayName="FieldHelperText";let d=(0,a.forwardRef)((e,r)=>{let a=(0,t.useFieldContext)(),i=(0,s.mergeProps)(a?.getInputProps(),e);return(0,l.jsx)(n.ark.input,{...i,ref:r})});d.displayName="FieldInput";let c=(0,a.forwardRef)((e,r)=>{let a=(0,t.useFieldContext)(),i=(0,s.mergeProps)(a?.getLabelProps(),e);return(0,l.jsx)(n.ark.label,{...i,ref:r})});c.displayName="FieldLabel";let u=(0,a.forwardRef)(({fallback:e,...r},a)=>{let i=(0,t.useFieldContext)();if(!i.required)return e;let o=(0,s.mergeProps)(i.getRequiredIndicatorProps(),r);return(0,l.jsx)(n.ark.span,{...o,ref:a,children:r.children??"*"})});u.displayName="FieldRequiredIndicator";var m=e.i(216417),h=e.i(287942),x=e.i(750377),f=e.i(7652);let p="undefined"!=typeof window?a.useLayoutEffect:a.useEffect,[g,v]=(0,e.i(532592).createContext)({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),b=(0,e.i(956364).createAnatomy)("field").parts("root","errorText","helperText","input","label","select","textarea","requiredIndicator").build(),w=(0,h.createSplitProps)(),j=(0,a.forwardRef)((e,r)=>{let[i,o]=w(e,["id","ids","disabled","invalid","readOnly","required"]),d=((e={})=>{let t=v(),r=(0,f.useEnvironmentContext)(),{ids:l,disabled:s=!!t?.disabled,invalid:n=!1,readOnly:i=!1,required:o=!1}=e,[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),h=(0,a.useId)(),g=e.id??h,w=(0,a.useRef)(null),j=l?.control??`field::${g}`,y=l?.errorText??`field::${g}::error-text`,S=l?.helperText??`field::${g}::helper-text`,k=l?.label??`field::${g}::label`;p(()=>{let e=w.current;if(!e)return;let t=()=>{let e=r.getRootNode();c(!!e.getElementById(y)),m(!!e.getElementById(S))};t();let l=new(r.getWindow()).MutationObserver(t);return l.observe(e,{childList:!0,subtree:!0}),()=>l.disconnect()},[r,y,S]);let C=(0,a.useMemo)(()=>{let e=[];return d&&n&&e.push(y),u&&e.push(S),e.join(" ")||void 0},[n,y,S,d,u]),N=(0,a.useMemo)(()=>()=>({...b.root.attrs,id:j,ref:w,role:"group","data-disabled":(0,x.dataAttr)(s),"data-invalid":(0,x.dataAttr)(n),"data-readonly":(0,x.dataAttr)(i)}),[s,n,i,j]),M=(0,a.useMemo)(()=>()=>({...b.label.attrs,id:k,"data-disabled":(0,x.dataAttr)(s),"data-invalid":(0,x.dataAttr)(n),"data-readonly":(0,x.dataAttr)(i),"data-required":(0,x.dataAttr)(o),htmlFor:g}),[s,n,i,o,g,k]),T=(0,a.useMemo)(()=>()=>({"aria-describedby":C,"aria-invalid":(0,x.ariaAttr)(n),"data-invalid":(0,x.dataAttr)(n),"data-required":(0,x.dataAttr)(o),"data-readonly":(0,x.dataAttr)(i),id:g,required:o,disabled:s,readOnly:i}),[C,n,o,i,g,s]),A=(0,a.useMemo)(()=>()=>({...T(),...b.input.attrs}),[T]),E=(0,a.useMemo)(()=>()=>({...T(),...b.textarea.attrs}),[T]),_=(0,a.useMemo)(()=>()=>({...T(),...b.select.attrs}),[T]),P=(0,a.useMemo)(()=>()=>({id:S,...b.helperText.attrs,"data-disabled":(0,x.dataAttr)(s)}),[s,S]),I=(0,a.useMemo)(()=>()=>({id:y,...b.errorText.attrs,"aria-live":"polite"}),[y]);return{ariaDescribedby:C,ids:{root:j,control:g,label:k,errorText:y,helperText:S},refs:{rootRef:w},disabled:s,invalid:n,readOnly:i,required:o,getLabelProps:M,getRootProps:N,getInputProps:A,getTextareaProps:E,getSelectProps:_,getHelperTextProps:P,getErrorTextProps:I,getRequiredIndicatorProps:(0,a.useMemo)(()=>()=>({"aria-hidden":!0,...b.requiredIndicator.attrs}),[])}})(i),c=(0,s.mergeProps)(d.getRootProps(),o);return(0,l.jsx)(t.FieldProvider,{value:d,children:(0,l.jsx)(n.ark.div,{...c,ref:(0,m.composeRefs)(r,d.refs.rootRef)})})});j.displayName="FieldRoot";let y=(0,h.createSplitProps)(),S=(0,a.forwardRef)((e,r)=>{let[{value:a},i]=y(e,["value"]),o=(0,s.mergeProps)(a.getRootProps(),i);return(0,l.jsx)(t.FieldProvider,{value:a,children:(0,l.jsx)(n.ark.div,{...o,ref:r})})});S.displayName="FieldRootProvider";let k=(0,a.forwardRef)((e,r)=>{let a=(0,t.useFieldContext)(),i=(0,s.mergeProps)(a?.getSelectProps(),e);return(0,l.jsx)(n.ark.select,{...i,ref:r})});k.displayName="FieldSelect";let C=(0,a.forwardRef)((e,r)=>{let{autoresize:i,...o}=e,d=(0,a.useRef)(null),c=(0,t.useFieldContext)(),u=(0,s.mergeProps)(c?.getTextareaProps(),{style:{resize:i?"none":void 0}},o);return(0,a.useEffect)(()=>{if(i)return(e=>{if(!e)return;let t=(0,x.getComputedStyle)(e),r=(0,x.getWindow)(e),l=(0,x.getDocument)(e),s=()=>{requestAnimationFrame(()=>{let r;e.style.height="auto",r="content-box"===t.boxSizing?e.scrollHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):e.scrollHeight+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),"none"!==t.maxHeight&&r>parseFloat(t.maxHeight)?("hidden"===t.overflowY&&(e.style.overflowY="scroll"),r=parseFloat(t.maxHeight)):"hidden"!==t.overflowY&&(e.style.overflowY="hidden"),e.style.height=`${r}px`})};e.addEventListener("input",s),e.form?.addEventListener("reset",s);let a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"value");Object.defineProperty(e,"value",{...a,set(){a?.set?.apply(this,arguments),s()}});let n=new r.ResizeObserver(()=>{requestAnimationFrame(()=>s())});n.observe(e);let i=new r.MutationObserver(()=>s());return i.observe(e,{attributes:!0,attributeFilter:["rows","placeholder"]}),l.fonts?.addEventListener("loadingdone",s),()=>{e.removeEventListener("input",s),e.form?.removeEventListener("reset",s),l.fonts?.removeEventListener("loadingdone",s),n.disconnect(),i.disconnect()}})(d.current)},[i]),(0,l.jsx)(n.ark.textarea,{...u,ref:(0,m.composeRefs)(r,d)})});C.displayName="FieldTextarea",e.s(["Context",()=>r,"ErrorText",()=>i,"HelperText",()=>o,"Input",()=>d,"Label",()=>c,"RequiredIndicator",()=>u,"Root",()=>j,"RootProvider",()=>S,"Select",()=>k,"Textarea",()=>C],842309);var N=e.i(842309);e.s(["Field",0,N],37410)},350271,e=>{"use strict";var t=e.i(843476),r=e.i(271645),l=e.i(664659),s=e.i(463415),a=e.i(728231),n=e.i(616525),i=e.i(647163),o=e.i(268580);let d=(0,r.memo)(({open:e,onOpenChange:r,onCellChange:d,children:c,tooltip:u,value:m,heading:h,disabled:x})=>{let{isCaesar:f}=(0,n.useUserContext)();return(0,t.jsxs)(s.DropdownMenu,{open:e,onOpenChange:e=>{r?.(e)},children:[(0,t.jsxs)(a.Tooltip,{children:[(0,t.jsx)(a.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(s.DropdownMenuTrigger,{disabled:x,asChild:!0,children:c||(0,t.jsx)("button",{className:"h-full py-1 px-1 rounded-sm focus:outline-none !ring-0 !ring-offset-0 border-none focus:ring-0 outline-none text-muted-foreground bg-transparent hover:!text-foreground hover:!bg-muted min-w-10",children:(0,t.jsxs)("div",{className:"flex flex-row gap-1 items-center justify-center",children:[(0,t.jsx)("span",{className:"whitespace-nowrap text-xs",children:h}),(0,t.jsx)(l.ChevronDown,{className:"size-3 flex-shrink-0 text-muted-secondary group-hover:text-foreground"})]})})})}),u&&(0,t.jsx)(a.TooltipContent,{children:u})]}),(0,t.jsxs)(s.DropdownMenuContent,{className:"p-0 m-0 rounded-lg",align:"start",side:"bottom",sideOffset:10,alignOffset:-5,children:[(0,t.jsx)("div",{className:"border-b px-3 py-1 bg-message",children:(0,t.jsx)("span",{className:"text-sm",children:"Add a cell"})}),(0,t.jsx)("div",{className:"flex flex-col gap-1 p-2",children:o.workflowService.cellOptions(f).map(e=>{let r=m===e.value;return"user-code"===e.value?(0,t.jsxs)(s.DropdownMenuSub,{children:[(0,t.jsx)(s.DropdownMenuSubTrigger,{className:(0,i.cn)("flex flex-row items-center p-2 h-auto hover:bg-message cursor-pointer rounded-lg border border-transparent",r&&"bg-message border-border"),children:(0,t.jsx)("div",{className:"flex flex-row gap-3 items-center justify-between w-full",children:(0,t.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,t.jsx)(e.Icon,{size:16,className:"text-muted-foreground"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm",children:e.title}),(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:e.description})]})]})})}),(0,t.jsxs)(s.DropdownMenuSubContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"border-b px-3 py-1 bg-message mb-1",children:(0,t.jsx)("span",{className:"text-sm",children:"Select Language"})}),(0,t.jsx)("div",{className:"flex flex-col gap-1 p-1",children:o.workflowService.codeLanguages.map(e=>(0,t.jsx)(s.DropdownMenuItem,{onClick:()=>{d?.("user-code",e.value)},className:(0,i.cn)("cursor-pointer",h===e.label&&r&&"bg-message"),children:(0,t.jsx)("span",{className:"text-sm",children:e.label})},e.value))})]})]},e.description):(0,t.jsx)(s.DropdownMenuItem,{onClick:()=>d?.(e.value,void 0),className:(0,i.cn)("flex flex-col items-start p-2 h-auto hover:bg-message cursor-pointer rounded-lg border border-transparent",r&&"bg-message border-border"),children:(0,t.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,t.jsx)(e.Icon,{size:16,className:"text-muted-foreground"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm",children:e.title}),(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:e.description})]})]})},e.description)})})]})]})});e.s(["default",0,d])},711712,e=>{"use strict";var t=e.i(843476),r=e.i(271645),l=e.i(824511),s=e.i(664659),a=e.i(604570),n=e.i(167881),i=e.i(463415),o=e.i(728231),d=e.i(616525),c=e.i(620949),u=e.i(647163),m=e.i(414571),h=e.i(866684),x=e.i(709557),f=e.i(268580),p=e.i(52563),g=e.i(88653),v=e.i(283086),b=e.i(471435),w=e.i(830204);let j=({suggestions:e,onClick:r})=>{let{cellId:s}=(0,w.useWorkflowCellContext)(),{getAccessTokenSilently:i}=(0,p.useAuth0)(),o=async()=>{let{sendData:e}=x.default.getState(),{workflowConversationId:t,workflowId:r}=m.workflowEngine.getState(),l=await i();a.default.capture("workflow:cell:regenerate_suggestions"),e("regenerate_suggestions",{workflow_id:r,workflow_conversation_id:t,workflow_step_id:s,access_token:l,temp:1})};return(0,t.jsx)(g.AnimatePresence,{children:e.length>0&&(0,t.jsxs)(l.m.div,{className:"flex flex-col gap-2 w-full max-w-3xl overflow-hidden",animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},initial:{height:0,opacity:0},transition:{duration:.3,ease:"easeOut"},children:[(0,t.jsxs)("h2",{className:"inline-flex items-center justify-between font-medium text-sm pt-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,t.jsx)(v.Sparkles,{className:"size-4 flex-shrink-0"}),(0,t.jsx)("span",{children:"Suggested next steps"})]}),(0,t.jsxs)("button",{className:"text-xs text-muted-foreground px-2 py-1 rounded-md hover:bg-muted/50 transition-colors",onClick:o,children:["Not interested? Try ",(0,t.jsx)("u",{children:"new suggestions"})]})]}),(0,t.jsx)(b.ScrollArea,{orientation:"horizontal",className:"mb-3",children:(0,t.jsx)("ul",{className:"flex flex-row flex-nowrap justify-start gap-2 pb-4",children:e.map(e=>(0,t.jsx)(n.Button,{variant:"outline",className:"disabled:opacity-50 rounded-lg py-2 px-3 border border-border bg-background shadow-subtle hover:bg-message/80 transition-colors text-left h-fit",onClick:()=>r(e),children:(0,t.jsx)("span",{className:"text-xs font-normal truncate whitespace-nowrap text-foreground",children:e})},e))})})]})})};e.s(["default",0,({cellIndex:e,cellId:p,permanent:g=!1})=>{let[v,b]=(0,r.useState)(!1),[w,y]=(0,r.useState)([]),{accessRole:S,cellCount:k}=(0,h.useWorkflowContext)(),{data:C}=(0,c.useUserInformation)(),{isCaesar:N}=(0,d.useUserContext)(),M=m.default.use.addToQueue(),T=(0,x.default)(e=>e.socket),A=(0,x.default)(e=>e.isConnected);(0,r.useEffect)(()=>{if(!T)return;let{on:e}=x.default.getState();return e("cell_suggestions",e=>{let{suggestions:t,workflow_step_id:r}=e;r===p?y(t):y([])})},[T,p]),(0,r.useEffect)(()=>{y([])},[k]);let E=(t,r)=>{if(!A)return f.workflowService.disconnectedToast();(0,m.addCell)(e+1,t,{content:r}),y([])},_=(0,r.useMemo)(()=>{let e=C?.preferences?.default_kernel;return e&&["Python","R"].includes(e)?e.toLowerCase():"python"},[C]);return(0,t.jsxs)("div",{className:"relative w-full max-w-3xl",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[e>=0&&(0,t.jsx)(j,{suggestions:w,onClick:t=>{if(!A)return f.workflowService.disconnectedToast();a.default.capture("workflow:cell:suggestion_clicked"),M((0,m.addCell)(e+1,"ai-prompt",{display:t}).id),y([])}}),g&&(0,t.jsx)("div",{className:"h-6"}),(0,t.jsx)("div",{className:"relative group/separator py-1.5 flex items-center justify-center z-20 bg-transparent",children:"editor"==S&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,u.cn)("absolute flex w-full h-[1px] duration-200 max-w-4xl",v&&"bg-muted-secondary")}),(0,t.jsx)(l.m.div,{animate:{opacity:+!!v},transition:{duration:.15},className:(0,u.cn)("flex absolute top-0 gap-1 left-0 w-full h-full items-center justify-center duration-200"),children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsxs)("div",{className:"flex rounded-md border bg-background text-muted-foreground h-6 px-0 border-muted-secondary shadow-subtle overflow-hidden flex-grow flex-shrink flex-basis-0",children:[(0,t.jsx)(n.Button,{variant:"ghost",onClick:()=>E("ai-prompt",void 0),className:"rounded-none bg-transparent flex items-center gap-1 px-1.5 hover:bg-message hover:text-foreground text-xs h-full flex-grow",size:"sm",children:(0,t.jsx)("span",{className:"flex-shrink-0",children:"Cell"})}),(0,t.jsx)("div",{className:"flex-shrink-0 justify-center hover:bg-message px-1 h-full flex items-center group border-l",children:(0,t.jsxs)(i.DropdownMenu,{children:[(0,t.jsx)(i.DropdownMenuTrigger,{className:" ",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(s.ChevronDown,{className:"size-3 flex-shrink-0 text-muted-secondary group-hover:text-foreground"})}),(0,t.jsx)(i.DropdownMenuContent,{align:"center",className:"m-0",children:f.workflowService.cellOptions(N).map(e=>(0,t.jsxs)(o.Tooltip,{delayDuration:300,children:[(0,t.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(i.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),E(e.value,void 0)},className:"flex items-center gap-2 p-1.5 px-1.5 h-fit rounded-sm",children:[(0,t.jsx)(e.Icon,{size:12,className:"text-muted-foreground"}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("span",{className:"text-xs font-normal",children:e.title})})]})}),(0,t.jsx)(o.TooltipContent,{side:"right",sideOffset:5,className:"text-xs",children:e.description})]},e.value))})]})})]}),(0,t.jsxs)("div",{className:"flex rounded-md border bg-background text-muted-foreground h-6 px-0 border-muted-secondary shadow-subtle overflow-hidden flex-grow flex-shrink flex-basis-0",children:[(0,t.jsx)(n.Button,{variant:"ghost",onClick:()=>E("user-code",_),className:"rounded-none bg-transparent flex items-center gap-1 px-1.5 hover:bg-message hover:text-foreground text-xs h-full flex-grow",size:"sm",children:(0,t.jsx)("span",{className:"flex-shrink-0",children:"Code"})}),(0,t.jsx)("div",{className:"flex-shrink-0 justify-center hover:bg-message px-1 h-full flex items-center group border-l",children:(0,t.jsxs)(i.DropdownMenu,{children:[(0,t.jsx)(i.DropdownMenuTrigger,{className:" ",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(s.ChevronDown,{className:"size-3 flex-shrink-0 text-muted-secondary group-hover:text-foreground"})}),(0,t.jsx)(i.DropdownMenuContent,{align:"center",className:"m-0",children:f.workflowService.codeLanguages.map(e=>(0,t.jsxs)(i.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),E("user-code",e.value)},className:"flex items-center gap-2 p-1.5 px-1.5 h-fit rounded-sm",children:[(0,t.jsx)(e.icon,{className:"text-muted-foreground size-3"}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("span",{className:"text-xs font-normal",children:e.label})})]},e.value))})]})})]}),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",className:"!text-muted-foreground hover:!text-foreground rounded-md h-6 gap-1 border-muted-secondary text-xs shadow-subtle flex-grow flex-shrink flex-basis-0",onClick:()=>E("markdown",void 0),children:"Text"})]})})]})})]})}],711712)}]);

//# debugId=465ceb16-37c3-7899-78dd-b786ffc490db
//# sourceMappingURL=0cad28583ce3c9ae.js.map