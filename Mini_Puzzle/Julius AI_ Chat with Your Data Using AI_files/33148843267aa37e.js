;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="211db78e-68fa-0851-02d7-84b8ec6f3f23")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,812479,615640,166551,e=>{"use strict";var t=e.i(517302);e.s(["LockIcon",()=>t.default],812479);var r=e.i(475254);let l=(0,r.default)("blend",[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]]);e.s(["Blend",()=>l],615640);let a=(0,r.default)("dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);e.s(["Dices",()=>a],166551)},647780,e=>{"use strict";let t=(0,e.i(475254).default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);e.s(["Palette",()=>t],647780)},573793,829843,e=>{"use strict";e.i(247167);var t=e.i(843476),r=e.i(271645),l=e.i(643531),a=e.i(788699),s=e.i(107233),o=e.i(812479),n=e.i(604570),i=e.i(846696),c=e.i(264082);e.i(971804);var d=e.i(511108),u=e.i(367944),m=e.i(616525),h=e.i(620949),p=e.i(167881),x=e.i(10708),f=e.i(728231),g=e.i(88653),b=e.i(846932),y=e.i(615640),v=e.i(166551),j=e.i(647780),w=e.i(727612),C=e.i(647163);let k=function({value:e,onChange:l,variant:a="input",className:s=""}){let o=(0,r.useRef)(null),[n,i]=(0,r.useState)(""),c=("string"==typeof e?e:"#000000").startsWith("#")?"string"==typeof e?e:"#000000":`#${e}`;return"swatch"===a?(0,t.jsx)("div",{className:"relative w-8 h-8 rounded-md border border-border cursor-pointer hover:ring-2 hover:ring-primary/50 hover:cursor-pointer",style:{backgroundColor:c},children:(0,t.jsx)("input",{type:"color",value:c,onChange:e=>l(e.target.value),className:"absolute opacity-0 w-full h-full cursor-pointer"})}):(0,t.jsxs)("div",{className:`w-fit flex items-center gap-1 rounded-lg border border-border bg-muted hover:bg-muted/80 hover:cursor-pointer p-1 transition-all duration-200 ${s}`,children:[(0,t.jsxs)("div",{className:"relative w-8 h-8 rounded-md overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary/50",onClick:()=>o.current?.click(),children:[(0,t.jsx)("input",{ref:o,type:"color",value:c,onChange:e=>l(e.target.value),className:"absolute opacity-0 w-full h-full cursor-pointer"}),(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundColor:c}})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("input",{className:"w-16 h-8 bg-transparent text-sm rounded-sm text-center focus:outline-none border-none p-0",value:n||c.replace("#",""),onChange:e=>{let t=e.target.value;i(t),6===t.length&&/^[0-9A-Fa-f]{6}$/.test(t)&&l(`#${t.toUpperCase()}`)},onBlur:()=>{var e;let t=(3===(e=(e=n||c.replace("#","")).replace(/[^0-9a-f]/gi,"")).length&&(e=e.split("").map(e=>e+e).join("")),(e=e.slice(0,6).padEnd(6,"0")).toUpperCase());l(`#${t}`),i("")},placeholder:"000000",maxLength:6})})]})};var N=e.i(630374),_=e.i(23750),T=e.i(184762);let F=[{label:"Figure Size",example:"12x7 inches (golden ratio)"},{label:"Margins",example:"top=0.15, right=0.15, bottom=0.15, left=0.15"},{label:"Plot Area",example:"width=0.7, height=0.7"},{label:"Legend Position",example:"below plot, align=center"},{label:"Grid Lines",example:"y-axis only, color=#F3F4F6, style=dashed"},{label:"Spines",example:"left and bottom only, color=#374151"},{label:"Axis Lines",example:"width=1.0, color=#374151"},{label:"Border Style",example:"width=0.5, color=#E5E5E0"},{label:"Font Family",example:"Inter for modern, EB Garamond for classic"},{label:"Title Style",example:"16pt Inter semibold, color=#2563EB"},{label:"Subtitle Style",example:"14pt Inter medium, color=#374151"},{label:"Axis Labels",example:"12pt Inter medium, color=#374151"},{label:"Tick Labels",example:"10pt Inter regular, color=#6B7280"},{label:"Legend Text",example:"10pt Inter medium, color=#4A4A4A"},{label:"Credit Text",example:"9pt Inter medium, color=#9CA3AF"},{label:"Line Weights",example:"primary=2.0, secondary=1.5"},{label:"Line Styles",example:"solid, dashed, dotted, dash-dot"},{label:"Point Markers",example:"size=6, edge_width=1.5, fill=white"},{label:"Error Bars",example:"cap_size=3, color=#6B7280, width=1.0"},{label:"Bar Charts",example:"width=0.8, edge_color=#374151"},{label:"Scatter Plots",example:"alpha=0.7, marker_size=50"},{label:"Annotations",example:"11pt Inter italic, color=#4B5563"},{label:"Reference Lines",example:"style=dashed, color=#9CA3AF, width=1.0"},{label:"Highlight Regions",example:"alpha=0.1, color=#2563EB"},{label:"Watermark",example:"8pt Inter light, color=#E5E7EB, alpha=0.5"}],S=[[54,55.91401305369244,56.426522222478845,54.909247187988825,51.85163077017417,48.41763970235653,45.63068172381306,43.7768296747344,42.42080108492884,40.95408926758097,39.20251692150935,37.60342206078019,36.82339757275077,37.14085688540283,38.110730432574975,38.810992396847034,38.50987222046963,37.245798164330324,35.85293880154606,35.37242803065368,36.2594934314627,37.971982972866314,39.265614961955556,39.011534441161615,36.96813264620398,33.94608044151263,31.326623323176367,30.21092602331845,30.796308119477374,32.45591382239843,34.3307840144915,35.96546585278401,37.5026944567988,39.32666767330447,41.49161047628112,43.44456441544945,44.31511083371406,43.583240567384976,41.609603412156126,39.580450921199365,38.84246296336124,40.06600156229855,42.82687232244825,45.91347747615337,48.150776518775714,49.16351584053379,49.551089506379974,50.377210315890096,52.36966661730177,55.41692853802468],[78.55468782016486,75.39738940700161,72.26178399712664,69.90561787277639,68.28943206242461,66.81181360152978,64.94528485334658,62.74469592064583,60.82588456739211,59.84557270095324,59.91465860228058,60.434681307799686,60.51598299443308,59.671683922470706,58.24526635385007,57.211115290571584,57.45743974342319,59.06604067673058,61.13233273301341,62.290266390497045,61.595572095114335,59.15496119537816,56.066479762913985,53.7266052751915,53.00158665335547,53.81159919729708,55.43616667208432,57.174263263795986,58.823936416002624,60.694494020024855,63.12016666472482,65.93394006398621,68.3742406297356,69.55117437627383,69.14087562006085,67.76447900216469,66.71552232378633,67.17902602327479,69.47766801885624,72.88476590633066,76.14740000183548,78.35414385245065,79.53576372742926,80.58566159955257,82.58194812823312,86.01833282366528,90.49561088370976,95.06536562055447,98.93002178196805,101.95569965590975],[94.7951640425628,93.34855788977212,91.68873843476274,89.42550772223203,86.8359227420307,84.64882381232756,83.4386466798927,83.12785720913276,83.0142241810663,82.32448696917447,80.87071398793958,79.28229733520539,78.5936064286966,79.4585504950391,81.56652165947338,83.71302117911058,84.51334163391499,83.27950633096874,80.45602663549431,77.32232471757784,75.18875403363137,74.657579655209,75.4421617773493,76.80585143418737,78.22696931173414,79.73762688183724,81.75914124481176,84.53747120716454,87.67686368871279,90.26531505421488,91.47771884709317,91.23212896129793,90.37751145965521,90.22048352248152,91.6920828930384,94.74106910837207,98.39573745070926,101.46062907936582,103.35651897409541,104.51026678881031,106.0306345910705,108.92239027985593,113.41290329670761,118.86036766969353,124.26852240494154,128.9879408535457,133.07087589642248,137.0411054225614,141.30764345090677,145.72827835565576],[114.48270675564439,111.61225028572065,109.23485796051628,107.78027257296841,106.98349099473617,106.10344210634975,104.56220925866127,102.50126340107805,100.79131611883567,100.43835502657767,101.79690066813295,104.1750123694561,106.15376623940256,106.43296344843338,104.63058083493216,101.49096056829393,98.37656238659262,96.42085377758067,95.93761973800956,96.46241678779927,97.31958339449513,98.22949063637066,99.47604487765284,101.52825441630262,104.45598389704459,107.63044615500026,110.06407116462474,111.09745108357613,110.91458309716322,110.53668966114057,111.18367924422142,113.45799430233875,116.93767542943753,120.48374126739513,123.05326432525314,124.44232258959167,125.4343905310758,127.26152763433905,130.77813669055328,135.93816010989403,141.922275323802,147.7732955763203,153.03509040295646,157.920775887945,162.92542690551886,168.24054199817206,173.4792109967521,177.96588598047646,181.38149037926956,184.24503748174206],[132.9034496303223,131.54749833485764,129.82896172967745,127.43169450550809,124.83016502986874,123.06989597803329,123.03973424581538,124.7520979047936,127.17453167863565,128.775396667687,128.43383712125447,126.09744016864227,122.74829157356812,119.72895971827234,117.9229264206265,117.35700905548865,117.45293159455197,117.66555599474611,117.97606782814273,118.85542154379488,120.75306199884281,123.55314680485947,126.47373270188942,128.5368101045766,129.2771430361433,129.12373196692005,129.19572445556315,130.54960672936858,133.40865664492415,137.01260685168995,140.14664987781765,142.00373127898473,142.76935080289445,143.51815607515923,145.5079805975465,149.3829393455632,154.84174960797833,160.9665533869357,166.91872589248234,172.4587901850824,177.91744335843288,183.693011565419,189.7266818851436,195.41940857665585,200.09453040167062,203.65791064562347,206.91741206935728,211.2524299536912,217.80792454483975,226.76218050912607]];function M({isOpen:e,onClose:a,onSave:o,theme:c,onDelete:d}){let[u,m]=(0,r.useState)(()=>{let e="#2563EB",t="multiple",r=((e,t)=>{switch(t){case"lighter":case"manual":return es(e);default:return eo(e)}})(e,t);return{theme_name:c?.name||"",description:c?.description||"Custom theme",primaryColor:c?.primary_color||e,backgroundColor:c?.background_color||"#FFFFFF",secondaryColors:c?.secondary_colors||r,instructions:c?.instructions||"",colorMode:t}}),[h,M]=(0,r.useState)(null),B=(0,r.useRef)(null),[$,A]=(0,r.useState)("multiple"),[D,I]=(0,r.useState)(!1),[E,L]=(0,r.useState)({title:"",submitButton:""}),[P,z]=(0,r.useState)({}),[O,U]=(0,r.useState)(F),[R,W]=(0,r.useState)({theme_name:"",instructions:""}),[J,G]=(0,r.useState)(!1),[H,K]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=e=>{B.current&&!B.current.contains(e.target)&&M(null)};return null!==h&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[h]),(0,r.useEffect)(()=>{let e;if("manual"!==$){if("lighter"===$)e=es(u.primaryColor);else{if("multiple"!==$)return;e=eo(u.primaryColor)}m(t=>({...t,secondaryColors:e}))}},[u.primaryColor,$]),(0,r.useEffect)(()=>{if(e)if(L({title:c?"Edit Theme":"Create Theme",submitButton:c?"Save Changes":"Create Theme"}),U([...F].sort(()=>Math.random()-.5).slice(0,4)),z({}),W({theme_name:"",instructions:""}),K(!1),c){let e="manual",t=es(c.primary_color),r=eo(c.primary_color);JSON.stringify(c.secondary_colors)===JSON.stringify(t)?e="lighter":JSON.stringify(c.secondary_colors)===JSON.stringify(r)&&(e="multiple"),m({theme_name:c.name,description:c.description,primaryColor:c.primary_color,backgroundColor:c.background_color,secondaryColors:[...c.secondary_colors],instructions:c.instructions||"",colorMode:e}),A(e)}else{let e="#2563EB",t="multiple",r=eo(e);m({theme_name:"",description:"Custom theme",primaryColor:e,backgroundColor:"#FFFFFF",secondaryColors:r,instructions:"",colorMode:t}),A(t)}},[c,e]);let q=(0,r.useCallback)(e=>{let t=e.target.value;H&&W(e=>({...e,theme_name:t.trim()?"":"Enter a name for your theme"})),m(e=>({...e,theme_name:t}))},[H]),Q=(0,r.useCallback)(e=>{let t=e.target.value;W(e=>({...e,instructions:t.length>1e3?"Instructions cannot exceed 1000 characters":""})),m(e=>({...e,instructions:t}))},[]),V=(0,r.useCallback)(e=>{m(t=>({...t,primaryColor:e}))},[]),X=(0,r.useCallback)(e=>{m(t=>({...t,backgroundColor:e}))},[]),Y=(0,r.useCallback)((e,t)=>{A("manual"),m(r=>({...r,secondaryColors:r.secondaryColors.map((r,l)=>l===t?e:r)})),M(null)},[]),Z=(0,r.useCallback)(()=>{let e="#2563EB",t="multiple",r=eo(e);m({theme_name:"",description:"Custom theme",primaryColor:e,backgroundColor:"#FFFFFF",secondaryColors:r,instructions:"",colorMode:t}),A(t),M(null)},[]),ee=(0,r.useCallback)(()=>{a()},[a]),et=(0,r.useCallback)(e=>{e||ee()},[ee]),er=(0,r.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),K(!0),!u.theme_name.trim())return void W(e=>({...e,theme_name:"Enter a name for your theme"}));if(u.instructions.length>1e3)return void W(e=>({...e,instructions:"Instructions cannot exceed 1000 characters"}));let t={id:c?.id,name:u.theme_name.trim(),description:u.description,primary_color:u.primaryColor,background_color:u.backgroundColor,secondary_colors:u.secondaryColors,instructions:u.instructions.trim()||void 0};n.default.capture("chart_themes:custom_theme_created",{theme_type:"custom",color_mode:$,has_instructions:!!u.instructions.trim(),theme:t}),o(t),Z()},[u,c,o,Z,$]),el=(0,r.useCallback)(()=>{try{d?.(),I(!1),a()}catch(e){i.toast.error(`Failed to delete theme: ${e}`)}},[d,a]);function ea(e,t,r){let l=t=>(t+e/30)%12,a=(t/=100)*Math.min(r/=100,1-r),s=e=>r-a*Math.max(Math.min(l(e)-3,9-l(e),1),-1),o=Math.round(255*s(0)),n=Math.round(255*s(8)),i=Math.round(255*s(4)),c=e=>{let t=e.toString(16);return 1===t.length?"0"+t:t};return`#${c(o)}${c(n)}${c(i)}`}function es(e){let t=e.replace("#",""),r=parseInt(t.slice(0,2),16)/255,l=parseInt(t.slice(2,4),16)/255,a=parseInt(t.slice(4,6),16)/255,s=Math.max(r,l,a),o=Math.min(r,l,a),n,i,c=(s+o)/2;if(s===o)n=i=0;else{let e=s-o;switch(i=c>.5?e/(2-s-o):e/(s+o),s){case r:n=(l-a)/e+6*(l<a);break;case l:n=(a-r)/e+2;break;case a:n=(r-l)/e+4}n/=6}n=Math.round(360*n),i=Math.round(100*i);let d=c=Math.round(100*c),u=(90-d)/4;return Array.from({length:4},(e,t)=>ea(n,i,d+u*(t+1)))}function eo(e){let t=e.replace("#",""),r=parseInt(t.slice(0,2),16)/255,l=parseInt(t.slice(2,4),16)/255,a=parseInt(t.slice(4,6),16)/255,s=Math.max(r,l,a),o=Math.min(r,l,a),n,i,c=(s+o)/2;if(s===o)n=i=0;else{let e=s-o;switch(i=c>.5?e/(2-s-o):e/(s+o),s){case r:n=(l-a)/e+6*(l<a);break;case l:n=(a-r)/e+2;break;case a:n=(r-l)/e+4}n/=6}return n=Math.round(360*n),i=Math.round(100*i),c=Math.round(100*c),Array.from({length:4},(e,t)=>ea((n+(t+1)*72)%360,i,c))}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Dialog,{open:e,onOpenChange:et,children:(0,t.jsxs)(N.DialogContent,{className:"sm:max-w-[700px] overflow-hidden",children:[(0,t.jsx)(N.DialogHeader,{children:(0,t.jsx)(N.DialogTitle,{children:E.title})}),(0,t.jsx)("div",{className:"overflow-x-hidden",children:(0,t.jsxs)("form",{onSubmit:er,className:"w-full max-w-full space-y-6 mt-2",children:[(0,t.jsx)("div",{className:"w-[320px] h-[213px] mx-auto rounded-md border bg-background overflow-hidden",children:(0,t.jsx)("div",{className:"relative w-full h-full p-4",style:{background:u.backgroundColor},children:[4,3,2,1,0].map(e=>{let r=4===e?u.primaryColor:u.secondaryColors[3-e]??u.primaryColor,l=S[e].map((e,t)=>`${100/49*t},${115-(e/200*90+5)}`).join(" ");return(0,t.jsx)("div",{className:"absolute inset-0",style:{background:"none",overflow:"visible"},children:(0,t.jsx)("svg",{viewBox:"-10 -10 120 120",preserveAspectRatio:"none",className:"w-full h-full",children:(0,t.jsx)("polyline",{points:l,fill:"none",stroke:r,strokeWidth:"3"})})},e)})})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"theme_name",children:"Theme Name"}),(0,t.jsx)(_.Input,{id:"theme_name",value:u.theme_name,onChange:q,placeholder:"Enter theme name",autoComplete:"off",className:`w-[360px] placeholder:font-normal font-normal select-text ${H&&R.theme_name?"border-destructive":""}`}),H&&R.theme_name&&(0,t.jsx)("span",{className:"text-sm text-destructive block mt-1",children:R.theme_name})]}),(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(x.Label,{children:"Primary Color"}),(0,t.jsx)(k,{value:u.primaryColor,onChange:V})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(x.Label,{children:"Background Color"}),(0,t.jsx)(k,{value:u.backgroundColor,onChange:X})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(x.Label,{children:"Secondary Colors"}),(0,t.jsxs)("div",{className:"flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex gap-1.5",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{A("multiple");let e=eo(u.primaryColor);m(t=>({...t,secondaryColors:e}))},className:`inline-flex items-center gap-0.5 px-2 py-1.5 rounded-full text-xs font-normal
                            transition-all duration-200 cursor-pointer shrink-0 border
                            ${"multiple"===$?"bg-primary/10 border-primary/50 text-primary":"border-transparent bg-muted hover:bg-muted/80 hover:border-border"}`,children:[(0,t.jsx)(j.Palette,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"px-1",children:"Match Color Palette"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>{A("lighter");let e=es(u.primaryColor);m(t=>({...t,secondaryColors:e}))},className:`inline-flex items-center gap-0.5 px-2 py-1.5 rounded-full text-xs font-normal
                            transition-all duration-200 cursor-pointer shrink-0 border
                            ${"lighter"===$?"bg-primary/10 border-primary/50 text-primary":"border-transparent bg-muted hover:bg-muted/80 hover:border-border"}`,children:[(0,t.jsx)(y.Blend,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"px-1",children:"Gradient"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>A("manual"),className:`inline-flex items-center gap-0.5 px-2 py-1.5 rounded-full text-xs font-normal
                            transition-all duration-200 cursor-pointer shrink-0 border
                            ${"manual"===$?"bg-primary/10 border-primary/50 text-primary":"border-transparent bg-muted hover:bg-muted/80 hover:border-border"}`,children:(0,t.jsx)("span",{className:"px-1",children:"Manual"})})]}),(0,t.jsx)("div",{className:"flex gap-2 mt-3",children:u.secondaryColors.map((e,r)=>(0,t.jsx)(k,{value:e,onChange:e=>Y(e,r),variant:"swatch"},r))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2 w-full",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Label,{htmlFor:"instructions",children:"Instructions"}),(0,t.jsx)("span",{className:"text-sm text-muted-secondary",children:"(Optional)"})]}),u.instructions.length>=800&&(0,t.jsxs)("span",{className:`text-sm font-medium ${u.instructions.length>1e3?"text-destructive":"text-muted-foreground"}`,children:[u.instructions.length,"/1000"]})]}),u.instructions.length>1e3&&(0,t.jsx)("span",{className:"text-sm text-destructive block",children:"Instructions cannot exceed 1000 characters"})]}),(0,t.jsx)("div",{className:(0,C.cn)("flex overflow-x-auto pb-2 relative h-[32px]",O.length>0?"gap-1":"gap-0"),style:{msOverflowStyle:"none",scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsxs)(g.AnimatePresence,{mode:"popLayout",children:[O.map((e,r)=>(0,t.jsxs)(b.motion.button,{type:"button",layout:!0,initial:{scale:.8,opacity:0,x:-20},animate:{scale:1,opacity:1,x:0},exit:{scale:.8,opacity:0,x:-20},transition:{duration:.15,delay:.05*r},onClick:t=>{t.preventDefault(),t.stopPropagation(),z(t=>({...t,[e.label]:!0})),m(t=>({...t,instructions:t.instructions+(t.instructions?"\n":"")+`${e.label}: ${e.example}`})),U(t=>t.filter(t=>t.label!==e.label))},className:"inline-flex items-center px-2 py-1.5 rounded-full text-xs font-normal cursor-pointer shrink-0 border border-transparent whitespace-nowrap bg-muted hover:bg-muted/80 hover:border-border group h-[28px]",title:e.example,children:[(0,t.jsx)("div",{className:"relative w-3.5 mr-1 flex items-center justify-center h-3.5",children:P[e.label]?(0,t.jsx)(l.Check,{className:"h-3.5 w-3.5 text-muted-foreground"}):(0,t.jsx)(s.Plus,{className:"h-3.5 w-3.5 text-muted-foreground"})}),(0,t.jsx)("span",{children:e.label})]},e.label)),(0,t.jsxs)(b.motion.button,{type:"button",layout:!0,initial:{opacity:1},exit:{opacity:0},transition:{duration:.1},onClick:e=>{e.preventDefault(),e.stopPropagation(),G(!0);let t=F.filter(e=>!P[e.label]);t.length>=4?U([...t].sort(()=>Math.random()-.5).slice(0,4)):U([...F].sort(()=>Math.random()-.5).slice(0,4)),z({})},className:"inline-flex items-center px-2 py-1.5 rounded-full text-xs font-normal cursor-pointer shrink-0 text-muted-secondary hover:text-foreground whitespace-nowrap h-[28px]",children:[(0,t.jsx)(b.motion.div,{animate:J?{rotate:[0,-15,15,-15,15,0],x:[0,-3,3,-3,3,0]}:{},transition:J?{duration:.4,ease:"easeInOut",times:[0,.2,.4,.6,.8,1]}:{},onAnimationComplete:()=>G(!1),children:(0,t.jsx)(v.Dices,{className:"h-3.5 w-3.5"})}),(0,t.jsx)("span",{className:"ml-1.5",children:"More suggestions"})]},"refresh-button")]})}),(0,t.jsx)(T.Textarea,{id:"instructions",value:u.instructions,onChange:Q,placeholder:"Tell Julius how to style your visualizations (max. 1000 characters)",rows:5,className:"w-full select-text"})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-2",children:[c&&(0,t.jsx)(f.TooltipProvider,{children:(0,t.jsxs)(f.Tooltip,{children:[(0,t.jsx)(f.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(p.Button,{type:"button",variant:"outline",onClick:()=>I(!0),className:"text-muted-foreground hover:text-destructive hover:border-destructive p-2 h-10 w-10",children:(0,t.jsx)(w.Trash2,{className:"h-4 w-4"})})}),(0,t.jsx)(f.TooltipContent,{children:(0,t.jsx)("p",{children:"Delete Theme"})})]})}),(0,t.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,t.jsx)(p.Button,{type:"button",variant:"outline",onClick:ee,children:"Cancel"}),(0,t.jsx)(p.Button,{type:"submit",disabled:u.instructions.length>1e3,className:u.instructions.length>1e3?"opacity-50 cursor-not-allowed":"",children:E.submitButton})]})]})]})})]})}),(0,t.jsx)(N.Dialog,{open:D,onOpenChange:I,children:(0,t.jsxs)(N.DialogContent,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(N.DialogHeader,{children:[(0,t.jsxs)(N.DialogTitle,{children:['Delete "',u.theme_name,'"?']}),(0,t.jsx)(N.DialogDescription,{children:"This will permanently delete this theme"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(p.Button,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),(0,t.jsx)(p.Button,{variant:"destructive",onClick:el,children:"Delete"})]})]})})]})}function B(e){return!!e&&"primary_color"in e}e.s(["RANDOM_WALK_DATA",0,S,"ThemeEditModal",()=>M],829843);let $=new Date(Date.UTC(2025,5,11,0,0,0)),A=["pro","standard","teams","enterprise","premium","diamond","team","business"];function D(){let{plotThemes:e,setPlotThemes:g}=(0,m.useUserContext)(),{toolPreferences:b,setToolPreferences:y,conversations:v,activeConversationId:j,setConversations:w,isFreeUser:C}=(0,u.useChatContext)(),[k,N]=(0,r.useState)(()=>b?.plot_theme||"default"),[_,T]=(0,r.useState)(!1),[F,D]=(0,r.useState)(null),{saveTheme:I,loadThemes:E,deleteTheme:L}=(0,c.useAuthenticatedAPIs)(),P=(0,h.useUpdateUserPreferences)(),{patchConversation:z}=(0,d.useChatAPI)(),{data:O}=(0,h.useUserSubscription)(),{data:U}=(0,h.useUserInformation)(),R=e=>{if(!U?.created_at||new Date(U.created_at)<$)return!1;if(C){if(!["default","julius"].includes(e.id))return!0}else{let t=O?.plan?.toLowerCase();if("lite"===t){if(!["default","julius","dark"].includes(e.id))return!0}else t&&A.includes(t)}return!1},W=()=>{if(!U?.created_at||new Date(U.created_at)<$)return!0;let e=O?.plan?.toLowerCase();return O?.plan&&A.includes(e)};(0,r.useEffect)(()=>{(async()=>{try{let e=await E();if(e?.themes&&Array.isArray(e.themes))return e.themes}catch(e){i.toast.error(`Failed to load themes: ${e}`)}})()},[E]);let J=async r=>{let l=r||"default",a=e.find(e=>e.id===l);if(a&&R(a)){i.toast.warning((0,t.jsxs)("div",{className:"break-words",children:[(0,t.jsx)("a",{className:"underline text-primary",href:"/settings",target:"_blank",rel:"noopener noreferrer",onClick:()=>{n.default.capture("upgrade_button_clicked",{location:"select_theme_settings_toast",theme:a.id})},children:"Upgrade"})," ","to use this theme"]})),n.default.capture("upgrade_cta_shown",{type:"toast",name:"select_theme_settings"});return}N(l),n.default.capture("chart_themes:theme_selected",{source:"settings_modal",theme_type:a&&B(a)?"custom":"default",theme:a}),y(e=>{let t={...e,plot_theme:l};return j&&z({conversationId:j,toolPreferences:t}),t}),P.mutate({plot_theme:l}),v?.[j]&&w(e=>({...e,[j]:{...e[j],tool_preferences:{...e[j].tool_preferences,plot_theme:l}}}))},G=async e=>{try{if(T(!1),!await I(e).then(e=>e.theme))throw Error("Failed to save theme");let t=await E();t.themes&&g(t.themes),D(null)}catch(e){i.toast.error("Failed to save theme")}},H=(0,r.useCallback)(t=>{try{let r=e.filter(e=>e.id!==t.id);g(r),L(t.id),k===t.id&&(N("default"),y(e=>({...e,plot_theme:"default"})),P.mutate({plot_theme:"default"}))}catch(e){i.toast.error("Failed to delete theme")}},[e,k,L,y,P]);return(0,t.jsxs)("div",{className:"flex flex-col gap-4 w-full bg-background",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)(x.Label,{className:"text-lg",children:"Themes"}),(0,t.jsx)("p",{className:"text-sm font-normal text-muted-foreground",children:"Choose what Julius visualizations should look like"})]}),(0,t.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[e.map(e=>{let r=R(e);return(0,t.jsxs)(f.Tooltip,{children:[(0,t.jsx)(f.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:`group flex flex-col gap-2 cursor-pointer ${r?"opacity-60":""}`,onClick:()=>J(e.id),children:[(0,t.jsxs)("div",{className:`relative rounded-lg border transition-all overflow-hidden aspect-[3/2] ${k===e.id?"border-primary":"border-border group-hover:border-primary/50"}`,children:[k===e.id&&(0,t.jsx)("div",{className:"absolute top-1.5 left-1.5 z-10",children:(0,t.jsx)("div",{className:"bg-primary rounded-full p-1",children:(0,t.jsx)(l.Check,{className:"h-3 w-3 text-white",strokeWidth:3})})}),r&&(0,t.jsx)("div",{className:"absolute top-1.5 right-1.5 z-10",children:(0,t.jsx)("div",{className:"bg-background/80 backdrop-blur-sm rounded-full p-1",children:(0,t.jsx)(o.LockIcon,{className:"h-3 w-3 text-muted-foreground"})})}),B(e)&&!r&&(0,t.jsx)("div",{className:"absolute top-1 right-1 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsxs)("div",{className:"relative overflow-visible",children:[(0,t.jsx)("div",{className:"absolute -inset-3 rounded-full",style:{background:`radial-gradient(circle, ${e.background_color||"hsl(var(--background))"} 30%, transparent 70%)`}}),(0,t.jsx)(p.Button,{size:"icon",variant:"ghost",className:"h-6 w-6 p-1 relative rounded-sm",onClick:t=>{t.stopPropagation(),B(e)&&(D(e),T(!0))},children:(0,t.jsx)(a.Pencil,{className:"h-4 w-4 text-muted-foreground"})})]})}),e.preview?(0,t.jsx)("img",{src:`https://dwhljmdyc94zv.cloudfront.net/public${e.preview}`,alt:`${e.name} theme preview`,className:"w-full h-full rounded-md object-fill",style:{backgroundColor:"transparent"}}):(0,t.jsx)("div",{className:"w-full h-full rounded-md p-2",style:{backgroundColor:e.background_color||"hsl(var(--background))"},children:(0,t.jsx)("div",{className:"relative w-full h-full",children:[4,3,2,1,0].map(r=>{let l="primary"in e?"#000":4===r?e.primary_color:e.secondary_colors?.[3-r]??e.primary_color,a=S[r].map((e,t)=>`${100/49*t},${115-(e/200*90+5)}`).join(" ");return(0,t.jsx)("div",{className:"absolute inset-0",style:{background:"none",overflow:"visible"},children:(0,t.jsx)("svg",{viewBox:"-5 -5 115 115",preserveAspectRatio:"none",className:"w-full h-full",children:(0,t.jsx)("polyline",{points:a,fill:"none",stroke:l,strokeWidth:"3"})})},r)})})})]}),(0,t.jsx)("div",{className:"relative flex items-center max-w-full",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)("h3",{className:`font-normal text-sm truncate transition-colors ${k===e.id?"text-foreground":"text-muted-foreground group-hover:text-foreground"}`,children:e.name})})})]})}),r&&(0,t.jsx)(f.TooltipContent,{side:"top",className:"z-50 w-36 text-sm sm:w-64",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsxs)("div",{className:"font-semibold break-words",children:[(0,t.jsx)("a",{className:"underline pointer-events-auto text-primary",href:"/settings",target:"_blank",rel:"noopener noreferrer",onClick:t=>{n.default.capture("upgrade_button_clicked",{location:"select_theme_settings_tooltip",theme:e.id}),t.stopPropagation()},children:"Upgrade"})," ","to use this theme"]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:e.description})]})})]},e.id)}),(0,t.jsxs)(f.Tooltip,{children:[(0,t.jsx)(f.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:`cursor-pointer rounded-md transition-all group flex flex-col gap-2 ${!W()?"opacity-60":""}`,onClick:e=>{W()?(D(null),T(!0),n.default.capture("chart_themes:new_theme_clicked",{source:"settings_modal"})):(e.preventDefault(),i.toast.warning((0,t.jsxs)("div",{className:"break-words",children:[(0,t.jsx)("a",{className:"underline text-primary",href:"/settings",target:"_blank",rel:"noopener noreferrer",onClick:()=>{n.default.capture("upgrade_button_clicked",{location:"new_theme_toast"})},children:"Upgrade"})," ","to create custom themes"]})),n.default.capture("upgrade_cta_shown",{type:"toast",name:"new_theme"}))},children:[(0,t.jsxs)("div",{className:"w-full aspect-[3/2] rounded-md flex items-center justify-center bg-transparent hover:bg-muted transition-colors p-2 relative",children:[!W()&&(0,t.jsx)("div",{className:"absolute top-1.5 right-1.5 z-10",children:(0,t.jsx)("div",{className:"bg-background/80 backdrop-blur-sm rounded-full p-1",children:(0,t.jsx)(o.LockIcon,{className:"h-3 w-3 text-muted-foreground"})})}),(0,t.jsxs)("div",{className:"relative w-full h-full flex flex-col items-center",children:[(0,t.jsx)("div",{className:"relative w-full flex-1",children:[4,3,2,1,0].map(e=>{let r=S[e].map((e,t)=>`${100/49*t},${100-(e/200*68+5)}`).join(" ");return(0,t.jsx)("div",{className:"absolute inset-0",style:{background:"none",overflow:"visible"},children:(0,t.jsx)("svg",{viewBox:"-5 -5 115 115",preserveAspectRatio:"none",className:"w-full h-full",children:(0,t.jsx)("polyline",{points:r,fill:"none",stroke:"hsl(var(--muted-foreground))",strokeWidth:"2",opacity:"0.3",className:"transition-colors group-hover:stroke-[hsl(var(--muted-foreground))]"})})},e)})}),(0,t.jsx)("div",{className:"w-full flex justify-center pb-1",children:(0,t.jsxs)("h3",{className:`font-normal text-xs flex items-center gap-0.5 ${W()?"text-muted-foreground group-hover:text-foreground":"text-muted-secondary group-hover:text-muted-foreground"}`,children:[(0,t.jsx)(s.Plus,{className:"h-3 w-3"}),"New theme"]})})]})]}),(0,t.jsx)("div",{className:"relative flex items-center max-w-full",children:(0,t.jsx)("div",{className:"w-full"})})]})}),(0,t.jsx)(f.TooltipContent,{side:"top",className:"z-50 w-36 text-sm sm:w-64",children:(0,t.jsx)("div",{className:"flex flex-col space-y-1",children:W()?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"font-semibold",children:"Create New Theme"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Design your own chart themes with custom colors and styling"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"font-semibold break-words",children:[(0,t.jsx)("a",{className:"underline pointer-events-auto text-primary",href:"/settings",target:"_blank",rel:"noopener noreferrer",onClick:e=>{n.default.capture("upgrade_button_clicked",{location:"new_theme_tooltip"}),e.stopPropagation()},children:"Upgrade"})," ","to create custom themes"]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Design your own chart themes with custom colors and styling"})]})})})]})]})})]}),(0,t.jsx)(M,{isOpen:_,theme:F,onClose:()=>{T(!1),D(null)},onSave:G,onDelete:()=>F&&H(F)})]})}e.s(["ThemesSettings",()=>D,"isCustomTheme",()=>B],573793)}]);

//# debugId=211db78e-68fa-0851-02d7-84b8ec6f3f23
//# sourceMappingURL=871139d0906b3136.js.map