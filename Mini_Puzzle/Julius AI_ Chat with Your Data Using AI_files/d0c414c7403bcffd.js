;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="9ea78379-cec7-aa50-3469-690b145e2101")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,113347,765066,701576,e=>{"use strict";var a=e.i(843476),t=e.i(271645),n=e.i(398361),r=e.i(52563),o=e.i(619273),i=e.i(954616),c=e.i(266027),s=e.i(842405),l=e.i(394073),d=e.i(647163);let u=async({accessToken:e,conversationId:a,pageState:t={}})=>{let n=new URLSearchParams;Object.keys(t).length>0&&Object.entries(t).forEach(([e,a])=>{n.append(`${e}_page`,a.toString())});let r=`${l.BASE_API}/hub/global_variables${n.toString()?"?"+n.toString():""}`,o=await (0,d.customFetch)(r,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Conversation-Id":a}});if(!o.ok)throw Error("Failed to fetch global variables");return await o.json()},g=async({accessToken:e,conversationId:a,dataframeName:t,dataframePage:n=0})=>{let r=await (0,d.customFetch)(`${l.BASE_API}/hub/dataframe/${t}?page=${n}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Conversation-Id":a}});if(!r.ok)throw Error("Failed to fetch dataframe");return await r.json()},m=async({accessToken:e,conversationId:a,dataframeName:t})=>{let n=await g({accessToken:e,conversationId:a,dataframeName:t,dataframePage:0});if(n.totalPages<=1)return n;let r=[];for(let o=1;o<n.totalPages;o++)r.push(g({accessToken:e,conversationId:a,dataframeName:t,dataframePage:o}));let o=await Promise.all(r),i=e=>{try{let a=e.indexOf("[JULIUS_TABLE]:");if(-1===a)return null;return JSON.parse(JSON.parse(e.slice(a+15)))}catch{return null}},c=i(n.rawData);if(!c)return n;let s=c.data||[];for(let e of o){let a=i(e.rawData);a&&a.data&&s.push(...a.data)}let l={columns:c.columns,data:s},d=`[JULIUS_TABLE]:${JSON.stringify(JSON.stringify(l))}`;return{...n,rawData:d,page:0,totalPages:1,rows:s.length}},p=async({accessToken:e,conversationId:a,dataframeName:t})=>{let n=await (0,d.customFetch)(`${l.BASE_API}/hub/dataframe/${t}/save`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Conversation-Id":a}});if(!n.ok)throw Error("Failed to save dataframe");return await n.json()},h=async({accessToken:e,conversationId:a,dataframeName:t,columnName:n})=>{let r=encodeURIComponent(n),o=await (0,d.customFetch)(`${l.BASE_API}/hub/dataframe/${t}/column/${r}/summary`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Conversation-Id":a}});if(!o.ok)throw Error("Failed to retrieve column summary");return await o.json()},f=e=>["globalVariables",e],y=({conversationId:e,pageState:a={}})=>{let{getAccessTokenSilently:t}=(0,r.useAuth0)();return(0,c.useQuery)({queryKey:f(e),queryFn:async()=>{let n=await u({accessToken:await t(),conversationId:e,pageState:a});return n.variables&&await s.client.invalidateQueries({queryKey:["dataframePage",e],exact:!1}),n},refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,staleTime:1/0})};e.s(["getGlobalVariablesQueryKey",0,f,"useGetCompleteDataframe",0,({conversationId:e,dataframeName:a,enabled:t=!0})=>{let{getAccessTokenSilently:n}=(0,r.useAuth0)();return(0,c.useQuery)({queryKey:["complete-dataframe",e,a],queryFn:async()=>m({accessToken:await n(),conversationId:e,dataframeName:a}),enabled:t&&!!e&&!!a,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,staleTime:18e5,gcTime:36e5})},"useGetDataframeColumnSummary",0,({conversationId:e,dataframeName:a,columnName:t})=>{let{getAccessTokenSilently:n}=(0,r.useAuth0)();return(0,c.useQuery)({queryKey:["columnSummary",e,a,t],queryFn:async()=>h({accessToken:await n(),conversationId:e,dataframeName:a,columnName:t}),refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,staleTime:1/0})},"useGetDataframePage",0,({conversationId:e,dataframeName:a,dataframePage:t})=>{let{getAccessTokenSilently:n}=(0,r.useAuth0)();return(0,c.useQuery)({queryKey:["dataframePage",e,a,t],queryFn:async()=>g({accessToken:await n(),conversationId:e,dataframeName:a,dataframePage:t}),placeholderData:o.keepPreviousData,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,staleTime:1/0})},"useGetGlobalVariables",0,y,"useSaveDataframeToHub",0,()=>{let{getAccessTokenSilently:e}=(0,r.useAuth0)();return(0,i.useMutation)({mutationFn:async({conversationId:a,dataframeName:t})=>p({accessToken:await e(),conversationId:a,dataframeName:t})})}],765066);var b=e.i(277604),A=e.i(367944);let _=e=>{try{if(!e||"string"!=typeof e)return null;let a=e.indexOf("[JULIUS_TABLE]:");if(-1===a)return null;let t=e.slice(a+15),n=JSON.parse(JSON.parse(t)),r=n.columns||[],o=n.data?.length||0,i=n.data?.slice(0,3)||[];return{columnNames:r.join(","),rowCount:o,sampleData:JSON.stringify(i),columnCount:r.length}}catch(e){return null}},w=e=>e?.variables?Object.entries(e.variables).map(([e,a])=>({...a})):[],x=(e,a)=>{if(!e||!a?.length)return null;let t=a.map(a=>{try{let t=_(a.rawData);if(!t)return{df:a,score:0};let n=0;if(e.columnNames===t.columnNames)n+=40;else{let a=e.columnNames.split(","),r=t.columnNames.split(","),o=a.filter(e=>r.includes(e)).length;n+=o/Math.max(a.length,r.length)*30}let r=Math.min(e.rowCount,t.rowCount)/Math.max(e.rowCount,t.rowCount);if(n+=20*r,e.sampleData===t.sampleData)n+=40;else{let a=((e,a)=>{if(!e||!a)return 0;let t=e.length>500?e.substring(0,500):e,n=a.length>500?a.substring(0,500):a,r=0;for(let e=0;e<t.length;e++)n.includes(t[e])&&r++;return 2*r/(t.length+n.length)})(e.sampleData,t.sampleData);n+=25*a}return{df:a,score:n}}catch(e){return console.error("Error matching dataframe:",e,a),{df:a,score:0}}}).reduce((e,a)=>a.score>e.score?a:e,{df:null,score:0});return t.score>60?t.df:null},v=(e,a)=>!!e&&!!a?.length&&null!==x(e,a);e.s(["checkDataframeExists",0,v,"extractDataframes",0,w,"findMatchingDataframe",0,x,"getDataframeColumns",0,e=>{try{if(!e||"string"!=typeof e)return[];let a=e.indexOf("[JULIUS_TABLE]:");if(-1===a)return[];let t=e.slice(a+15);return JSON.parse(JSON.parse(t)).columns||[]}catch(e){return[]}},"getDataframeSignature",0,_],701576);var E=e.i(604570),k=e.i(728231),C=e.i(915492);let T=({dataframeString:e,disabled:t})=>{let{setIsRightSidebarOpen:r,setRightSidebarCurrentTab:o}=(0,C.useSidebarsContext)();return(0,a.jsxs)(k.Tooltip,{children:[(0,a.jsx)(k.TooltipTrigger,{asChild:!0,children:(0,a.jsx)("button",{disabled:t,onClick:()=>{E.default.capture("clicked_expand_dataframe"),r(!0),o("variableExplorer"),setTimeout(()=>{d.eventEmitter.emit("findAndExpandDataframe",_(e))},300)},className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-neutral-800 transition-colors disabled:opacity-50 disabled:pointer-events-none",children:(0,a.jsx)(n.Maximize2,{className:"w-4 h-4 text-muted-foreground"})})}),(0,a.jsx)(k.TooltipContent,{side:"bottom",children:(0,a.jsx)("p",{children:"Full screen"})})]})};var S=e.i(440160),D=e.i(846696),F=e.i(150509),j=e.i(565489),O=e.i(463415);let I=({messageId:e,dfSelectorIndex:t})=>{let n=(0,F.useDownloadDataframeMutation)(),r=(0,j.useDownloadFileMutation)(),o=n.isPending||r.isPending,i=a=>{D.toast.promise(n.mutateAsync({messageId:e,dfSelectorIndex:t,desiredFileType:a}).then(e=>r.mutateAsync({filename:e.filename})),{loading:"Downloading...",success:e=>`${e.name} has been successfully downloaded`,error:"Files only persist for 1 hour after their creation"})};return(0,a.jsxs)(O.DropdownMenu,{children:[(0,a.jsxs)(k.Tooltip,{children:[(0,a.jsx)(k.TooltipTrigger,{asChild:!0,children:(0,a.jsx)(O.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)("button",{"data-event":"clicked_download_dataframe",disabled:o,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-neutral-800 transition-colors disabled:opacity-50 disabled:pointer-events-none",children:(0,a.jsx)(S.Download,{className:"w-4 h-4 text-muted-foreground"})})})}),(0,a.jsx)(k.TooltipContent,{side:"bottom",children:(0,a.jsx)("p",{children:"Download"})})]}),(0,a.jsx)(O.DropdownMenuContent,{children:(0,a.jsxs)(O.DropdownMenuGroup,{children:[(0,a.jsx)(O.DropdownMenuLabel,{children:"Export as"}),(0,a.jsx)(O.DropdownMenuItem,{onClick:()=>i("CSV"),children:".csv"}),(0,a.jsx)(O.DropdownMenuItem,{onClick:()=>i("XLSX"),children:".xlsx"})]})})]})};var P=e.i(657688),U=e.i(767601),N=e.i(672883);let R=({conversationId:e,messageId:t,disabled:n=!1})=>{let{data:r}=(0,U.useGoogleOauthToken)(),o=(0,U.useGoogleDriveAuthUrl)(),i=(0,U.useExportDataframeToGoogleDrive)(),c=r?.scopes?.includes(N.GOOGLE_OAUTH_SCOPES.DRIVE_FILE),s=o.isPending||i.isPending;return(0,a.jsxs)(k.Tooltip,{children:[(0,a.jsx)(k.TooltipTrigger,{asChild:!0,children:(0,a.jsx)("button",{disabled:n||s,onClick:()=>{r?c?D.toast.promise(i.mutateAsync({conversationId:e,messageId:t}),{loading:"Exporting to Google Sheets...",success:e=>({message:"Successfully exported to Google Sheets!",action:{label:"Open file",onClick:()=>window.open(e,"_blank","noopener,noreferrer")}}),error:e=>e.message}):D.toast.promise(o.mutateAsync({scopes:[N.GOOGLE_OAUTH_SCOPES.DRIVE_FILE]}),{loading:"Enabling Google Drive access...",success:e=>(window.location.href=e,"Redirecting to Google..."),error:e=>e.message}):o.mutate({conversationId:e},{onSuccess:e=>window.location.href=e,onError:e=>D.toast.error(e.message)})},className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-neutral-800 transition-colors disabled:opacity-50 disabled:pointer-events-none",children:(0,a.jsx)(P.default,{src:"/gsheets_logo.png",alt:"Google Sheets",width:16,height:16,className:"w-4 h-4"})})}),(0,a.jsx)(k.TooltipContent,{side:"bottom",children:(0,a.jsx)("p",{children:"Export to Google Sheets"})})]})},B="[JULIUS_TABLE]:",M=(0,t.memo)(({dataframeString:e,juliusMessageId:r,juliusDfSelectorIndex:o,showViewFullButton:i=!1,showExportButton:c=!0,showInfoHeader:s=!0,columnTooltips:l=null,fixedHeader:u=!0,isAttachedToToolCall:g=!1,isCollapsed:m=!1,onExpand:p,maxVisibleRows:h})=>{let{activeConversationId:f,pageStateTracker:x}=(0,A.useChatContext)(),E=h?`${36*h}px`:void 0,k=(0,t.useMemo)(()=>(function(e){if(!e)return null;let a=e.indexOf(B);if(-1===a)return null;try{let t=e.slice(a+B.length);return JSON.parse(JSON.parse(t))}catch{return null}})(e),[e]),C=k?.data??[],S=k?.columns??[],{data:D}=y({conversationId:f,pageState:x?.current||{}}),F=(0,t.useMemo)(()=>v(_(e),w(D)),[e,D]),j=k?.num_rows??C?.length??0,O=k?.num_cols??S?.length??0;return(0,a.jsx)("div",{"data-cy":"inline-editable-dataframe",className:"relative",children:(0,a.jsxs)("div",{className:(0,d.cn)("flex flex-col overflow-hidden border border-border",g?"rounded-b-xl border-t-0":"rounded-xl"),children:[s&&(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center px-3 h-8 bg-gray-100 dark:bg-neutral-900 border-b border-border",children:[(0,a.jsxs)("span",{className:"text-xs font-medium text-muted-foreground tracking-tight",children:[O," cols, ",j," rows returned"]}),(0,a.jsxs)("div",{className:"flex items-center gap-0.5",children:[i&&(0,a.jsx)(R,{conversationId:f,messageId:r,disabled:!c}),c&&(0,a.jsx)(I,{messageId:r,dfSelectorIndex:o}),i&&(0,a.jsx)(T,{dataframeString:e,disabled:!F})]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-neutral-900 overflow-hidden w-max-full",children:(0,a.jsx)(b.DataframeDisplay,{embedded:!0,index:k?.index,columns:S,rows:m?C?.slice(0,1):C,enableRightClick:!m,juliusMessageId:r,juliusDfSelectorIndex:o,columnTooltips:l,enableCellEdit:!m,fixedHeader:u,applyRowLimit:!m,maxHeight:E})}),m&&C?.length>1&&(0,a.jsxs)("button",{onClick:p,className:"flex items-center gap-1.5 w-full px-3 py-2 bg-white dark:bg-neutral-900 border-t border-border text-xs text-muted-secondary hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors",children:[(0,a.jsx)(n.Maximize2,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:["Show ",C.length-1," more rows"]})]})]})})});M.displayName="InlineEditableDataframe",e.s(["InlineEditableDataframe",0,M],113347)},232189,(e,a,t)=>{"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},865156,(e,a,t)=>{"use strict";var n=e.r(232189);function r(){}function o(){}o.resetWarningCache=r,a.exports=function(){function e(e,a,t,r,o,i){if(i!==n){var c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function a(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:a,element:e,elementType:e,instanceOf:a,node:e,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:o,resetWarningCache:r};return t.PropTypes=t,t}},745009,(e,a,t)=>{a.exports=e.r(865156)()},110534,(e,a,t)=>{ace.define("ace/theme/cloud9_day-css",["require","exports","module"],function(e,a,t){t.exports='.ace-cloud9-day .ace_gutter {\n    background: #ECECEC;\n    color: #333;\n}\n\n.ace-cloud9-day .ace_print-margin {\n    width: 1px;\n    background: #e8e8e8;\n}\n\n.ace-cloud9-day .ace_fold {\n    background-color: #6B72E6;\n}\n\n.ace-cloud9-day {\n    background-color: #FBFBFB;\n    color: black;\n}\n\n.ace-cloud9-day .ace_cursor {\n    color: black;\n}\n\n.ace-cloud9-day .ace_invisible {\n    color: rgb(191, 191, 191);\n}\n\n.ace-cloud9-day .ace_storage,\n.ace-cloud9-day .ace_keyword {\n    color: rgb(24, 122, 234);\n}\n\n.ace-cloud9-day .ace_constant {\n    color: rgb(197, 6, 11);\n}\n\n.ace-cloud9-day .ace_constant.ace_buildin {\n    color: rgb(88, 72, 246);\n}\n\n.ace-cloud9-day .ace_constant.ace_language {\n    color: rgb(88, 92, 246);\n}\n\n.ace-cloud9-day .ace_constant.ace_library {\n    color: rgb(6, 150, 14);\n}\n\n.ace-cloud9-day .ace_invalid {\n    background-color: rgba(255, 0, 0, 0.1);\n    color: red;\n}\n\n.ace-cloud9-day .ace_support.ace_function {\n    color: rgb(60, 76, 114);\n}\n\n.ace-cloud9-day .ace_support.ace_constant {\n    color: rgb(6, 150, 14);\n}\n\n.ace-cloud9-day .ace_support.ace_type,\n.ace-cloud9-day .ace_support.ace_class {\n    color: rgb(109, 121, 222);\n}\n\n.ace-cloud9-day .ace_keyword.ace_operator {\n    color: rgb(104, 118, 135);\n}\n\n.ace-cloud9-day .ace_string {\n    color: rgb(3, 106, 7);\n}\n\n.ace-cloud9-day .ace_comment {\n    color: rgb(76, 136, 107);\n}\n\n.ace-cloud9-day .ace_comment.ace_doc {\n    color: rgb(0, 102, 255);\n}\n\n.ace-cloud9-day .ace_comment.ace_doc.ace_tag {\n    color: rgb(128, 159, 191);\n}\n\n.ace-cloud9-day .ace_constant.ace_numeric {\n    color: rgb(0, 0, 205);\n}\n\n.ace-cloud9-day .ace_variable {\n    color: rgb(49, 132, 149);\n}\n\n.ace-cloud9-day .ace_xml-pe {\n    color: rgb(104, 104, 91);\n}\n\n.ace-cloud9-day .ace_entity.ace_name.ace_function {\n    color: #0000A2;\n}\n\n\n.ace-cloud9-day .ace_heading {\n    color: rgb(12, 7, 255);\n}\n\n.ace-cloud9-day .ace_list {\n    color: rgb(185, 6, 144);\n}\n\n.ace-cloud9-day .ace_meta.ace_tag {\n    color: rgb(0, 22, 142);\n}\n\n.ace-cloud9-day .ace_string.ace_regex {\n    color: rgb(255, 0, 0)\n}\n\n.ace-cloud9-day .ace_marker-layer .ace_selection {\n    background: rgb(181, 213, 255);\n}\n\n.ace-cloud9-day.ace_multiselect .ace_selection.ace_start {\n    box-shadow: 0 0 3px 0px white;\n}\n\n.ace-cloud9-day .ace_marker-layer .ace_step {\n    background: rgb(247, 237, 137);\n}\n\n.ace-cloud9-day .ace_marker-layer .ace_stack {\n    background: #BAE0A0;\n}\n\n.ace-cloud9-day .ace_marker-layer .ace_bracket {\n    margin: -1px 0 0 -1px;\n    border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-cloud9-day .ace_marker-layer .ace_active-line {\n    background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-cloud9-day .ace_gutter-active-line {\n    background-color: #E5E5E5;\n}\n\n.ace-cloud9-day .ace_marker-layer .ace_selected-word {\n    background: rgb(250, 250, 255);\n    border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-cloud9-day .ace_indent-guide {\n    background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n}\n\n.ace-cloud9-day .ace_indent-guide-active {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;\n} \n'}),ace.define("ace/theme/cloud9_day",["require","exports","module","ace/theme/cloud9_day-css","ace/lib/dom"],function(e,a,t){"use strict";a.isDark=!1,a.cssClass="ace-cloud9-day",a.cssText=e("./cloud9_day-css"),e("../lib/dom").importCssString(a.cssText,a.cssClass)}),ace.require(["ace/theme/cloud9_day"],function(e){a&&(a.exports=e)})},67182,(e,a,t)=>{ace.define("ace/theme/cloud9_night-css",["require","exports","module"],function(e,a,t){t.exports=".ace-cloud9-night .ace_gutter {\n    background: #303130;\n    color: #eee\n}\n\n.ace-cloud9-night .ace_print-margin {\n    width: 1px;\n    background: #222\n}\n\n.ace-cloud9-night {\n    background-color: #181818;\n    color: #EBEBEB\n}\n\n.ace-cloud9-night .ace_cursor {\n    color: #9F9F9F\n}\n\n.ace-cloud9-night .ace_marker-layer .ace_selection {\n    background: #424242\n}\n\n.ace-cloud9-night.ace_multiselect .ace_selection.ace_start {\n    box-shadow: 0 0 3px 0px #000000;\n    border-radius: 2px\n}\n\n.ace-cloud9-night .ace_marker-layer .ace_step {\n    background: rgb(102, 82, 0)\n}\n\n.ace-cloud9-night .ace_marker-layer .ace_bracket {\n    margin: -1px 0 0 -1px;\n    border: 1px solid #888888\n}\n\n.ace-cloud9-night .ace_marker-layer .ace_highlight {\n    border: 1px solid rgb(110, 119, 0);\n    border-bottom: 0;\n    box-shadow: inset 0 -1px rgb(110, 119, 0);\n    margin: -1px 0 0 -1px;\n    background: rgba(255, 235, 0, 0.1);\n}\n\n.ace-cloud9-night .ace_marker-layer .ace_active-line {\n    background: #292929\n}\n\n.ace-cloud9-night .ace_gutter-active-line {\n    background-color: #3D3D3D\n}\n\n.ace-cloud9-night .ace_stack {\n    background-color: rgb(66, 90, 44)\n}\n\n.ace-cloud9-night .ace_marker-layer .ace_selected-word {\n    border: 1px solid #888888\n}\n\n.ace-cloud9-night .ace_invisible {\n    color: #343434\n}\n\n.ace-cloud9-night .ace_keyword,\n.ace-cloud9-night .ace_meta,\n.ace-cloud9-night .ace_storage,\n.ace-cloud9-night .ace_storage.ace_type,\n.ace-cloud9-night .ace_support.ace_type {\n    color: #C397D8\n}\n\n.ace-cloud9-night .ace_keyword.ace_operator {\n    color: #70C0B1\n}\n\n.ace-cloud9-night .ace_constant.ace_character,\n.ace-cloud9-night .ace_constant.ace_language,\n.ace-cloud9-night .ace_constant.ace_numeric,\n.ace-cloud9-night .ace_keyword.ace_other.ace_unit,\n.ace-cloud9-night .ace_support.ace_constant,\n.ace-cloud9-night .ace_variable.ace_parameter {\n    color: #E78C45\n}\n\n.ace-cloud9-night .ace_constant.ace_other {\n    color: #EEEEEE\n}\n\n.ace-cloud9-night .ace_invalid {\n    color: #CED2CF;\n    background-color: #DF5F5F\n}\n\n.ace-cloud9-night .ace_invalid.ace_deprecated {\n    color: #CED2CF;\n    background-color: #B798BF\n}\n\n.ace-cloud9-night .ace_fold {\n    background-color: #7AA6DA;\n    border-color: #DEDEDE\n}\n\n.ace-cloud9-night .ace_entity.ace_name.ace_function,\n.ace-cloud9-night .ace_support.ace_function,\n.ace-cloud9-night .ace_variable:not(.ace_parameter),\n.ace-cloud9-night .ace_constant:not(.ace_numeric) {\n    color: #7AA6DA\n}\n\n.ace-cloud9-night .ace_support.ace_class,\n.ace-cloud9-night .ace_support.ace_type {\n    color: #E7C547\n}\n\n.ace-cloud9-night .ace_heading,\n.ace-cloud9-night .ace_markup.ace_heading,\n.ace-cloud9-night .ace_string {\n    color: #B9CA4A\n}\n\n.ace-cloud9-night .ace_entity.ace_name.ace_tag,\n.ace-cloud9-night .ace_entity.ace_other.ace_attribute-name,\n.ace-cloud9-night .ace_meta.ace_tag,\n.ace-cloud9-night .ace_string.ace_regexp,\n.ace-cloud9-night .ace_variable {\n    color: #D54E53\n}\n\n.ace-cloud9-night .ace_comment {\n    color: #969896\n}\n\n.ace-cloud9-night .ace_c9searchresults.ace_keyword {\n    color: #C2C280;\n}\n\n.ace-cloud9-night .ace_indent-guide {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYFBXV/8PAAJoAXX4kT2EAAAAAElFTkSuQmCC) right repeat-y\n}\n\n.ace-cloud9-night .ace_indent-guide-active {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;\n}\n"}),ace.define("ace/theme/cloud9_night",["require","exports","module","ace/theme/cloud9_night-css","ace/lib/dom"],function(e,a,t){a.isDark=!0,a.cssClass="ace-cloud9-night",a.cssText=e("./cloud9_night-css"),e("../lib/dom").importCssString(a.cssText,a.cssClass)}),ace.require(["ace/theme/cloud9_night"],function(e){a&&(a.exports=e)})},931067,e=>{"use strict";function a(){return(a=Object.assign.bind()).apply(null,arguments)}e.s(["default",()=>a])},915874,e=>{"use strict";function a(e,a){if(null==e)return{};var t={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==a.indexOf(n))continue;t[n]=e[n]}return t}e.s(["default",()=>a])},484023,e=>{"use strict";let a=(0,e.i(475254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["default",()=>a])},440160,e=>{"use strict";var a=e.i(484023);e.s(["Download",()=>a.default])},565489,e=>{"use strict";var a=e.i(247167),t=e.i(52563),n=e.i(619273),r=e.i(954616),o=e.i(266027),i=e.i(912598),c=e.i(3903),s=e.i(604570),l=e.i(846696),d=e.i(367944),u=e.i(394073),g=e.i(647631),m=e.i(647163),p=e.i(889435);let h=(e,a)=>e&&a?["team/group/files",e,a]:e?["team/files",e]:["files"];e.s(["useDeleteFile",0,({teamId:e}={teamId:void 0})=>{let a=(0,i.useQueryClient)(),{getAccessTokenSilently:n}=(0,t.useAuth0)(),o=e?["team/files",e]:["files"];return(0,r.useMutation)({mutationKey:e?["files/delete",e]:["files/delete"],mutationFn:async({filepath:a,fileId:t})=>{let r=await n();if(e)return(0,p.deleteTeamFile)({accessToken:r,teamId:e,fileId:t});if(!a.includes("/"))return(0,p.deleteHubFile)({filename:a,accessToken:r});{let e=a.split("/").pop(),t=a.substring(0,a.lastIndexOf("/"));return(0,p.deleteHubFile)({filename:e,filepath:t,accessToken:r})}},onMutate:async({filepath:e})=>{await a.cancelQueries({queryKey:o}),a.setQueryData(o,a=>a.map(a=>a.name===e?{...a,isDeleting:!0}:a))},onSuccess:(e,{filepath:t})=>{a.setQueryData(o,e=>Array.isArray(e)?e.filter(e=>e.path!==t):[]),l.toast.success("File deleted successfully")},onError:({error:e},{filepath:t},n)=>{a.setQueryData(o,e=>e.map(e=>e.path===t?{...e,isDeleting:!1}:e)),e&&l.toast.error(e)}})},"useDownloadFileMutation",0,()=>{let{getAccessTokenSilently:e}=(0,t.useAuth0)();return(0,r.useMutation)({mutationFn:async({filename:a})=>{let t=await e();return(0,p.downloadFile)({filename:a,accessToken:t})}})},"useFiles",0,({teamId:e,groupId:a,enabled:r}={teamId:void 0,groupId:void 0,enabled:!0})=>{let{getAccessTokenSilently:i}=(0,t.useAuth0)();return(0,o.useQuery)({queryKey:h(e,a),queryFn:async()=>{let t=await i();return e&&a?(0,p.getTeamGroupFiles)({accessToken:t,teamId:e,groupId:a}):e?(0,p.getTeamFiles)({accessToken:t,teamId:e}):(0,p.getFiles)({accessToken:t})},retry:!1,refetchOnWindowFocus:!1,placeholderData:n.keepPreviousData,enabled:r})},"useTransferFile",0,()=>{let e=(0,i.useQueryClient)(),{getAccessTokenSilently:a}=(0,t.useAuth0)();return(0,r.useMutation)({mutationFn:async({to:t,from:n,filepath:r,fileId:o,teamId:i})=>{let c=await a(),s=new URLSearchParams({to:t,from:n}).toString(),l=await (0,m.customFetch)(`${u.BASE_API}/teams/${i}/files/transfer?${s}`,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({filepath:r,file_id:o})});if(!l.ok)throw await l.json();return await e.refetchQueries({queryKey:["files"]}),await e.refetchQueries({queryKey:["team/files",i]}),await l.json()}})},"useUploadFileFromUrl",0,()=>{let e=(0,i.useQueryClient)(),{getAccessTokenSilently:a}=(0,t.useAuth0)(),n=async(e,t=!1)=>{let n=await a(),r=await (0,m.customFetch)(`${u.BASE_API}/files/retrieve_from_url`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({user_data_source:e,withpreview:t})});return await r.json()};return(0,r.useMutation)({mutationFn:e=>n(e),onSettled:async()=>{await e.refetchQueries({queryKey:["files"]})}})},"useUploadFiles",0,({teamId:e,groupId:n}={teamId:void 0,groupId:void 0})=>{let o=(0,i.useQueryClient)(),{getAccessTokenSilently:l,user:m}=(0,t.useAuth0)(),{setDataframeProps:f,activeConversationId:y}=(0,d.useChatContext)(),{setUserOnboarding:b}=(0,g.useUserOnboarding)(),A=h(e,n),_=(e,a,t)=>{o.setQueryData(A,n=>Array.isArray(n)?n.map(n=>n.name===e?{...n,name:e,percentComplete:a,isUploading:!0,...void 0!==t&&{size:t}}:n):n)},w=(e,a,t)=>{o.setQueryData(A,n=>Array.isArray(n)?n.map(n=>n.name===e?{...n,name:a,isUploading:!1,...void 0!==t?{size:t}:{}}:n):n)},x=async({file:a,filename:t,onProgress:n=()=>{},onComplete:r=()=>{}})=>{let o=await l(),{signed_url:i}=await (0,p.getSignedTeamFileUploadUrl)({accessToken:o,filepath:t,teamId:e,mimeType:a.type});if(!i)throw Error("Failed to get signed URL");await (0,p.uploadToSignedUrl)({signedUrl:i,file:a,filename:t,onProgress:(e,a,t)=>{n(e,a,t),_(e,a,t)},contentType:a.type||"application/octet-stream"}),await (0,p.upsertTeamFileMetadata)({accessToken:o,teamId:e,filepath:t}),r(t,t,a.size),w(t,t,a.size)},v=async({file:t,filename:n,onProgress:r=()=>{},onComplete:o=()=>{},pastedText:i,originatingFunction:d,preprocess:g})=>{let h="";m&&(h=await l());let A=(e,i=!1)=>new Promise((c,s)=>{let l=new XMLHttpRequest;if(l.open("POST",`${u.BASE_API}/files/${e}`,!0),l.setRequestHeader("Authorization",`Bearer ${h}`),l.setRequestHeader("Function",d),l.setRequestHeader("Renamable","true"),l.setRequestHeader("Preview-On-Attach","true"),l.setRequestHeader("Is-Demo",localStorage.getItem("tempUserId")||""),l.setRequestHeader("Is-Native",a.default.env.NEXT_PUBLIC_NATIVE||"false"),l.setRequestHeader("Expected-Name",unescape(encodeURIComponent(n))),"/ai-math"===window.location.pathname&&l.setRequestHeader("X-Frontend-Route","/ai-math"),i&&l.setRequestHeader("Content-Type","application/json"),l.upload.onprogress=e=>{if(e.lengthComputable){let a=Math.round(100*e.loaded/e.total);r(n,a,t.size),_(n,a,t.size)}},l.onload=()=>{if(l.status>=200&&l.status<300){let e=JSON.parse(l.responseText);e?.dataframeProps&&!e?.dataframeProps?.error&&f({filename:e.filename,sheets:e?.dataframeProps?.sheets}),o(n,e.filename,t.size),w(n,e.filename,t.size),c(e)}else i?s(Error("Upload Error: "+l.status)):A("upload_json",!0).then(c).catch(s)},l.onerror=e=>{if(i){let a=e instanceof Error?e.message:String(e);s(Error(`Upload Error: ${a}`))}else A("upload_json",!0).then(c).catch(s)},i){let e=new FileReader;e.onload=()=>{let a={file:btoa(e.result),filename:unescape(encodeURIComponent(n))};l.send(JSON.stringify(a))},e.readAsBinaryString(t)}else{let e=new FormData;e.append("file",t,unescape(encodeURIComponent(n))),l.send(e)}});try{let a,l=n;if(e);else{let e=null;if(r(n,0,0),!(e=await (0,p.getSignedFileUploadUrl)({accessToken:h,filename:n,fileType:t.type,pastedText:i}).catch(e=>{r(n,-1,-1)})))throw Error("Failed to provision sandbox for file upload");a=e?.signedUrl,l=e?.filename}try{let e=(await (0,c.getCookies)()).onboarding_status;"true"===e&&(b("upload_file"),s.default.capture("onboarding_tracker:upload_file"))}catch(e){console.error("Error setting onboarding status:",e)}if(!a)throw r(n,-1,-1),Error("Failed to get signed URL");n!==l&&r(n,-1,-1),await (0,p.uploadToSignedUrl)({signedUrl:a,file:t,filename:l,onProgress:(e,a,t)=>{r(e,a,t),_(e,a,t)},contentType:t.type});let d=await (0,p.transferFile)(l,g,y,h);if(o(n,d.filename,t.size),w(n,d.filename,t.size),d.success){if(d?.dataframeProps&&!d?.dataframeProps?.error){let e;(e=d?.filename.split(".").pop().toLowerCase(),["csv"].includes(e))?f({filename:d?.filename,columns:d?.dataframeProps?.columns,data:d?.dataframeProps?.data}):f({filename:d?.filename,sheets:d?.dataframeProps?.sheets})}return d}throw Error("Failed to transfer file")}catch(e){return console.error("Error uploading file:",e),A("upload_multipart")}},E=async({file:e,filename:a,onProgress:t=()=>{},onComplete:n=()=>{},teamId:r,groupId:o})=>{let i=await l(),{signed_url:c}=await (0,p.getSignedTeamGroupFileUploadUrl)({accessToken:i,filepath:a,teamId:r,groupId:o,mimeType:e.type});if(!c)throw Error("Failed to get signed URL");await (0,p.uploadToSignedUrl)({signedUrl:c,file:e,filename:a,onProgress:(e,a,n)=>{t(e,a,n),_(e,a,n)},contentType:e.type||"application/octet-stream"}),await (0,p.upsertTeamFileMetadata)({accessToken:i,teamId:r,filepath:a}),n(a,a,e.size),w(a,a,e.size)},k=async({files:a,preprocess:t=!0})=>Promise.all(a.map(({file:a,filename:r,onProgress:o,onComplete:i,pastedText:c,originatingFunction:s})=>e&&n?E({file:a,filename:r,onProgress:o,onComplete:i,preprocess:t,teamId:e,groupId:n}):e?x({file:a,filename:r,onProgress:o,onComplete:i,preprocess:t,teamId:e}):v({file:a,filename:r,onProgress:o,onComplete:i,pastedText:c,originatingFunction:s,preprocess:t,teamId:e})));return(0,r.useMutation)({mutationKey:["uploadFiles"],mutationFn:k,onMutate:async({files:e,cleanStart:a})=>{await o.cancelQueries({queryKey:A});let t=o.getQueryData(A);return a&&o.setQueryData(A,[]),o.setQueryData(A,a=>{let t=e.map(({filename:e,file:a})=>({created:new Date().toLocaleString(),size:a?.size||0,name:e,isUploading:!0}));if(Array.isArray(a)){let e=new Map(a.map(e=>[e.name,e]));return t.forEach(a=>{e.set(a.name,a)}),Array.from(e.values())}return t}),{previousFiles:t}},onError:(e,a,t)=>{o.setQueryData(A,t.previousFiles)}})}])},926209,e=>{"use strict";var a=e.i(271645),t=e.i(981140),n=e.i(30030),r=e.i(842727),o=e.i(296626);e.i(174080);var i=e.i(991918),c=e.i(843476),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let n=(0,i.createSlot)(`Primitive.${t}`),r=a.forwardRef((e,a)=>{let{asChild:r,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,c.jsx)(r?n:t,{...o,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),l=e.i(586318),d=e.i(369340),u=e.i(610772),g="Tabs",[m,p]=(0,n.createContextScope)(g,[r.createRovingFocusGroupScope]),h=(0,r.createRovingFocusGroupScope)(),[f,y]=m(g),b=a.forwardRef((e,a)=>{let{__scopeTabs:t,value:n,onValueChange:r,defaultValue:o,orientation:i="horizontal",dir:m,activationMode:p="automatic",...h}=e,y=(0,l.useDirection)(m),[b,A]=(0,d.useControllableState)({prop:n,onChange:r,defaultProp:o??"",caller:g});return(0,c.jsx)(f,{scope:t,baseId:(0,u.useId)(),value:b,onValueChange:A,orientation:i,dir:y,activationMode:p,children:(0,c.jsx)(s.div,{dir:y,"data-orientation":i,...h,ref:a})})});b.displayName=g;var A="TabsList",_=a.forwardRef((e,a)=>{let{__scopeTabs:t,loop:n=!0,...o}=e,i=y(A,t),l=h(t);return(0,c.jsx)(r.Root,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:(0,c.jsx)(s.div,{role:"tablist","aria-orientation":i.orientation,...o,ref:a})})});_.displayName=A;var w="TabsTrigger",x=a.forwardRef((e,a)=>{let{__scopeTabs:n,value:o,disabled:i=!1,...l}=e,d=y(w,n),u=h(n),g=k(d.baseId,o),m=C(d.baseId,o),p=o===d.value;return(0,c.jsx)(r.Item,{asChild:!0,...u,focusable:!i,active:p,children:(0,c.jsx)(s.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:g,...l,ref:a,onMouseDown:(0,t.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(o)}),onKeyDown:(0,t.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(o)}),onFocus:(0,t.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;p||i||!e||d.onValueChange(o)})})})});x.displayName=w;var v="TabsContent",E=a.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,forceMount:i,children:l,...d}=e,u=y(v,n),g=k(u.baseId,r),m=C(u.baseId,r),p=r===u.value,h=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,c.jsx)(o.Presence,{present:i||p,children:({present:a})=>(0,c.jsx)(s.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":g,hidden:!a,id:m,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&l})})});function k(e,a){return`${e}-trigger-${a}`}function C(e,a){return`${e}-content-${a}`}E.displayName=v,e.s(["Content",()=>E,"List",()=>_,"Root",()=>b,"Tabs",()=>b,"TabsContent",()=>E,"TabsList",()=>_,"TabsTrigger",()=>x,"Trigger",()=>x,"createTabsScope",()=>p],926209)},127341,e=>{"use strict";var a=e.i(843476),t=e.i(271645),n=e.i(926209),n=n,r=e.i(647163);let o=n.Root,i=t.forwardRef(({className:e,...t},o)=>(0,a.jsx)(n.List,{ref:o,className:(0,r.cn)("bg-message border border-border rounded-lg p-1 inline-flex items-center justify-center text-muted-foreground gap-1",e),...t}));i.displayName=n.List.displayName;let c=t.forwardRef(({className:e,...t},o)=>(0,a.jsx)(n.Trigger,{ref:o,className:(0,r.cn)("inline-flex w-full items-center justify-center whitespace-nowrap rounded-[calc(var(--radius)-4px)] py-1 px-3 text-sm font-regular ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground hover:bg-sidesecondary data-[state=active]:bg-background data-[state=active]:shadow-sm",e),...t}));c.displayName=n.Trigger.displayName;let s=t.forwardRef(({className:e,...t},o)=>(0,a.jsx)(n.Content,{ref:o,className:(0,r.cn)("ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));s.displayName=n.Content.displayName,e.s(["Tabs",()=>o,"TabsContent",()=>s,"TabsList",()=>i,"TabsTrigger",()=>c],127341)},373765,e=>{"use strict";let a=(0,e.i(475254).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>a])},116019,e=>{"use strict";var a=e.i(373765);e.s(["Trash",()=>a.default])}]);

//# debugId=9ea78379-cec7-aa50-3469-690b145e2101
//# sourceMappingURL=5e9b10558b702f5f.js.map