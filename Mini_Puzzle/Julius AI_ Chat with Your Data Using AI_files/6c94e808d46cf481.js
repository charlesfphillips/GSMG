;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="6066e19d-5012-573d-a69c-c3accea621c3")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,472856,(e,t,a)=>{e.e,t.exports=function(e,t,a){e=e||{};var n=t.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,a,s){return n.fromToBase(e,t,a,s)}a.en.relativeTime=s,n.fromToBase=function(t,n,i,r,o){for(var l,c,d,u=i.$locale().relativeTime||s,m=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=m.length,h=0;h<f;h+=1){var p=m[h];p.d&&(l=r?a(t).diff(i,p.d,!0):i.diff(t,p.d,!0));var g=(e.rounding||Math.round)(Math.abs(l));if(d=l>0,g<=p.r||!p.r){g<=1&&h>0&&(p=m[h-1]);var x=u[p.l];o&&(g=o(""+g)),c="string"==typeof x?x.replace("%d",g):x(g,n,p.l,d);break}}if(n)return c;var v=d?u.future:u.past;return"function"==typeof v?v(c):v.replace("%s",c)},n.to=function(e,t){return i(e,t,this,!0)},n.from=function(e,t){return i(e,t,this)};var r=function(e){return e.$u?a.utc():a()};n.toNow=function(e){return this.to(r(this),e)},n.fromNow=function(e){return this.from(r(this),e)}}},895751,(e,t,a)=>{e.e,t.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(n,s,i){var r=s.prototype;i.utc=function(e){var t={date:e,utc:!0,args:arguments};return new s(t)},r.utc=function(t){var a=i(this.toDate(),{locale:this.$L,utc:!0});return t?a.add(this.utcOffset(),e):a},r.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var o=r.parse;r.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var l=r.init;r.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=r.utcOffset;r.utcOffset=function(n,s){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var s=(""+n[0]).match(a)||["-",0,0],i=s[0],r=60*s[1]+ +s[2];return 0===r?0:"+"===i?r:-r}(n)))return this;var r=16>=Math.abs(n)?60*n:n;if(0===r)return this.utc(s);var o=this.clone();if(s)return o.$offset=r,o.$u=!1,o;var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(o=this.local().add(r+l,e)).$offset=r,o.$x.$localOffset=l,o};var d=r.format;r.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,t)},r.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var u=r.toDate;r.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var m=r.diff;r.diff=function(e,t,a){if(e&&this.$u===e.$u)return m.call(this,e,t,a);var n=this.local(),s=i(e).local();return m.call(n,s,t,a)}}}()},140020,e=>{"use strict";var t=e.i(843476),a=e.i(463415),n=e.i(647163);function s({title:e,className:s}){return(0,t.jsx)(a.DropdownMenuLabel,{className:(0,n.cn)("text-left font-normal text-2xs/tight text-muted-foreground px-3 pt-1.5 pb-0",s),children:e})}e.s(["default",()=>s])},963609,e=>{"use strict";var t=e.i(843476),a=e.i(555436),n=e.i(23750);function s({placeholder:e,value:s,setValue:i,icon:r,onIconClick:o}){return(0,t.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1.5 rounded-md bg-message h-7",children:[(0,t.jsx)("div",{className:"size-3 shrink-0 text-muted-foreground cursor-pointer",onClick:o,children:r||(0,t.jsx)(a.Search,{className:"size-3"})}),(0,t.jsx)(n.Input,{className:"flex flex-1 bg-transparent px-2 h-6 p-0 border-none focus-visible:ring-0 text-xs placeholder:text-muted-foreground tracking-[-0.015em]",type:"text",placeholder:e,value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{e.stopPropagation()},onKeyUp:e=>{e.stopPropagation()},autoFocus:!0})]})}e.s(["default",()=>s])},350375,e=>{"use strict";var t=e.i(843476),a=e.i(271645);let n=(0,e.i(770703).default)(()=>e.A(401823).then(()=>()=>null),{loadableGenerated:{modules:[69548]},ssr:!1});e.s(["default",0,({developerKey:e,oauthToken:s,clientId:i,appId:r,onPicked:o,onCanceled:l,onClose:c,mimeTypes:d,multiselect:u=!0,includeFolders:m=!0})=>{let f=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=f.current;if(!e)return;e.visible=!0;let t=e=>{o?.(e.detail),c?.()},a=()=>{l?.(),c?.()};return e.addEventListener("picker:picked",t),e.addEventListener("picker:canceled",a),()=>{e.removeEventListener("picker:picked",t),e.removeEventListener("picker:canceled",a)}},[s,o,l,c]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n,{}),(0,t.jsx)("drive-picker",{ref:f,"developer-key":e,"oauth-token":s,"client-id":i,"app-id":r,multiselect:u,"nav-hidden":!0,children:(0,t.jsx)("drive-picker-docs-view",{"include-folders":m?"true":"false",mode:"LIST",...d&&{"mime-types":d}})})]})}])},270755,e=>{"use strict";var t=e.i(843476),a=e.i(271645),n=e.i(664659),s=e.i(463059),i=e.i(352558),r=e.i(531278),o=e.i(767601),l=e.i(167881),c=e.i(630374);e.s(["default",0,({open:e,setOpen:d,accounts:u,onSelect:m,loading:f=!1})=>{let h,p,[g,x]=(0,a.useState)(null),[v,y]=(0,a.useState)(!0),[_,j]=(0,a.useState)(new Set),{data:w}=(0,o.useConnectedGoogleAdsAccounts)(),N=(0,a.useMemo)(()=>w?.accounts?.map(e=>(e=>{let t=e.connection_data;if(t){if("string"==typeof t)try{return JSON.parse(t).customer_id}catch{return}return t.customer_id}})(e))??[],[w]);return(0,t.jsx)(c.Dialog,{open:e,onOpenChange:d,children:(0,t.jsxs)(c.DialogContent,{children:[(0,t.jsxs)(c.DialogHeader,{children:[(0,t.jsx)(c.DialogTitle,{children:"Select a Google Ads account"}),(0,t.jsx)(c.DialogDescription,{children:"You must connect a Google Ads manager (MCC) account first before you can connect any of the client accounts it manages. Once an MCC is connected it will expand so you can pick one of its child accounts."})]}),(0,t.jsxs)("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto mt-4",children:[f&&(0,t.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,t.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),!f&&(!u||0===u.length)&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,t.jsx)(i.CircleOff,{className:"h-12 w-12 mb-4"}),(0,t.jsx)("p",{className:"text-center text-lg font-medium",children:"No Google Ads accounts found"}),(0,t.jsx)("p",{className:"text-center text-sm mt-1 max-w-sm",children:"We couldn't find any Google Ads accounts linked to your Google account. Please create or link a Google Ads account and then refresh this list."})]}),!f&&u&&u.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Connected manager accounts"}),(h=(u??[]).filter(e=>e.is_manager_account&&N.includes(e.customer_id)))&&0!==h.length?h.map(e=>{let a=e.child_accounts&&e.child_accounts.length>0,i=_.has(e.customer_id);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{var t;a&&(t=e.customer_id,j(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a}))},className:"w-full flex items-center space-x-2 rounded-md border p-2 hover:bg-accent text-left",children:[a?i?(0,t.jsx)(n.ChevronDown,{className:"h-4 w-4"}):(0,t.jsx)(s.ChevronRight,{className:"h-4 w-4"}):(0,t.jsx)("span",{className:"w-4"}),(0,t.jsxs)("span",{className:"flex-1",children:[e.descriptive_name||e.customer_id," ",(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"(connected)"})]})]}),a&&i&&(0,t.jsx)("div",{className:"pl-8 space-y-2 mt-1",children:e.child_accounts.map(e=>{let a=N.includes(e.customer_id);return(0,t.jsxs)("label",{className:`flex items-center space-x-2 rounded-md border p-2 ${a?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-accent"}`,children:[(0,t.jsx)("input",{type:"radio",name:"google-ads-account",className:"h-4 w-4",value:e.customer_id,checked:g===e.customer_id,onChange:()=>{x(e.customer_id),y(!1)},disabled:a}),(0,t.jsxs)("span",{children:[e.descriptive_name||e.customer_id," ",a&&(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"(connected)"})]})]},e.customer_id)})})]},e.customer_id)}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground py-2",children:"No connected manager accounts yet."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Advertiser accounts you can connect"}),0===(p=(u??[]).filter(e=>!N.includes(e.customer_id))).length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground py-2",children:"No additional advertiser accounts found."}):p.map(e=>(0,t.jsxs)("label",{className:"flex items-center space-x-2 rounded-md border p-2 cursor-pointer hover:bg-accent",children:[(0,t.jsx)("input",{type:"radio",name:"google-ads-account",className:"h-4 w-4",value:e.customer_id,checked:g===e.customer_id,onChange:()=>{x(e.customer_id),y(!0)}}),(0,t.jsx)("span",{children:e.descriptive_name||e.customer_id})]},e.customer_id))]})]})]}),(0,t.jsxs)(c.DialogFooter,{children:[(0,t.jsx)(c.DialogClose,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"secondary",children:"Cancel"})}),(0,t.jsx)(l.Button,{disabled:!g||f,onClick:()=>{let e=(e=>{if(e)for(let t of u){if(t.customer_id===e)return t;if(t.child_accounts){let a=t.child_accounts.find(t=>t.customer_id===e);if(a)return a}}})(g);e&&(m(e,v),d(!1))},children:"Connect"})]})]})})}])},327508,e=>{"use strict";e.i(247167);var t=e.i(843476),a=e.i(271645),n=e.i(52563),s=e.i(912598),i=e.i(822315),r=e.i(472856),o=e.i(895751),l=e.i(871689),c=e.i(463059),d=e.i(730896),u=e.i(875782),m=e.i(531278),f=e.i(82735),h=e.i(569074),p=e.i(657688),g=e.i(618566),x=e.i(604570),v=e.i(846696),y=e.i(565489),_=e.i(351908),j=e.i(767601),w=e.i(672883),N=e.i(948822),k=e.i(600634),b=e.i(167881),C=e.i(463415),D=e.i(728231),S=e.i(367944),T=e.i(394073),M=e.i(11573),O=e.i(620949),A=e.i(647163),L=e.i(270755),G=e.i(350375);let $=({msGraphAccessToken:e,sharepointHost:n,onPicked:s,onClose:i})=>{let r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let t=r.current;if(!t)return;let a=t.contentWindow;if(!a)return;let o="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2),l=null===n,c=`https://${n}-my.sharepoint.com`,d=l?"https://onedrive.live.com/picker":c,u=new URLSearchParams({filePicker:JSON.stringify({sdk:"8.0",entry:{oneDrive:{}},authentication:{},messaging:{origin:window.location.origin,channelId:o},selection:{mode:"multiple"},typesAndSources:{mode:"files",pivots:{oneDrive:!0,recent:!0,shared:!0}}}),locale:"en-us"}),m=l?`${d}?${u.toString()}`:`${d}/_layouts/15/FilePicker.aspx?${u.toString()}`;function f(t){if(!t.source||t.source!==a)return;let n=t.data;if(n?.type!=="initialize"||n.channelId!==o)return;let r=t.ports[0],l=async t=>{let a=t.data;switch(a?.type){case"notification":break;case"command":{r.postMessage({type:"acknowledge",id:t.data.id});let n=a.data;switch(n?.command){case"authenticate":r.postMessage({type:"result",id:t.data.id,data:{result:"token",token:e}});break;case"pick":r.postMessage({type:"result",id:t.data.id,data:{result:"success"}}),s?.(n);break;case"close":i?.();break;default:r.postMessage({type:"result",id:t.data.id,data:{result:"error",error:{code:"unsupportedCommand",message:n?.command??"unknown"}}})}}}};r.addEventListener("message",l),r.start(),r.postMessage({type:"activate"})}window.addEventListener("message",f);let h=a.document.createElement("form");h.setAttribute("action",m),h.setAttribute("method","POST"),a.document.body.appendChild(h);let p=a.document.createElement("input");return p.setAttribute("type","hidden"),p.setAttribute("name","access_token"),p.setAttribute("value",e),h.appendChild(p),h.submit(),()=>{window.removeEventListener("message",f)}},[e,n,s,i]),(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/40 backdrop-blur-sm",children:(0,t.jsx)("iframe",{ref:r,title:"OneDrive Picker",className:"w-[80vw] h-[80vh] rounded-md border bg-background",sandbox:"allow-same-origin allow-top-navigation allow-forms allow-scripts"})})};var E=e.i(819449),F=e.i(140020),U=e.i(963609);function P({className:e,chatType:r}){let[o,P]=(0,a.useState)(""),[I,R]=(0,a.useState)(!1),{teamId:Y,groupId:W}=(0,g.useParams)(),{data:z,isPending:H}=(0,y.useFiles)({groupId:W,teamId:Y,enabled:!0}),{isLoading:B}=(0,O.useUserSubscription)(),{handleAddAttachments:V,updateAttachmentUploadProgress:K,setAttachmentUploadingToDone:q,isFreeUser:J,freeAndHasAttachmentsOrSources:Q,toolPreferences:X,updateAttachmentUploadStatus:Z,handleRemoveAttachment:ee}=(0,S.useChatContext)(),et=(0,a.useRef)(null),ea=(0,y.useUploadFiles)(),{getAccessTokenSilently:en}=(0,n.useAuth0)(),es=(0,s.useQueryClient)(),[ei,er]=(0,a.useState)(!1),[eo,el]=(0,a.useState)([]),[ec,ed]=(0,a.useState)(!1),eu=(0,j.useConnectGoogleAdsAccount)(),[em,ef]=(0,a.useState)(!1),[eh,ep]=(0,a.useState)(null),[eg,ex]=(0,a.useState)(!1),[ev,ey]=(0,a.useState)(!1),[e_,ej]=(0,a.useState)(null),[ew,eN]=(0,a.useState)(null),ek=(0,a.useMemo)(()=>{let e=[];return z&&z.forEach(t=>{e.push({name:t.name,type:"file",lastModified:t.last_modified,originalData:t})}),e.sort((e,t)=>{let a=new Date(e.lastModified?e.lastModified:0);return new Date(t.lastModified?t.lastModified:0).getTime()-a.getTime()})},[z]),eb=(0,a.useMemo)(()=>{let e=o.toLowerCase().trim();return e?ek.filter(t=>t.name.toLowerCase().includes(e)):ek},[ek,o]),eC=(0,a.useMemo)(()=>ek.slice(0,o.trim()?10:3),[ek,o]),eD=async e=>{let t=e?.docs.map(e=>({id:e.id,name:e.name}));if(J&&t.some(e=>e.name.toLowerCase().endsWith(".png")||e.name.toLowerCase().endsWith(".jpg")||e.name.toLowerCase().endsWith(".heif")||e.name.toLowerCase().endsWith(".jpeg")))return void v.toast.warning("Upgrade to upload image files (PNG/JPG)");if(t?.length){"function"==typeof V&&V(t.map(e=>({name:e.name,isUploading:!0})));try{let e=await en(),a=await (0,_.transferGoogleDriveFilesToHub)(e,t);if(a?.transferred_files?.length){for(let e of a.transferred_files){let a=t.find(t=>t.id===e.id);a?Z({originalFilename:a.name,updatedFilename:e.clean_name&&e.clean_name!==a.name?e.clean_name:void 0,isUploading:!1}):"function"==typeof V&&V([{name:e.clean_name||e.name,isUploading:!1}])}es.invalidateQueries({queryKey:["files"]})}if(a?.errors?.length){for(let e of a.errors){let a=t.find(t=>t.id===e.file?.id);a&&ee(a.name)}v.toast.warning(`${a.errors.length} of ${t.length} files failed to import from Google Drive.`)}}catch(e){console.error(e),t.forEach(e=>{ee(e.name)}),v.toast.error(e?.message??"Failed to import files from Google Drive")}}},eS=async()=>{x.default.capture("google_drive_modal_opened"),ex(!0);try{let e=await en(),t=await (0,_.getGoogleDriveOauthToken)(e);if(!t){let t=await (0,_.getGoogleDriveAuthUrl)({accessToken:e});t?window.location.href=t:v.toast.info("Google account already connected. Try again in a moment."),ex(!1);return}if(!t?.scopes?.includes(w.GOOGLE_OAUTH_SCOPES.DRIVE_FILE)){v.toast.info("We need to enable Google Drive access. Redirecting you to Google...");try{let t=await (0,_.getGoogleDriveAuthUrl)({accessToken:e,scopes:[w.GOOGLE_OAUTH_SCOPES.DRIVE_FILE]});t?window.location.href=t:v.toast.info("Google Drive is already connected. Try again in a moment.")}catch(e){console.error(e),v.toast.error("Failed to initiate Google Drive authorisation")}return}let a=t.access_token;ep(a),ef(!0)}catch(e){console.error(e),v.toast.error(e?.message??"Failed to connect to Google Drive")}finally{ex(!1)}},eT=async e=>{ey(!1);let t=e.items.map(e=>({id:e.id,name:e.name,driveId:"sharepoint"===ew?e.parentReference?.driveId:void 0}));if(t?.length){if(J&&t.some(e=>e.name.toLowerCase().endsWith(".png")||e.name.toLowerCase().endsWith(".jpg")||e.name.toLowerCase().endsWith(".jpeg")||e.name.toLowerCase().endsWith(".heif")))return void v.toast.warning("Upgrade to upload image files (PNG/JPG)");"function"==typeof V&&V(t.map(e=>({name:e.name,isUploading:!0})));try{let e=await en(),a=await Promise.all(t.map(async t=>{try{let a=await (0,N.transferMicrosoftFileToHub)(e,t,ew);return{success:!0,original:t,result:a}}catch(e){return{success:!1,original:t,error:e}}})),n=a.filter(e=>!e.success);a.forEach(e=>{if(e.success){let t=e.result.transferred_file;Z({originalFilename:e.original.name,updatedFilename:t?.clean_name&&t.clean_name!==e.original.name?t.clean_name:void 0,isUploading:!1})}else ee(e.original.name)}),a.some(e=>e.success)&&es.invalidateQueries({queryKey:["files"]}),n.length&&v.toast.warning(`${n.length} of ${t.length} files failed to import from OneDrive.`)}catch(e){console.error(e),t.forEach(e=>{ee(e.name)}),v.toast.error(e?.message??"Failed to import files from OneDrive")}}},eM=async(e,t="primary")=>{x.default.capture(`${e}_microsoft_modal_opened`,{subtype:t}),ex(!0);try{let t=await en(),a=await (0,N.getMicrosoftOauthToken)(t,e);if(!a){let a=await (0,N.getMicrosoftAuthUrl)({accessToken:t,type:e});a?window.location.href=a:v.toast.info("OneDrive account already connected. Try again in a moment.");return}if(!("onedrive"===e?a?.scopes?.includes("onedrive.readonly"):a?.scopes?.includes("Files.ReadWrite.All"))){v.toast.info("We need to enable OneDrive access. Redirecting you to Microsoft...");try{let a=await (0,N.getMicrosoftAuthUrl)({accessToken:t,type:e});a?window.location.href=a:v.toast.info("OneDrive account already connected. Try again in a moment.")}catch(e){console.error(e),v.toast.error("Failed to initiate OneDrive authorisation")}}let n=a;if("sharepoint"===e)try{let e=await (0,N.getMicrosoftSharePointResourceToken)(t);n={...a,access_token:e.access_token}}catch(e){console.error("Failed to fetch SharePoint resource token",e),v.toast.error("Failed to fetch SharePoint permissions");return}eO(n)}catch(e){console.error(e),v.toast.error(e?.message??"Failed to connect to OneDrive")}finally{ex(!1)}eN(e)},eO=e=>{ej(e),ey(!0)},eA=e=>{var a;let n=e.originalData,s=(0,k.getIcon)(n.name),r=(0,k.getIconColor)(n.name),o=e.name.length>30,l=(0,t.jsxs)(t.Fragment,{children:[s?(0,t.jsx)(s,{className:(0,A.cn)("size-3 flex-shrink-0",`text-${r}`)}):(0,t.jsx)(d.FileIcon,{className:(0,A.cn)("size-3 flex-shrink-0","text-primary")}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-1",children:[(0,t.jsx)("div",{className:"truncate text-foreground min-w-0 flex-1",children:e.name}),(0,t.jsx)("span",{className:"text-2xs/tight text-muted-foreground flex-shrink-0",children:(a=e.lastModified)?i.default.utc(a).locale("short").fromNow():""})]})]});return(0,t.jsx)(E.default,{onSelect:()=>{V(n)},children:o?(0,t.jsxs)(D.Tooltip,{children:[(0,t.jsx)(D.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"flex min-w-0 flex-1 items-center gap-2 w-full",children:l})}),(0,t.jsx)(D.TooltipContent,{side:"right",className:"max-w-xs",children:e.name})]}):l},n.name)},eL=Q||!!X?.disable_all||B,eG=Q||!!X?.disable_all,e$=(0,t.jsx)("div",{"data-state":"closed",onClick:()=>{Q&&(v.toast.warning((0,t.jsxs)("div",{className:"break-words",children:[(0,t.jsx)("a",{className:"underline text-primary",href:"/settings",target:"_blank",rel:"noopener noreferrer",onClick:e=>{x.default.capture("upgrade_button_clicked",{location:"multiple_files_toast"}),e.stopPropagation()},children:"Upgrade"})," ","to use multiple files in a chat"]})),x.default.capture("upgrade_cta_shown",{type:"toast",name:"multiple_files"}),"function"==typeof window.gtag&&(window.gtag("event","multiple_files_upgrade_cta_shown"),(0,M.trackLinkedInConversion)(M.UPGRADE_MODAL_SHOWN)))},style:{display:"inline-block",height:"24px"},children:(0,t.jsx)(C.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(b.Button,{"data-intercom-target":"chat-file-upload-button","data-event":"chat_input_new_file","data-cy":"chat-file-upload-button",variant:"ghost",size:"icon",className:`rounded-md w-6 h-6 shrink-0 hover:shadow-none group ${"search"===r?"hidden":""}`,type:"button",disabled:eL,children:(0,t.jsx)(f.Paperclip,{className:"w-4 h-4 text-foreground"})})})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(C.DropdownMenu,{modal:!1,onOpenChange:e=>{e&&x.default.capture("chat:file-dropdown:opened")},children:[eG?(0,t.jsxs)(D.Tooltip,{onOpenChange:e=>{e&&Q&&(x.default.capture("upgrade_cta_shown",{type:"tooltip",name:"multiple_files"}),"function"==typeof window.gtag&&(window.gtag("event","multiple_files_upgrade_cta_shown"),(0,M.trackLinkedInConversion)(M.UPGRADE_MODAL_SHOWN)))},children:[(0,t.jsx)(D.TooltipTrigger,{asChild:!0,children:e$}),Q?(0,t.jsx)(D.TooltipContent,{children:(0,t.jsxs)("div",{className:"break-words",children:[(0,t.jsx)("a",{className:"underline text-primary",href:"/settings",target:"_blank",rel:"noopener noreferrer",onClick:e=>{x.default.capture("upgrade_button_clicked",{location:"multiple_files_tooltip"}),e.stopPropagation()},children:"Upgrade"})," ","to use multiple files in a chat"]})}):(0,t.jsx)(D.TooltipContent,{children:"Disable Model Chat under tools to use attachments"})]}):(0,t.jsxs)(D.Tooltip,{children:[(0,t.jsx)(D.TooltipTrigger,{asChild:!0,children:e$}),(0,t.jsx)(D.TooltipContent,{children:"Add files"})]}),(0,t.jsxs)(C.DropdownMenuContent,{side:"bottom",align:"start",className:(0,A.cn)("p-0 pb-1 mr-6 ml-0 w-full",e),children:[(0,t.jsx)("div",{className:"z-40 bg-background px-1 pt-1",children:(0,t.jsx)(U.default,{placeholder:"Search files...",value:o,setValue:P,icon:I||o.trim()?(0,t.jsx)(l.ArrowLeft,{className:"size-3"}):void 0,onIconClick:I||o.trim()?()=>{R(!1),P("")}:void 0})}),I?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"max-h-[221px] px-1 subtle-scroll overflow-y-auto",children:eb.length>0?eb.map(eA):(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:o?"No files found":"No files available"})})})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"max-h-[221px] px-1 subtle-scroll overflow-y-auto",children:[" ",!o.trim()&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"px-1 pt-1",children:[(0,t.jsxs)(E.default,{onSelect:()=>{et.current?.click()},children:[(0,t.jsx)(h.Upload,{className:"size-3 flex-shrink-0"}),(0,t.jsx)("div",{className:"text-xs","data-cy":"chat-file-upload-file-button",children:"Upload File"})]}),(0,t.jsxs)(E.default,{onSelect:e=>{e.preventDefault(),R(!0)},children:[(0,t.jsx)(u.Files,{className:"size-3 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-xs flex flex-1 items-center",children:["Files"," ",(0,t.jsx)("span",{className:"text-2xs/tight text-muted-foreground ml-0.5",children:z?.length>0?`(${z?.length})`:""})]}),(0,t.jsx)(c.ChevronRight,{className:"size-3 shrink-0"})]}),(T.FEATURE_FLAGS.GOOGLE_DRIVE_INTEGRATION||T.FEATURE_FLAGS.ONEDRIVE_INTEGRATION)&&(0,t.jsxs)(t.Fragment,{children:[T.FEATURE_FLAGS.GOOGLE_DRIVE_INTEGRATION&&(0,t.jsxs)(E.default,{onSelect:eS,children:[(0,t.jsx)(p.default,{src:"/g_drive_logo.png",alt:"Google Drive",width:12,height:12,className:"flex-shrink-0"}),(0,t.jsx)("div",{className:"flex min-w-0 flex-1 items-center gap-1",children:(0,t.jsx)("div",{className:"truncate text-foreground min-w-0 flex-1",children:"Google Drive"})})]}),T.FEATURE_FLAGS.ONEDRIVE_INTEGRATION&&(0,t.jsxs)(E.default,{onSelect:()=>eM("onedrive"),children:[(0,t.jsx)(p.default,{src:"/onedrive_logo.svg",alt:"Personal OneDrive",width:12,height:12,className:"flex-shrink-0"}),(0,t.jsx)("div",{className:"flex min-w-0 flex-1 items-center gap-1",children:(0,t.jsx)("div",{className:"truncate text-foreground min-w-0 flex-1",children:"Personal OneDrive"})})]}),T.FEATURE_FLAGS.ONEDRIVE_INTEGRATION&&(0,t.jsxs)(E.default,{onSelect:()=>eM("sharepoint","secondary"),children:[(0,t.jsx)(p.default,{src:"/sharepoint-for-business.png",alt:"SharePoint",width:12,height:12,className:"flex-shrink-0"}),(0,t.jsx)("div",{className:"flex min-w-0 flex-1 items-center gap-1",children:(0,t.jsx)("div",{className:"truncate text-foreground min-w-0 flex-1",children:"SharePoint"})})]})]})]})}),H?(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsx)(m.Loader2,{className:"animate-spin size-6"})}):o.trim()?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.DropdownMenuSeparator,{className:"bg-border"}),eb.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.default,{title:"Files",className:"px-2"}),eb.map(eA)]}),0===eb.length&&(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"No files found"})})]}):eC.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.DropdownMenuSeparator,{className:"bg-border"}),!o.trim()&&(0,t.jsx)(F.default,{title:"Recent"})," ",(0,t.jsx)("div",{className:"px-1",children:eC.map(eA)})]}):null]})})]})]}),(0,t.jsx)("input",{"data-event":"chat_choose_file",type:"file",multiple:!0,id:"file",ref:et,style:{display:"none"},onChange:e=>{let a=Array.from(e.target.files);if(document.activeElement?.blur(),a.length>20){v.toast.warning("You can only upload up to 20 files at a time"),et.current&&(et.current.value="");return}if(J&&a.length>1){v.toast.warning((0,t.jsxs)("div",{className:"break-words",children:[(0,t.jsx)("a",{className:"underline text-primary",href:"/settings",target:"_blank",rel:"noopener noreferrer",onClick:e=>{x.default.capture("upgrade_button_clicked",{location:"multiple_files_toast"}),e.stopPropagation()},children:"Upgrade"})," ","to use multiple files in a chat"]})),x.default.capture("upgrade_cta_shown",{type:"toast",name:"multiple_files"}),"function"==typeof window.gtag&&(window.gtag("event","multiple_files_upgrade_cta_shown"),(0,M.trackLinkedInConversion)(M.UPGRADE_MODAL_SHOWN));return}if(J&&a.some(e=>"image/png"===e.type||"image/jpeg"===e.type||e.name.toLowerCase().endsWith(".png")||e.name.toLowerCase().endsWith(".jpg")||e.name.toLowerCase().endsWith(".jpeg"))){v.toast.warning((0,t.jsxs)("div",{className:"break-words",children:[(0,t.jsx)("a",{className:"underline text-primary",href:"/settings",target:"_blank",rel:"noopener noreferrer",onClick:e=>{x.default.capture("upgrade_button_clicked",{location:"image_file_toast"}),e.stopPropagation()},children:"Upgrade"})," ","to upload image files (PNG/JPG)"]})),x.default.capture("upgrade_cta_shown",{type:"toast",name:"image_file_upload"}),"function"==typeof window.gtag&&(window.gtag("event","image_file_upload_upgrade_cta_shown"),(0,M.trackLinkedInConversion)(M.UPGRADE_MODAL_SHOWN)),et.current&&(et.current.value="");return}let n=a.map(e=>({file:e,filename:e.name,onProgress:K,onComplete:q,method:"JSON",originatingFunction:"search-dropdown"}));x.default.capture("chat:file-dropdown:new-file:selected"),ea.mutateAsync({files:n}).then(()=>{et.current&&(et.current.value="")}).catch(e=>{console.error(e)})}}),(0,t.jsx)(L.default,{open:ei,setOpen:er,accounts:eo,onSelect:e=>{v.toast.promise(eu.mutateAsync({customer_id:e.customer_id,descriptive_name:e.descriptive_name}),{loading:"Connecting Google Ads account...",success:`Connected Google Ads account: ${e.descriptive_name||e.customer_id}`,error:"Failed to connect Google Ads account"}),x.default.capture("google_ads_account_selected",{cid:e.customer_id})},loading:ec}),em&&(0,t.jsx)(G.default,{developerKey:"AIzaSyC3uq-iXRX2i-qIqcQfSBPkXNUZRdQNGO8",oauthToken:eh,clientId:"437778814546-al32suqr999riv4ti61ht11ofgmu30ui.apps.googleusercontent.com",appId:"437778814546",onClose:()=>ef(!1),onPicked:eD,onCanceled:()=>ef(!1)}),eg&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/40 backdrop-blur-sm",children:(0,t.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),ev&&e_?.access_token&&(0,t.jsx)($,{msGraphAccessToken:e_?.access_token,sharepointHost:e_?.sharepoint_host,onPicked:eT,onClose:()=>ey(!1)})]})}i.default.extend(o.default),i.default.extend(r.default),i.default.locale({name:"short",relativeTime:{future:"in %s",past:"%s",s:"now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"},formats:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"}},null,!0),e.s(["default",()=>P],327508)},336797,e=>{e.n(e.i(327508))},401823,e=>{e.v(t=>Promise.all(["static/chunks/b122b1f2787050f4.js"].map(t=>e.l(t))).then(()=>t(69548)))}]);

//# debugId=6066e19d-5012-573d-a69c-c3accea621c3
//# sourceMappingURL=fea229b854b577fc.js.map