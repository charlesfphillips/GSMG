;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b1c88eb2-ceaa-fb5c-fbb0-267d6ebaf922")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,316408,e=>{"use strict";var t,i=e.i(843476),o=e.i(271645),r=e.i(618566),s=e.i(604570),n=e.i(846696),a=e.i(264082),l=e.i(367944),d=e.i(915492),c=e.i(647163);e.s([],113400),e.i(113400);var u=e.i(911899),p=e.i(978605);let[h,f]=(0,e.i(532592).createContext)({name:"PopoverContext",hookName:"usePopoverContext",providerName:"<PopoverProvider />"}),g=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,u.mergeProps)(o.getAnchorProps(),e);return(0,i.jsx)(p.ark.div,{...r,ref:t})});g.displayName="PopoverAnchor";let m=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,u.mergeProps)(o.getArrowProps(),e);return(0,i.jsx)(p.ark.div,{...r,ref:t})});m.displayName="PopoverArrow";let v=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,u.mergeProps)(o.getArrowTipProps(),e);return(0,i.jsx)(p.ark.div,{...r,ref:t})});v.displayName="PopoverArrowTip";let b=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,u.mergeProps)(o.getCloseTriggerProps(),e);return(0,i.jsx)(p.ark.button,{...r,ref:t})});b.displayName="PopoverCloseTrigger";var y=e.i(216417),w=e.i(664747);let P=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,w.usePresenceContext)(),s=(0,u.mergeProps)(o.getContentProps(),r.getPresenceProps(),e);return r.unmounted?null:(0,i.jsx)(p.ark.div,{...s,ref:(0,y.composeRefs)(r.ref,t)})});P.displayName="PopoverContent";let O=e=>e.children(f()),x=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,u.mergeProps)(o.getDescriptionProps(),e);return(0,i.jsx)(p.ark.div,{...r,ref:t})});x.displayName="PopoverDescription";let E=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,u.mergeProps)(o.getIndicatorProps(),e);return(0,i.jsx)(p.ark.div,{...r,ref:t})});E.displayName="PopoverIndicator";let N=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,w.usePresenceContext)(),s=(0,u.mergeProps)(o.getPositionerProps(),e);return r.unmounted?null:(0,i.jsx)(p.ark.div,{...s,ref:t})});N.displayName="PopoverPositioner";var C=e.i(287942);let F=e=>(0,C.createSplitProps)()(e,["immediate","lazyMount","onExitComplete","present","skipAnimationOnMount","unmountOnExit"]);var T=e.i(520953),k=e.i(956364),A=e.i(750377),D=e.i(953760),I=e.i(118991);function L(e=0,t=0,i=0,o=0){if("function"==typeof DOMRect)return new DOMRect(e,t,i,o);let r={x:e,y:t,width:i,height:o,top:t,right:e+i,bottom:t+o,left:e};return{...r,toJSON:()=>r}}var R=e=>({variable:e,reference:`var(${e})`}),S={arrowSize:R("--arrow-size"),arrowSizeHalf:R("--arrow-size-half"),arrowBg:R("--arrow-background"),transformOrigin:R("--transform-origin"),arrowOffset:R("--arrow-offset")},B={name:"rects",fn:({rects:e})=>({data:e})},M={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function $(e,t){let i=e.devicePixelRatio||1;return Math.round(t*i)/i}function G(e){return"function"==typeof e?e():"clipping-ancestors"===e?"clippingAncestors":e}function j(e,t,i={}){let{defer:o,...r}=i,s=o?A.raf:e=>e(),n=[];return n.push(s(()=>{let i="function"==typeof e?e():e,o="function"==typeof t?t():t;n.push(function(e,t,i={}){var o,r,s,n,a;let l,d=(o=i.getAnchorElement?.()??e,r=i.getAnchorRect,{contextElement:(0,A.isHTMLElement)(o)?o:o?.contextElement,getBoundingClientRect:()=>{let e=r?.(o);return e||!o?function(e){if(!e)return L();let{x:t,y:i,width:o,height:r}=e;return L(t,i,o,r)}(e):o.getBoundingClientRect()}});if(!t||!d)return;let c=Object.assign({},M,i),u=t.querySelector("[data-part=arrow]"),p=[function(e,t){if(!(0,I.isNull)(t.offset??t.gutter))return(0,D.offset)(({placement:i})=>{let o=(e?.clientHeight||0)/2,r=t.offset?.mainAxis??t.gutter,{hasAlign:s}=function(e){let[t,i]=e.split("-");return{side:t,align:i,hasAlign:null!=i}}(i),n=s?void 0:t.shift,a=t.offset?.crossAxis??n;return(0,I.compact)({crossAxis:a,mainAxis:"number"==typeof r?r+o:r??o,alignmentAxis:t.shift})})}(u,c),function(e){if(!e.flip)return;let t=G(e.boundary);return(0,D.flip)({...t?{boundary:t}:void 0,padding:e.overflowPadding,fallbackPlacements:!0===e.flip?void 0:e.flip})}(c),function(e){if(!e.slide&&!e.overlap)return;let t=G(e.boundary);return(0,D.shift)({...t?{boundary:t}:void 0,mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding,limiter:(0,D.limitShift)()})}(c),(s=t.ownerDocument,l=u||s.createElement("div"),(0,D.arrow)({element:l,padding:c.arrowPadding})),(e=>{if(e)return{name:"shiftArrow",fn({placement:t,middlewareData:i}){if(!i.arrow)return{};let{x:o,y:r}=i.arrow,s=t.split("-")[0];return Object.assign(e.style,{left:null!=o?`${o}px`:"",top:null!=r?`${r}px`:"",[s]:`calc(100% + ${S.arrowOffset.reference})`}),{}}}})(u),(n={gutter:c.gutter,offset:c.offset,overlap:c.overlap},{name:"transformOrigin",fn(e){let{elements:t,middlewareData:i,placement:o,rects:r,y:s}=e,a=o.split("-")[0],l=i.arrow?.x||0,d=i.arrow?.y||0,c=u?.clientWidth||0,p=u?.clientHeight||0,h=l+c/2,f=d+p/2,g=Math.abs(i.shift?.y||0),m=r.reference.height/2,v=p/2,b=n.offset?.mainAxis??n.gutter,y="number"==typeof b?b+v:b??v,w=g>y,P={top:`${h}px calc(100% + ${y}px)`,bottom:`${h}px ${-y}px`,left:`calc(100% + ${y}px) ${f}px`,right:`${-y}px ${f}px`}[a],O=`${h}px ${r.reference.y+m-s}px`,x=!!n.overlap&&"y"==("top"===a||"bottom"===a?"y":"x")&&w;return t.floating.style.setProperty(S.transformOrigin.variable,x?O:P),{data:{transformOrigin:x?O:P}}}}),(0,D.size)({padding:c.overflowPadding,apply({elements:e,rects:t,availableHeight:i,availableWidth:o}){let r=e.floating,s=Math.round(t.reference.width),n=Math.round(t.reference.height);o=Math.floor(o),i=Math.floor(i),r.style.setProperty("--reference-width",`${s}px`),r.style.setProperty("--reference-height",`${n}px`),r.style.setProperty("--available-width",`${o}px`),r.style.setProperty("--available-height",`${i}px`)}}),function(e){if(e.hideWhenDetached)return(0,D.hide)({strategy:"referenceHidden",boundary:G(e.boundary)??"clippingAncestors"})}(c),B],{placement:h,strategy:f,onComplete:g,onPositioned:m}=c,v=async()=>{if(!d||!t)return;let e=await (0,D.computePosition)(d,t,{placement:h,middleware:p,strategy:f});g?.(e),m?.({placed:!0});let i=(0,A.getWindow)(t),o=$(i,e.x),r=$(i,e.y);t.style.setProperty("--x",`${o}px`),t.style.setProperty("--y",`${r}px`),c.hideWhenDetached&&(e.middlewareData.hide?.referenceHidden?(t.style.setProperty("visibility","hidden"),t.style.setProperty("pointer-events","none")):(t.style.removeProperty("visibility"),t.style.removeProperty("pointer-events")));let s=t.firstElementChild;if(s){let e=(0,A.getComputedStyle)(s);t.style.setProperty("--z-index",e.zIndex)}},b=async()=>{i.updatePosition?(await i.updatePosition({updatePosition:v,floatingElement:t}),m?.({placed:!0})):await v()},y=(a=c.listeners)?!0===a?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:a:{},w=c.listeners?(0,D.autoUpdate)(d,t,b,y):I.noop;return b(),()=>{w?.(),m?.({placed:!1})}}(i,o,r))})),()=>{n.forEach(e=>e?.())}}var z={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"},_=new WeakMap,K=new WeakMap,W={},H=0,q=e=>e&&(e.host||q(e.parentNode)),V=new Set(["script","output","status","next-route-announcer"]),U=e=>(Array.isArray(e)?e[0]:e).ownerDocument.body,Y=e.i(712266),J="layer:request-dismiss",Q={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){return this.indexOf(e)<(this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1)},isTopMost(e){let t=this.layers[this.count()-1];return t?.node===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},getLayersByType(e){return this.layers.filter(t=>t.type===e)},getNestedLayersByType(e,t){let i=this.indexOf(e);return -1===i?[]:this.layers.slice(i+1).filter(e=>e.type===t)},getParentLayerOfType(e,t){let i=this.indexOf(e);if(!(i<=0))return this.layers.slice(0,i).reverse().find(e=>e.type===t)},countNestedLayersOfType(e,t){return this.getNestedLayersByType(e,t).length},isInNestedLayer(e,t){return this.getNestedLayers(e).some(e=>(0,A.contains)(e.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>(0,A.contains)(t,e))},add(e){this.layers.push(e),this.syncLayers()},addBranch(e){this.branches.push(e)},remove(e){let t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(t=>Q.dismiss(t.node,e)),this.layers.splice(t,1),this.syncLayers())},removeBranch(e){let t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},syncLayers(){this.layers.forEach((e,t)=>{e.node.style.setProperty("--layer-index",`${t}`),e.node.removeAttribute("data-nested"),e.node.removeAttribute("data-has-nested"),this.getParentLayerOfType(e.node,e.type)&&e.node.setAttribute("data-nested",e.type);let i=this.countNestedLayersOfType(e.node,e.type);i>0&&e.node.setAttribute("data-has-nested",e.type),e.node.style.setProperty("--nested-layer-count",`${i}`)})},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e,t){var i,o,r,s,n,a;let l,d=this.indexOf(e);if(-1===d)return;let c=this.layers[d];i=e,o=J,r=e=>{c.requestDismiss?.(e),e.defaultPrevented||c?.dismiss()},i.addEventListener(o,r,{once:!0}),s=e,n=J,a={originalLayer:e,targetLayer:t,originalIndex:d,targetIndex:t?this.indexOf(t):-1},l=new(s.ownerDocument.defaultView||window).CustomEvent(n,{cancelable:!0,bubbles:!0,detail:a}),s.dispatchEvent(l),this.syncLayers()},clear(){this.remove(this.layers[0].node)}};function X(){Q.layers.forEach(({node:e})=>{e.style.pointerEvents=Q.isBelowPointerBlockingLayer(e)?"none":"auto"})}var Z=Object.defineProperty,ee=(e,t,i)=>{let o;return(o="symbol"!=typeof t?t+"":t)in e?Z(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i},et={activateTrap(e,t){if(e.length>0){let i=e[e.length-1];i!==t&&i.pause()}let i=e.indexOf(t);-1===i||e.splice(i,1),e.push(t)},deactivateTrap(e,t){let i=e.indexOf(t);-1!==i&&e.splice(i,1),e.length>0&&e[e.length-1].unpause()}},ei=[],eo=class{constructor(e,t){ee(this,"trapStack"),ee(this,"config"),ee(this,"doc"),ee(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),ee(this,"portalContainers",new Set),ee(this,"listenerCleanups",[]),ee(this,"handleFocus",e=>{let t=(0,A.getEventTarget)(e),i=this.findContainerIndex(t,e)>=0;if(i||(0,A.isDocument)(t))i&&(this.state.mostRecentlyFocusedNode=t);else{let t;e.stopImmediatePropagation();let i=!0;if(this.state.mostRecentlyFocusedNode)if((0,A.getTabIndex)(this.state.mostRecentlyFocusedNode)>0){let e=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:o}=this.state.containerGroups[e];if(o.length>0){let e=o.findIndex(e=>e===this.state.mostRecentlyFocusedNode);e>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?e+1<o.length&&(t=o[e+1],i=!1):e-1>=0&&(t=o[e-1],i=!1))}}else this.state.containerGroups.some(e=>e.tabbableNodes.some(e=>(0,A.getTabIndex)(e)>0))||(i=!1);else i=!1;i&&(t=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),t?this.tryFocus(t):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),ee(this,"handlePointerDown",e=>{let t=(0,A.getEventTarget)(e);this.findContainerIndex(t,e)>=0||(es(this.config.clickOutsideDeactivates,e)?this.deactivate({returnFocus:this.config.returnFocusOnDeactivate}):es(this.config.allowOutsideClick,e)||e.preventDefault())}),ee(this,"handleClick",e=>{let t=(0,A.getEventTarget)(e);this.findContainerIndex(t,e)>=0||es(this.config.clickOutsideDeactivates,e)||es(this.config.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())}),ee(this,"handleTabKey",e=>{if(this.config.isKeyForward(e)||this.config.isKeyBackward(e)){this.state.recentNavEvent=e;let t=this.config.isKeyBackward(e),i=this.findNextNavNode({event:e,isBackward:t});i&&(er(e)&&e.preventDefault(),this.tryFocus(i))}}),ee(this,"handleEscapeKey",e=>{en(e)&&!1!==es(this.config.escapeDeactivates,e)&&(e.preventDefault(),this.deactivate())}),ee(this,"_mutationObserver"),ee(this,"setupMutationObserver",()=>{let e=this.doc.defaultView||window;this._mutationObserver=new e.MutationObserver(e=>{e.some(e=>Array.from(e.removedNodes).some(e=>e===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode()),e.some(e=>"attributes"===e.type&&("aria-controls"===e.attributeName||"aria-expanded"===e.attributeName)||"childList"===e.type&&e.addedNodes.length>0&&Array.from(e.addedNodes).some(e=>e.nodeType===Node.ELEMENT_NODE&&(!!(0,A.hasControllerElements)(e)||!(!e.id||this.state.containers.some(t=>t.contains(e)))&&(0,A.isControlledByExpandedController)(e))))&&this.state.active&&!this.state.paused&&(this.updateTabbableNodes(),this.updatePortalContainers())})}),ee(this,"updateObservedNodes",()=>{this._mutationObserver?.disconnect(),this.state.active&&!this.state.paused&&(this.state.containers.map(e=>{this._mutationObserver?.observe(e,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["aria-controls","aria-expanded"]})}),this.portalContainers.forEach(e=>{this.observePortalContainer(e)}))}),ee(this,"getInitialFocusNode",()=>{let e=this.getNodeForOption("initialFocus",{hasFallback:!0});if(!1===e)return!1;if(void 0===e||e&&!(0,A.isFocusable)(e)){let t=(0,A.getActiveElement)(this.doc);if(t&&this.findContainerIndex(t)>=0)e=t;else{let t=this.state.tabbableGroups[0];e=t&&t.firstTabbableNode||this.getNodeForOption("fallbackFocus")}}else null===e&&(e=this.getNodeForOption("fallbackFocus"));if(!e)throw Error("Your focus-trap needs to have at least one focusable element");return e.isConnected||(e=this.getNodeForOption("fallbackFocus")),e}),ee(this,"tryFocus",e=>{if(!1!==e&&e!==(0,A.getActiveElement)(this.doc)){if(!e||!e.focus)return void this.tryFocus(this.getInitialFocusNode());e.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=e,el(e)&&e.select()}}),ee(this,"deactivate",e=>{if(!this.state.active)return this;let t={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...e};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),et.deactivateTrap(this.trapStack,this),this.portalContainers.clear();let i=this.getOption(t,"onDeactivate"),o=this.getOption(t,"onPostDeactivate"),r=this.getOption(t,"checkCanReturnFocus"),s=this.getOption(t,"returnFocus","returnFocusOnDeactivate");i?.();let n=()=>{ea(()=>{if(s){let e=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(e)}o?.()})};return s&&r?r(this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation)).then(n,n):n(),this}),ee(this,"pause",e=>{if(this.state.paused||!this.state.active)return this;let t=this.getOption(e,"onPause"),i=this.getOption(e,"onPostPause");return this.state.paused=!0,t?.(),this.removeListeners(),this.updateObservedNodes(),i?.(),this}),ee(this,"unpause",e=>{if(!this.state.paused||!this.state.active)return this;let t=this.getOption(e,"onUnpause"),i=this.getOption(e,"onPostUnpause");return this.state.paused=!1,t?.(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),i?.(),this}),ee(this,"updateContainerElements",e=>(this.state.containers=Array.isArray(e)?e.filter(Boolean):[e].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),ee(this,"getReturnFocusNode",e=>{let t=this.getNodeForOption("setReturnFocus",{params:[e]});return t||!1!==t&&e}),ee(this,"getOption",(e,t,i)=>e&&void 0!==e[t]?e[t]:this.config[i||t]),ee(this,"getNodeForOption",(e,{hasFallback:t=!1,params:i=[]}={})=>{let o=this.config[e];if("function"==typeof o&&(o=o(...i)),!0===o&&(o=void 0),!o){if(void 0===o||!1===o)return o;throw Error(`\`${e}\` was specified but was not a node, or did not return a node`)}let r=o;if("string"==typeof o){try{r=this.doc.querySelector(o)}catch(t){throw Error(`\`${e}\` appears to be an invalid selector; error="${t.message}"`)}if(!r&&!t)throw Error(`\`${e}\` as selector refers to no known node`)}return r}),ee(this,"findNextNavNode",e=>{let{event:t,isBackward:i=!1}=e,o=e.target||(0,A.getEventTarget)(t);this.updateTabbableNodes();let r=null;if(this.state.tabbableGroups.length>0){let e=this.findContainerIndex(o,t),s=e>=0?this.state.containerGroups[e]:void 0;if(e<0)r=i?this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:this.state.tabbableGroups[0].firstTabbableNode;else if(i){let i=this.state.tabbableGroups.findIndex(({firstTabbableNode:e})=>o===e);if(i<0&&(s?.container===o||(0,A.isFocusable)(o)&&!(0,A.isTabbable)(o)&&!s?.nextTabbableNode(o,!1))&&(i=e),i>=0){let e=0===i?this.state.tabbableGroups.length-1:i-1,t=this.state.tabbableGroups[e];r=(0,A.getTabIndex)(o)>=0?t.lastTabbableNode:t.lastDomTabbableNode}else er(t)||(r=s?.nextTabbableNode(o,!1))}else{let i=this.state.tabbableGroups.findIndex(({lastTabbableNode:e})=>o===e);if(i<0&&(s?.container===o||(0,A.isFocusable)(o)&&!(0,A.isTabbable)(o)&&!s?.nextTabbableNode(o))&&(i=e),i>=0){let e=i===this.state.tabbableGroups.length-1?0:i+1,t=this.state.tabbableGroups[e];r=(0,A.getTabIndex)(o)>=0?t.firstTabbableNode:t.firstDomTabbableNode}else er(t)||(r=s?.nextTabbableNode(o))}}else r=this.getNodeForOption("fallbackFocus");return r}),this.trapStack=t.trapStack||ei;const i={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,followControlledElements:!0,isKeyForward:e=>er(e)&&!e.shiftKey,isKeyBackward:e=>er(e)&&e.shiftKey,...t};this.doc=i.document||(0,A.getDocument)(Array.isArray(e)?e[0]:e),this.config=i,this.updateContainerElements(e),this.setupMutationObserver()}addPortalContainer(e){let t=e.parentElement;t&&!this.portalContainers.has(t)&&(this.portalContainers.add(t),this.state.active&&!this.state.paused&&this.observePortalContainer(t))}observePortalContainer(e){this._mutationObserver?.observe(e,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["aria-controls","aria-expanded"]})}updatePortalContainers(){this.config.followControlledElements&&this.state.containers.forEach(e=>{(0,A.getControlledElements)(e).forEach(e=>{this.addPortalContainer(e)})})}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(e,t){let i="function"==typeof t?.composedPath?t.composedPath():void 0;return this.state.containerGroups.findIndex(({container:t,tabbableNodes:o})=>t.contains(e)||i?.includes(t)||o.find(t=>t===e)||this.isControlledElement(t,e))}isControlledElement(e,t){return!!this.config.followControlledElements&&(0,A.isControlledElement)(e,t)}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(e=>{let t=(0,A.getTabbables)(e,{getShadowRoot:this.config.getShadowRoot}),i=(0,A.getFocusables)(e,{getShadowRoot:this.config.getShadowRoot}),o=t[0],r=t[t.length-1],s=!1;for(let e=0;e<t.length;e++)if((0,A.getTabIndex)(t[e])>0){s=!0;break}return{container:e,tabbableNodes:t,focusableNodes:i,posTabIndexesFound:s,firstTabbableNode:o,lastTabbableNode:r,firstDomTabbableNode:o,lastDomTabbableNode:r,nextTabbableNode:function(e,o=!0){let r=t.indexOf(e);if(r>=0)return t[r+(o?1:-1)];let s=i.indexOf(e);if(!(s<0)){if(o){for(let e=s+1;e<i.length;e++)if((0,A.isTabbable)(i[e]))return i[e]}else for(let e=s-1;e>=0;e--)if((0,A.isTabbable)(i[e]))return i[e]}}}}),this.state.tabbableGroups=this.state.containerGroups.filter(e=>e.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(e=>e.posTabIndexesFound)&&this.state.containerGroups.length>1)throw Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return et.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?ea(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push((0,A.addDomEvent)(this.doc,"focusin",this.handleFocus,!0),(0,A.addDomEvent)(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),(0,A.addDomEvent)(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),(0,A.addDomEvent)(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),(0,A.addDomEvent)(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),(0,A.addDomEvent)(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(e=>e()),this.listenerCleanups=[],this}activate(e){if(this.state.active)return this;let t=this.getOption(e,"onActivate"),i=this.getOption(e,"onPostActivate"),o=this.getOption(e,"checkCanFocusTrap");o||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=(0,A.getActiveElement)(this.doc),t?.();let r=()=>{o&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),i?.()};return o?o(this.state.containers.concat()).then(r,r):r(),this}},er=e=>"Tab"===e.key,es=(e,...t)=>"function"==typeof e?e(...t):e,en=e=>!e.isComposing&&"Escape"===e.key,ea=e=>setTimeout(e,0),el=e=>"input"===e.localName&&"select"in e&&"function"==typeof e.select,ed="data-scroll-lock";function ec(e){let t=(0,A.getComputedStyle)(e),i=t?.scrollbarGutter;return"stable"===i||i?.startsWith("stable ")===!0}var eu=e.i(978445),ep=(0,k.createAnatomy)("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger").build(),eh=e=>e.ids?.anchor??`popover:${e.id}:anchor`,ef=e=>e.ids?.trigger??`popover:${e.id}:trigger`,eg=e=>e.ids?.content??`popover:${e.id}:content`,em=e=>e.ids?.positioner??`popover:${e.id}:popper`,ev=e=>e.ids?.title??`popover:${e.id}:title`,eb=e=>e.ids?.description??`popover:${e.id}:desc`,ey=e=>e.getById(eh(e)),ew=e=>e.getById(ef(e)),eP=e=>e.getById(eg(e)),eO=e=>e.getById(em(e)),ex=(0,u.createMachine)({props:({props:e})=>({closeOnInteractOutside:!0,closeOnEscape:!0,autoFocus:!0,modal:!1,portalled:!0,...e,positioning:{placement:"bottom",...e.positioning}}),initialState:({prop:e})=>e("open")||e("defaultOpen")?"open":"closed",context:({bindable:e})=>({currentPlacement:e(()=>({defaultValue:void 0})),renderedElements:e(()=>({defaultValue:{title:!0,description:!0}}))}),computed:{currentPortalled:({prop:e})=>!!e("modal")||!!e("portalled")},watch({track:e,prop:t,action:i}){e([()=>t("open")],()=>{i(["toggleVisibility"])})},entry:["checkRenderedElements"],states:{closed:{on:{"CONTROLLED.OPEN":{target:"open",actions:["setInitialFocus"]},TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}]}},open:{effects:["trapFocus","preventScroll","hideContentBelow","trackPositioning","trackDismissableElement","proxyTabFocus"],on:{"CONTROLLED.CLOSE":{target:"closed",actions:["setFinalFocus"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose","setFinalFocus"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"POSITIONING.SET":{actions:["reposition"]}}}},implementations:{guards:{isOpenControlled:({prop:e})=>void 0!=e("open")},effects:{trackPositioning:({context:e,prop:t,scope:i})=>(e.set("currentPlacement",t("positioning").placement),j(ey(i)??ew(i),()=>eO(i),{...t("positioning"),defer:!0,onComplete(t){e.set("currentPlacement",t.placement)}})),trackDismissableElement({send:e,prop:i,scope:o}){let r=!0;return function(e,i){let{defer:o}=i,r=o?A.raf:e=>e(),s=[];return s.push(r(()=>{let o=(0,I.isFunction)(e)?e():e;s.push(function(e,i){var o,r;let s,n,{warnOnMissingNode:a=!0}=i;if(a&&!e)return void(0,I.warn)("[@zag-js/dismissable] node is `null` or `undefined`");if(!e)return;let{onDismiss:l,onRequestDismiss:d,pointerBlocking:c,exclude:u,debug:p,type:h="dialog"}=i;Q.add({dismiss:l,node:e,type:h,pointerBlocking:c,requestDismiss:d}),X();let f=[c?(o=i.persistentElements,s=(0,A.getDocument)(e),n=[],Q.hasPointerBlockingLayer()&&!s.body.hasAttribute("data-inert")&&(t=document.body.style.pointerEvents,queueMicrotask(()=>{s.body.style.pointerEvents="none",s.body.setAttribute("data-inert","")})),o?.forEach(e=>{let[t,i]=(0,A.waitForElement)(()=>{let t=e();return(0,A.isHTMLElement)(t)?t:null},{timeout:1e3});t.then(e=>n.push((0,A.setStyle)(e,{pointerEvents:"auto"}))),n.push(i)}),()=>{Q.hasPointerBlockingLayer()||(queueMicrotask(()=>{s.body.style.pointerEvents=t,s.body.removeAttribute("data-inert"),0===s.body.style.length&&s.body.removeAttribute("style")}),n.forEach(e=>e()))}):void 0,(r=function(t){Q.isTopMost(e)&&(i.onEscapeKeyDown?.(t),!t.defaultPrevented&&l&&(t.preventDefault(),l()))},(0,A.addDomEvent)((0,A.getDocument)(e),"keydown",e=>{"Escape"!==e.key||e.isComposing||r?.(e)},{capture:!0})),(0,Y.trackInteractOutside)(e,{exclude:function(t){if(!e)return!1;let o="function"==typeof u?u():u,r=Array.isArray(o)?o:[o],s=i.persistentElements?.map(e=>e()).filter(A.isHTMLElement);return s&&r.push(...s),r.some(e=>(0,A.contains)(e,t))||Q.isInNestedLayer(e,t)},onFocusOutside:function(e){let t=(0,A.getEventTarget)(e.detail.originalEvent);Q.isInBranch(t)||(i.onFocusOutside?.(e),i.onInteractOutside?.(e),e.defaultPrevented||(p&&console.log("onFocusOutside:",e.detail.originalEvent),l?.()))},onPointerDownOutside:function(t){let o=(0,A.getEventTarget)(t.detail.originalEvent);Q.isBelowPointerBlockingLayer(e)||Q.isInBranch(o)||(i.onPointerDownOutside?.(t),i.onInteractOutside?.(t),t.defaultPrevented||(p&&console.log("onPointerDownOutside:",t.detail.originalEvent),l?.()))},defer:i.defer})];return()=>{Q.remove(e),X(),e.style.pointerEvents="",f.forEach(e=>e?.())}}(o,i))})),()=>{s.forEach(e=>e?.())}}(()=>eP(o),{type:"popover",pointerBlocking:i("modal"),exclude:ew(o),defer:!0,onEscapeKeyDown(e){i("onEscapeKeyDown")?.(e),i("closeOnEscape")||e.preventDefault()},onInteractOutside(e){i("onInteractOutside")?.(e),!e.defaultPrevented&&(r=!(e.detail.focusable||e.detail.contextmenu),i("closeOnInteractOutside")||e.preventDefault())},onPointerDownOutside:i("onPointerDownOutside"),onFocusOutside:i("onFocusOutside"),persistentElements:i("persistentElements"),onRequestDismiss:i("onRequestDismiss"),onDismiss(){e({type:"CLOSE",src:"interact-outside",restoreFocus:r})}})},proxyTabFocus({prop:e,scope:t}){if(!e("modal")&&e("portalled"))return(0,A.proxyTabFocus)(()=>eP(t),{triggerElement:ew(t),defer:!0,getShadowRoot:!0,onFocus(e){e.focus({preventScroll:!0})}})},hideContentBelow({prop:e,scope:t}){if(e("modal"))return function(e,t={}){let{defer:i=!0}=t,o=[];return o.push((i?e=>{let t=requestAnimationFrame(()=>e());return()=>cancelAnimationFrame(t)}:e=>e())(()=>{let t=("function"==typeof e?e():e).filter(Boolean);0!==t.length&&o.push(((e,t=U(e),i="data-aria-hidden",o=!0)=>{if(t)return((e,t)=>{let{parentNode:i,markerName:o,controlAttribute:r,followControlledElements:s=!0}=t,n=(Array.isArray(e)?e:[e]).map(e=>{if(i.contains(e))return e;let t=q(e);return t&&i.contains(t)?t:(console.error("[zag-js > ariaHidden] target",e,"in not contained inside",i,". Doing nothing"),null)}).filter(e=>!!e);W[o]||(W[o]=new WeakMap);let a=W[o],l=[],d=new Set,c=new Set(n),u=e=>{!e||d.has(e)||(d.add(e),u(e.parentNode))};n.forEach(e=>{u(e),s&&(0,A.isHTMLElement)(e)&&(0,A.findControlledElements)(e,e=>{u(e)})});let p=e=>{!e||c.has(e)||Array.prototype.forEach.call(e.children,e=>{if(d.has(e))p(e);else try{if(V.has(e.localName)||"status"===e.role||e.hasAttribute("aria-live")||e.matches("[data-live-announcer]"))return;let t=e.getAttribute(r),i="true"===t,s=(_.get(e)||0)+1,n=(a.get(e)||0)+1;_.set(e,s),a.set(e,n),l.push(e),1===s&&i&&K.set(e,!0),1===n&&e.setAttribute(o,""),i||e.setAttribute(r,"true")}catch(t){console.error("[zag-js > ariaHidden] cannot operate on ",e,t)}})};return p(i),d.clear(),H++,()=>{l.forEach(e=>{let t=_.get(e)-1,i=a.get(e)-1;_.set(e,t),a.set(e,i),t||(K.has(e)||e.removeAttribute(r),K.delete(e)),i||e.removeAttribute(o)}),--H||(_=new WeakMap,_=new WeakMap,K=new WeakMap,W={})}})(e,{parentNode:t,markerName:i,controlAttribute:"aria-hidden",followControlledElements:o})})(t))})),()=>{o.forEach(e=>e?.())}}(()=>[eP(t),ew(t)],{defer:!0})},preventScroll({prop:e,scope:t}){if(e("modal"))return function(e){let t,i=e??document,o=i.defaultView??window,{documentElement:r,body:s}=i;if(s.hasAttribute(ed))return;let n=ec(r)||ec(s),a=o.innerWidth-r.clientWidth;s.setAttribute(ed,"");let l=Math.round(r.getBoundingClientRect().left)+r.scrollLeft?"paddingLeft":"paddingRight",d=[(0,A.setStyleProperty)(r,"--scrollbar-width",`${a}px`),(0,A.isIos)()?(()=>{let{scrollX:e,scrollY:t,visualViewport:i}=o,r=i?.offsetLeft??0,d=i?.offsetTop??0,c={position:"fixed",overflow:"hidden",top:`${-(t-Math.floor(d))}px`,left:`${-(e-Math.floor(r))}px`,right:"0"};!n&&a>0&&(c[l]=`${a}px`);let u=(0,A.setStyle)(s,c);return()=>{u?.(),o.scrollTo({left:e,top:t,behavior:"instant"})}})():(t={overflow:"hidden"},!n&&a>0&&(t[l]=`${a}px`),(0,A.setStyle)(s,t))];return()=>{d.forEach(e=>e?.()),s.removeAttribute(ed)}}(t.getDoc())},trapFocus({prop:e,scope:t}){if(e("modal"))return function(e,t={}){let i,o=(0,A.raf)(()=>{let o="function"==typeof e?e():e;if(o){i=new eo(o,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:o,...t,document:(0,A.getDocument)(o)});try{i.activate()}catch{}}});return function(){i?.deactivate(),o()}}(()=>eP(t),{initialFocus:()=>(0,A.getInitialFocus)({root:eP(t),getInitialEl:e("initialFocusEl"),enabled:e("autoFocus")}),getShadowRoot:!0})}},actions:{reposition({event:e,prop:t,scope:i,context:o}){j(ey(i)??ew(i),()=>eO(i),{...t("positioning"),...e.options,defer:!0,listeners:!1,onComplete(e){o.set("currentPlacement",e.placement)}})},checkRenderedElements({context:e,scope:t}){(0,A.raf)(()=>{Object.assign(e.get("renderedElements"),{title:!!t.getById(ev(t)),description:!!t.getById(eb(t))})})},setInitialFocus({prop:e,scope:t}){e("modal")||(0,A.raf)(()=>{let i=(0,A.getInitialFocus)({root:eP(t),getInitialEl:e("initialFocusEl"),enabled:e("autoFocus")});i?.focus({preventScroll:!0})})},setFinalFocus({event:e,scope:t}){let i=e.restoreFocus??e.previousEvent?.restoreFocus;(null==i||i)&&(0,A.raf)(()=>{let e=ew(t);e?.focus({preventScroll:!0})})},invokeOnOpen({prop:e,flush:t}){t(()=>{e("onOpenChange")?.({open:!0})})},invokeOnClose({prop:e,flush:t}){t(()=>{e("onOpenChange")?.({open:!1})})},toggleVisibility({event:e,send:t,prop:i}){t({type:i("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:e})}}}}),eE=(0,eu.createProps)()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onRequestDismiss","defaultOpen","open","persistentElements","portalled","positioning"]);(0,I.createSplitProps)(eE);var eN=e.i(204299),eC=e.i(7652),eF=e.i(962288);let eT=e=>{let t=(0,o.useId)(),{getRootNode:i}=(0,eC.useEnvironmentContext)(),{dir:r}=(0,eF.useLocaleContext)(),s={id:t,dir:r,getRootNode:i,...e};return function(e,t){let{state:i,context:o,send:r,computed:s,prop:n,scope:a}=e,l=i.matches("open"),d=o.get("currentPlacement"),c=s("currentPortalled"),u=o.get("renderedElements"),p=function(e={}){let{placement:t,sameWidth:i,fitViewport:o,strategy:r="absolute"}=e;return{arrow:{position:"absolute",width:S.arrowSize.reference,height:S.arrowSize.reference,[S.arrowSizeHalf.variable]:`calc(${S.arrowSize.reference} / 2)`,[S.arrowOffset.variable]:`calc(${S.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:t?z[t.split("-")[0]]:void 0,background:S.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:r,isolation:"isolate",minWidth:i?void 0:"max-content",width:i?"var(--reference-width)":void 0,maxWidth:o?"var(--available-width)":void 0,maxHeight:o?"var(--available-height)":void 0,pointerEvents:t?void 0:"none",top:"0px",left:"0px",transform:t?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}({...n("positioning"),placement:d});return{portalled:c,open:l,setOpen(e){i.matches("open")!==e&&r({type:e?"OPEN":"CLOSE"})},reposition(e={}){r({type:"POSITIONING.SET",options:e})},getArrowProps:()=>t.element({id:a.ids?.arrow??`popover:${a.id}:arrow`,...ep.arrow.attrs,dir:n("dir"),style:p.arrow}),getArrowTipProps:()=>t.element({...ep.arrowTip.attrs,dir:n("dir"),style:p.arrowTip}),getAnchorProps:()=>t.element({...ep.anchor.attrs,dir:n("dir"),id:eh(a)}),getTriggerProps:()=>t.button({...ep.trigger.attrs,dir:n("dir"),type:"button","data-placement":d,id:ef(a),"aria-haspopup":"dialog","aria-expanded":l,"data-state":l?"open":"closed","aria-controls":eg(a),onPointerDown(e){(0,A.isLeftClick)(e)&&(0,A.isSafari)()&&e.currentTarget.focus()},onClick(e){e.defaultPrevented||r({type:"TOGGLE"})},onBlur(e){r({type:"TRIGGER_BLUR",target:e.relatedTarget})}}),getIndicatorProps:()=>t.element({...ep.indicator.attrs,dir:n("dir"),"data-state":l?"open":"closed"}),getPositionerProps:()=>t.element({id:em(a),...ep.positioner.attrs,dir:n("dir"),style:p.floating}),getContentProps:()=>t.element({...ep.content.attrs,dir:n("dir"),id:eg(a),tabIndex:-1,role:"dialog","aria-modal":(0,A.ariaAttr)(n("modal")),hidden:!l,"data-state":l?"open":"closed","data-expanded":(0,A.dataAttr)(l),"aria-labelledby":u.title?ev(a):void 0,"aria-describedby":u.description?eb(a):void 0,"data-placement":d}),getTitleProps:()=>t.element({...ep.title.attrs,id:ev(a),dir:n("dir")}),getDescriptionProps:()=>t.element({...ep.description.attrs,id:eb(a),dir:n("dir")}),getCloseTriggerProps:()=>t.button({...ep.closeTrigger.attrs,dir:n("dir"),id:a.ids?.closeTrigger??`popover:${a.id}:close`,type:"button","aria-label":"close",onClick(e){e.defaultPrevented||(e.stopPropagation(),r({type:"CLOSE"}))}})}}((0,eN.useMachine)(ex,s),eN.normalizeProps)},ek=e=>{let[t,{children:o,...r}]=F(e),s=eT(r),n=(0,T.usePresence)((0,u.mergeProps)({present:s.open},t));return(0,i.jsx)(h,{value:s,children:(0,i.jsx)(w.PresenceProvider,{value:n,children:o})})},eA=e=>{let[t,{value:o,children:r}]=F(e),s=(0,T.usePresence)((0,u.mergeProps)({present:o.open},t));return(0,i.jsx)(h,{value:o,children:(0,i.jsx)(w.PresenceProvider,{value:s,children:r})})},eD=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,u.mergeProps)(o.getTitleProps(),e);return(0,i.jsx)(p.ark.div,{...r,ref:t})});eD.displayName="PopoverTitle";let eI=(0,o.forwardRef)((e,t)=>{let o=f(),r=(0,w.usePresenceContext)(),s=(0,u.mergeProps)({...o.getTriggerProps(),"aria-controls":r.unmounted?void 0:o.getTriggerProps()["aria-controls"]},e);return(0,i.jsx)(p.ark.button,{...s,ref:t})});eI.displayName="PopoverTrigger",e.s(["Anchor",()=>g,"Arrow",()=>m,"ArrowTip",()=>v,"CloseTrigger",()=>b,"Content",()=>P,"Context",()=>O,"Description",()=>x,"Indicator",()=>E,"Positioner",()=>N,"Root",()=>ek,"RootProvider",()=>eA,"Title",()=>eD,"Trigger",()=>eI],513670);var eL=e.i(513670),eL=eL,eR=e.i(868983),eS=e.i(167881);let eB=({parentRef:e,onClick:t})=>{let r,s,{popover:n}=(r=eT({autoFocus:!1,positioning:{placement:"top",getAnchorRect(){let t=e.current?.ownerDocument.getSelection();return t?.rangeCount?t.getRangeAt(0).getBoundingClientRect():null}}}),s=(0,o.useCallback)(e=>{if(!e)return!1;let t=e.ownerDocument.getSelection();if(!t?.rangeCount)return!1;let i=t.getRangeAt(0);return!i.collapsed&&e.contains(i.commonAncestorContainer)},[]),(0,o.useEffect)(()=>{let t=e.current;if(!t)return;let i=t.ownerDocument||document,o=()=>{s(t)&&(r.reposition(),r.setOpen(!0))},n=()=>{s(t)?r.reposition():r.setOpen(!1)};return i.addEventListener("mouseup",o),i.addEventListener("selectionchange",n),()=>{i.removeEventListener("mouseup",o),i.removeEventListener("selectionchange",n)}},[r,s]),{popover:r});return(0,i.jsx)(eL.RootProvider,{value:n,lazyMount:!0,unmountOnExit:!0,children:(0,i.jsx)(eL.Positioner,{children:(0,i.jsx)(eL.Content,{className:"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",children:(0,i.jsxs)(eS.Button,{onClick:()=>{let i,o=(i=e.current.ownerDocument.getSelection(),i?.rangeCount?i.getRangeAt(0).cloneContents().textContent.trim():"");"function"==typeof t&&t(o)},size:"xs",className:"gap-1 items-center w-fit",variant:"contrast",children:[(0,i.jsx)(eR.WandSparkles,{width:"18"}),"Clarify this"]})})})})};var eM=e.i(835324);let e$={role:"assistant",message_list:[],first_message_id:null},eG=(0,o.memo)(({messageGroup:e,isWorkflowMessage:t=!1})=>{let{isGenerating:u,activeConversationId:p}=(0,l.useChatContext)(),{setIsRightSidebarOpen:h,setRightSidebarCurrentTab:f,handleReaderStream:g,setAnalyses:m}=(0,d.useSidebarsContext)(),{fetchCommentaryStreaming:v}=(0,a.useAuthenticatedAPIs)(),b=(0,o.useRef)(void 0),y=(0,r.usePathname)(),w=async(e,t)=>{if("/chat"!==y)return;if(e.length<=1)return n.toast.error("Please select a bit more text to clarify.");if(!t)return n.toast.error("We were unable to identify the message associated with your selection. Please try again.");h(!0),f("filePreview");let i=Math.random().toString(36),o={id:i,reason:{text:`Clarify: ${e}`,purpose:"highlight"},results:{result:""}};if(m(e=>[o,...e]),v)try{let o=await v({metadata:{juliusMessageId:t,selectedText:e,conversationId:p,reason:"highlight",version:1}});await g(o,i),s.default.capture("get_commentary",{success:!0,reason:"highlight"})}catch(e){s.default.capture("get_commentary",{success:!1,reason:"highlight"})}},P=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return(0,i.jsxs)("div",{ref:b,className:(0,c.cn)("flex flex-col items-center justify-center",t?"w-full p-3":"p-3"),children:[(0,i.jsx)(eM.MessageGroup,{id:e?.first_message_id??e?.message_id,group:e,isWorkflowMessage:t,isOwner:!0}),"user"===e.role&&u&&e.is_last_group&&(0,i.jsx)("div",{className:(0,c.cn)("flex flex-col items-center justify-center w-full py-3 px-0"),children:(0,i.jsx)(eM.MessageGroup,{id:"dummy-message",group:e$,isOwner:!0,dummyMessage:!0})}),!P&&(0,i.jsx)(eB,{parentRef:b,onClick:t=>w(t,e?.first_message_id)})]})});e.s(["default",0,eG],316408)}]);

//# debugId=b1c88eb2-ceaa-fb5c-fbb0-267d6ebaf922
//# sourceMappingURL=ad8836912b85edf3.js.map