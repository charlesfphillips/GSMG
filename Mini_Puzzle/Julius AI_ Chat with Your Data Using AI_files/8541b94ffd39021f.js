;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="a17ae68b-c83a-d8de-509a-5f3d6af74e37")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,351908,e=>{"use strict";var t=e.i(394073);let a=async({accessToken:e,scopes:a,conversationId:r})=>{let n=new URLSearchParams;r&&n.set("conversation_id",r),a&&a.length&&n.set("scopes",a.join(","));let o=`${t.BASE_API}/google/oauth/start${n.toString()?`?${n.toString()}`:""}`,s=await fetch(o,{headers:{Authorization:`Bearer ${e}`}});if(409===s.status)throw Error("Google account already connected. Try again in a moment.");if(!s.ok)throw Error("Failed to fetch Google Drive auth URL");return s.json()},r=async e=>{let a=await fetch(`${t.BASE_API}/google/oauth/token`,{headers:{Authorization:`Bearer ${e}`}});if(401===a.status)return null;if(!a.ok)throw Error("Failed to fetch Google Drive OAuth token. Please connect your Google account.");return await a.json()},n=async(e,a)=>{let r=await fetch(`${t.BASE_API}/google/files/transfer_to_hub`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({files:a})});if(!r.ok)throw Error("Failed to transfer Google Drive files to Hub");return await r.json()},o=async(e,a,r,n="sheets")=>{let o=await fetch(`${t.BASE_API}/google/files/export_dataframe_to_drive`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({conversation_id:a,message_id:r,localized_datetime:s(),upload_type:n})});if(!o.ok)throw Error("Failed to export dataframe to Google Drive");let l=await o.json(),i="drive"===n?l.file_url:l.sheet_url;if(!i)throw Error("Failed to obtain export URL");return i},s=()=>{let e=new Date,t=e.toLocaleDateString("en-US",{month:"short"}).toLowerCase(),a=e=>String(e).padStart(2,"0");return`${e.getFullYear()}-${t}-${a(e.getDate())}-${a(e.getHours())}-${a(e.getMinutes())}-${a(e.getSeconds())}`},l=async e=>{let a=await fetch(`${t.BASE_API}/google/oauth/disconnect`,{headers:{Authorization:`Bearer ${e}`},method:"POST"});if(!a.ok)throw Error("Failed to disconnect Google Drive");return await a.json()},i=async e=>{let a=await fetch(`${t.BASE_API}/google/ads/accounts`,{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw Error("Failed to fetch Google Ads accounts");return await a.json()},d=async(e,a,r,n=!0)=>{let o=await fetch(`${t.BASE_API}/google/ads/connect`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({customer_id:a,descriptive_name:r,link_mcc:n})});if(!o.ok)throw Error("Failed to connect Google Ads account");return await o.json()},c=async e=>{let a=await fetch(`${t.BASE_API}/google/ads/connected`,{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw Error("Failed to fetch connected Google Ads accounts");return await a.json()};e.s(["connectGoogleAdsAccount",0,d,"disconnectGoogleDrive",0,l,"exportDataframeToGoogleDrive",0,o,"getConnectedGoogleAdsAccounts",0,c,"getGoogleAdsAccounts",0,i,"getGoogleDriveAuthUrl",0,a,"getGoogleDriveOauthToken",0,r,"transferGoogleDriveFilesToHub",0,n])},767601,e=>{"use strict";var t=e.i(52563),a=e.i(954616),r=e.i(266027),n=e.i(912598),o=e.i(351908);e.s(["useConnectGoogleAdsAccount",0,()=>{let{getAccessTokenSilently:e}=(0,t.useAuth0)(),r=(0,n.useQueryClient)();return(0,a.useMutation)({mutationFn:async({customer_id:t,descriptive_name:a,link_mcc:r})=>{let n=await e();return(0,o.connectGoogleAdsAccount)(n,t,a,r)},onMutate:async({customer_id:e,descriptive_name:t})=>{await r.cancelQueries({queryKey:["data_connectors/user_connections"]});let a=r.getQueryData(["data_connectors/user_connections"]);return r.setQueryData(["data_connectors/user_connections"],a=>{let r={id:`temp-${e}`,type:"google_ads",user:"me",connection_data:{customer_id:e},name:t||"Google Ads",mfa_type:null,version:"1",created_at:new Date().toISOString(),db_type:"Google Ads"};return[...(a??[]).filter(t=>{let a,r=t.connection_data;if("string"==typeof r)try{a=JSON.parse(r).customer_id}catch{a=void 0}else r&&(a=r.customer_id);return a!==e}),r]}),{previousData:a}},onError:(e,t,a)=>{a?.previousData&&r.setQueryData(["data_connectors/user_connections"],a.previousData)},onSettled:()=>{r.invalidateQueries({queryKey:["data_connectors/user_connections"]}),r.invalidateQueries({queryKey:["google-ads-connected-accounts"]})}})},"useConnectedGoogleAdsAccounts",0,()=>{let{getAccessTokenSilently:e}=(0,t.useAuth0)();return(0,r.useQuery)({queryKey:["google-ads-connected-accounts"],queryFn:async()=>{let t=await e();return(0,o.getConnectedGoogleAdsAccounts)(t)},staleTime:3e5,refetchOnWindowFocus:!1})},"useDisconnectGoogleDrive",0,()=>{let{getAccessTokenSilently:e}=(0,t.useAuth0)(),r=(0,n.useQueryClient)();return(0,a.useMutation)({mutationFn:async()=>{let t=await e();return(0,o.disconnectGoogleDrive)(t)},onSuccess:()=>{r.invalidateQueries({queryKey:["google-oauth-token"]})}})},"useExportDataframeToGoogleDrive",0,()=>{let{getAccessTokenSilently:e}=(0,t.useAuth0)();return(0,a.useMutation)({mutationFn:async({conversationId:t,messageId:a})=>{let r=await e();return(0,o.exportDataframeToGoogleDrive)(r,t,a)}})},"useGoogleDriveAuthUrl",0,()=>{let{getAccessTokenSilently:e}=(0,t.useAuth0)();return(0,a.useMutation)({mutationFn:async({scopes:t,conversationId:a})=>{let r=await e();return(0,o.getGoogleDriveAuthUrl)({accessToken:r,scopes:t,conversationId:a})}})},"useGoogleOauthToken",0,()=>{let{getAccessTokenSilently:e}=(0,t.useAuth0)();return(0,r.useQuery)({queryKey:["google-oauth-token"],queryFn:async()=>{let t=await e();return(0,o.getGoogleDriveOauthToken)(t)},refetchInterval:e=>{let t=e.state.data?.expires_at;if(!t)return!1;let a=new Date(t).getTime()-Date.now()-3e4;return a>0?a:0},refetchIntervalInBackground:!0,refetchOnWindowFocus:!1,staleTime:1/0})}])},672883,e=>{"use strict";e.s(["GOOGLE_OAUTH_SCOPES",0,{DRIVE_FILE:"https://www.googleapis.com/auth/drive.file",USERINFO_EMAIL:"https://www.googleapis.com/auth/userinfo.email",USERINFO_PROFILE:"https://www.googleapis.com/auth/userinfo.profile",ADS:"https://www.googleapis.com/auth/adwords"}])},398361,e=>{"use strict";let t=(0,e.i(475254).default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);e.s(["Maximize2",()=>t],398361)},277604,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(217923),n=e.i(323441),o=e.i(770703),s=e.i(604570),l=e.i(127341),i=e.i(367944);let d=()=>null;var c=e.i(264082),u=e.i(671428),m=e.i(728231),x=e.i(394073),h=e.i(647163);let g=()=>(0,t.jsx)("div",{className:"flex w-full min-h-[45px] items-center justify-center cursor-pointer bg-card border border-border/60 rounded-lg px-2 animate-pulse",children:(0,t.jsx)("div",{className:"flex-1 text-left",children:(0,t.jsx)(u.Skeleton,{className:"h-3 w-full mx-auto block bg-muted"})})}),p=({suggestion:e,handleClickPlotSuggestion:r})=>{let n=(0,a.useRef)(null),[o,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=()=>{n.current&&l(n.current.scrollWidth>n.current.clientWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[e.brief]);let i=(0,t.jsx)("button",{className:(0,h.cn)("group relative flex min-w-[200px] max-w-[400px] min-h-[45px] items-center justify-center cursor-pointer bg-card border border-border/60 rounded-lg px-3 transition-all duration-200 ease-out hover:border-primary/40 hover:bg-accent/50 hover:shadow-sm"),onClick:()=>{s.default.capture("dataframe_suggestion_clicked",{suggestion:e.question}),r(e)},children:(0,t.jsx)("div",{className:"flex-1 text-center relative z-10 min-w-0",children:(0,t.jsx)("span",{ref:n,className:"block whitespace-nowrap overflow-hidden text-ellipsis transition-colors duration-200 text-foreground text-sm ",children:e.brief})})});return o?(0,t.jsxs)(m.Tooltip,{delayDuration:300,children:[(0,t.jsx)(m.TooltipTrigger,{asChild:!0,children:i}),(0,t.jsx)(m.TooltipContent,{side:"top",className:"max-w-xs",children:(0,t.jsx)("p",{className:"text-xs",children:e.brief})})]}):i};function f({rows:e,columns:r,handleClickPlotSuggestion:n}){let{dataframeSuggestions:o,currentSheet:s,setDataframeSuggestions:l,activeConversationId:d}=(0,i.useChatContext)(),[u,h]=(0,a.useState)(!0),{fetchSuggestedQuestions:f}=(0,c.useAuthenticatedAPIs)(),b=async()=>{try{let t=await f({dataframeJSON:{rows:e,columns:r}});t?.suggestions&&(l(t.suggestions),h(!1))}catch(e){h(!1)}};return(0,a.useEffect)(()=>{b()},[]),(0,a.useEffect)(()=>{if(x.FEATURE_FLAGS.GEN_COLUMN_SUGGESTIONS&&!d){if(!r?.length){h(!1),l([]);return}b()}else{let e=setTimeout(()=>{h(!1)},2e3);return()=>clearTimeout(e)}},[d,r,s]),(u||o.length>0)&&(0,t.jsx)(m.TooltipProvider,{children:(0,t.jsx)("div",{className:"border-b border-border/20",children:(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"Quick Plot Suggestions"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:u?"Generating suggestions...":`${o.length} suggestions available`})]}),(0,t.jsx)("div",{className:"px-3 pb-3",children:u?(0,t.jsx)("div",{className:"grid grid-cols-4 gap-3",children:Array.from({length:4}).map((e,a)=>(0,t.jsx)(g,{},a))}):(0,t.jsx)("div",{className:"flex gap-3 overflow-x-auto scroll-smooth scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-700 dark:scrollbar-track-gray-800 pb-2",style:{scrollbarWidth:"thin"},children:o.map((e,a)=>(0,t.jsx)(p,{suggestion:e,handleClickPlotSuggestion:e=>{n(e)}},a))})})]})},s+"suggestions")})}var b=e.i(915492);let v=(e,t)=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a},w=(e,t)=>`${e}:${t}`,y={isDragging:!1,start:void 0,isAdding:!0},j=(0,a.createContext)(null);function C(){let e=(0,a.useContext)(j);if(!e)throw Error("useDataframeTableContext must be used within a DataframeTableProvider");return e}function N({children:e,columns:r,rows:n,index:o,sheetName:s,embedded:l=!1,hasHeaderIssues:d=!1,fixedHeader:c=!0,applyRowLimit:u=!0,editDataframe:m=()=>{},headerFix:x={},enableRightClick:g=!1,fixBlankRows:p=()=>{},enableCellEdit:f=!1,juliusMessageId:C,juliusDfSelectorIndex:N,columnTooltips:S,blankRows:k=[],maxRowsVisible:R=50}){let{setHoveredIssueIndex:A,hoveredIssueIndex:M}=(0,b.useSidebarsContext)(),{editingDataframe:E,validatingDataframe:D,activeConversationId:I,fixingDataframe:_,allSheetIssues:T,fileValidationInfo:P,currentSheet:G,setCurrentSheet:O,dataframeProps:z}=(0,i.useChatContext)(),F=(0,a.useRef)(null),L=(0,a.useRef)(null),$=function({rows:e}){let[t,r]=(0,a.useState)(new Set),[n,o]=(0,a.useState)(new Set),[s,l]=(0,a.useState)(new Set),[i,d]=(0,a.useState)(!1),c=(0,a.useRef)(y),u=(0,a.useCallback)(()=>{r(new Set),o(new Set),l(new Set)},[]);(0,a.useEffect)(()=>{let e=h.eventEmitter.addListener("clearSelection",u);return()=>e.remove()},[u]);let m=(0,a.useCallback)((e,a)=>t.has(w(e,a))||n.has(a)||s.has(e),[t,n,s]),x=(0,a.useCallback)((e,a,n)=>{if(0!==e.button)return;let s=w(a,n),i=!t.has(s);c.current={isDragging:!0,start:{row:a,col:n},isAdding:i},r(i?new Set([s]):new Set),o(new Set),l(new Set)},[t]),g=(0,a.useCallback)((e,t)=>{let{isDragging:a,start:n,isAdding:o}=c.current;if(!a||!n)return;let[s,l]=[Math.min(n.row,e),Math.max(n.row,e)],[i,d]=[Math.min(n.col,t),Math.max(n.col,t)],u=new Set;if(o)for(let e=s;e<=l;e++)for(let t=i;t<=d;t++)u.add(w(e,t));r(u)},[]),p=(0,a.useCallback)(()=>{c.current=y},[]),f=(0,a.useCallback)(e=>{r(new Set),l(new Set),o(t=>v(t,e))},[]);return{selectedColumns:n,selectedRows:s,isSelectAllHovered:i,setIsSelectAllHovered:d,isSelected:m,handleMouseDown:x,handleMouseEnter:g,handleMouseUp:p,handleColumnClick:f,handleRowClick:(0,a.useCallback)(e=>{r(new Set),o(new Set),l(t=>v(t,e))},[]),handleSelectAll:(0,a.useCallback)(()=>{r(new Set),o(new Set),l(t=>t.size===e.length?new Set:new Set(e.map((e,t)=>t)))},[e])}}({rows:n||[]}),H=function(){let[e,t]=(0,a.useState)(new Set),[r,n]=(0,a.useState)(new Set);return{expandedRows:e,expandedColumns:r,toggleRowExpansion:(0,a.useCallback)(e=>{t(t=>v(t,e))},[]),toggleColumnExpansion:(0,a.useCallback)(e=>{n(t=>v(t,e))},[])}}(),B=(0,a.useMemo)(()=>({selectedRows:$.selectedRows,selectedColumns:$.selectedColumns,isSelectAllHovered:$.isSelectAllHovered,setIsSelectAllHovered:$.setIsSelectAllHovered,handleSelectAll:$.handleSelectAll,handleRowClick:$.handleRowClick,handleColumnClick:$.handleColumnClick,handleMouseDown:$.handleMouseDown,handleMouseEnter:$.handleMouseEnter,handleMouseUp:$.handleMouseUp,isSelected:$.isSelected}),[$]),U=(0,a.useMemo)(()=>({expandedRows:H.expandedRows,expandedColumns:H.expandedColumns,toggleRowExpansion:H.toggleRowExpansion,toggleColumnExpansion:H.toggleColumnExpansion}),[H]),q=(0,a.useMemo)(()=>({editingDataframe:E,validatingDataframe:D,fixingDataframe:_}),[E,D,_]),Q=k?.[0],J=x?.column,K=(0,a.useMemo)(()=>({blankRowsRef:F,headerFixRef:L,firstBlankRowIndex:Q,headerFixRowIndex:J}),[Q,J]),W=(0,a.useMemo)(()=>({columns:r,rows:n,index:o,sheetName:s,selection:B,expansion:U,editing:q,allSheetIssues:T,fileValidationInfo:P,hoveredIssueIndex:M,setHoveredIssueIndex:A,currentSheet:G,setCurrentSheet:O,blankRows:k,issueScrollingRefs:K,editDataframe:m,headerFix:x,enableRightClick:g,fixBlankRows:p,enableCellEdit:f,hasHeaderIssues:d,fixedHeader:c,applyRowLimit:u,embedded:l,dataframeProps:z,activeConversationId:I,juliusMessageId:C,juliusDfSelectorIndex:N,columnTooltips:S,maxRowsVisible:R}),[r,n,o,s,B,U,q,T,P,M,A,G,O,k,K,m,x,g,p,f,d,c,u,l,z,I,C,N,S,R]);return(0,t.jsx)(j.Provider,{value:W,children:e})}var S=e.i(643531),k=e.i(664659),R=e.i(463059),A=e.i(37727),M=e.i(759714);let E=(0,e.i(475254).default)("shrink",[["path",{d:"m15 15 6 6m-6-6v4.8m0-4.8h4.8",key:"17vawe"}],["path",{d:"M9 19.8V15m0 0H4.2M9 15l-6 6",key:"chjx8e"}],["path",{d:"M15 4.2V9m0 0h4.8M15 9l6-6",key:"lav6yq"}],["path",{d:"M9 4.2V9m0 0H4.2M9 9 3 3",key:"1pxi2q"}]]),D=({cellContent:e,truncate:a=!0})=>{if(null===e)return(0,t.jsx)("span",{className:"text-gray-300 dark:text-gray-500",children:"NULL"});if("object"==typeof e){let r=JSON.stringify(e,null,2);return a&&r.length>50?(0,t.jsxs)("span",{title:r,children:[r.substring(0,47),"..."]}):a?JSON.stringify(e):r}if("boolean"==typeof e)return e?"TRUE":"FALSE";let r=String(e);return a&&r.length>50?(0,t.jsxs)("span",{title:r,children:[r.substring(0,47),"..."]}):r},I=({cell:e,columnIndex:r,rowIndex:n,onMouseDown:o,onMouseEnter:s,onMouseUp:l,isSelected:i,suggestedHeaderRow:d,isRowExpanded:c=!1,onToggleRowExpansion:u,expandedColumns:m=new Set,onToggleColumnExpansion:x,enableCellEdit:g=!1})=>{let[p,f]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),w=(0,a.useRef)(null),y=String(e||""),j=y.length>50||"object"==typeof e&&JSON.stringify(e).length>50,C=m.has(r);return(0,a.useEffect)(()=>{function e(e){w.current&&!w.current.contains(e.target)&&f(!1)}return p&&(w.current?.focus(),document.addEventListener("mousedown",e)),()=>{document.removeEventListener("mousedown",e)}},[p]),(0,t.jsxs)("td",{onMouseDown:e=>{"function"==typeof o&&o(e,n,r)},onMouseEnter:()=>{"function"==typeof s&&(s(n,r),v(!0))},onMouseLeave:()=>v(!1),onMouseUp:"function"==typeof l?l:void 0,onClick:g?e=>{e.target.closest("[data-expansion-button]")||2===e.detail&&f(!0)}:void 0,...d&&{"data-cy":"dataframe-suggested-header-row"},className:(0,h.cn)("relative border-b border-r text-[12px] transition-all duration-200 group",c?"max-h-96 py-3":"max-h-20 py-2",C?"min-w-80 max-w-none px-3":"min-w-20 max-w-xs px-2","overflow-hidden",g?"cursor-pointer":"pointer-events-none",i(n,r)&&"bg-blue-100 dark:!bg-blue-800/50",d&&"bg-[#f2f2f2] dark:bg-neutral-800",b&&"bg-gray-50 dark:bg-gray-800/50"),style:{width:C?"auto":void 0},children:[(0,t.jsx)("div",{className:(0,h.cn)("transition-all duration-200 pr-6",c||C?"whitespace-pre-wrap break-words overflow-y-auto":"overflow-hidden whitespace-nowrap",c?"max-h-80":""),style:c||C?{}:{textOverflow:"ellipsis"},title:c||C?void 0:y,children:p?(0,t.jsx)("input",{ref:w,type:"text",defaultValue:y,className:"w-full bg-transparent border-none outline-none p-0",onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&f(!1)}}):(0,t.jsx)(D,{cellContent:e,truncate:!(c||C)})}),j&&(b||c||C)&&(0,t.jsxs)("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{"data-expansion-button":!0,onClick:e=>{e.stopPropagation(),u?.(n)},className:"p-0.5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:c?"Collapse row":"Expand row",children:c?(0,t.jsx)(E,{size:10}):(0,t.jsx)(M.Expand,{size:10})}),(0,t.jsx)("button",{"data-expansion-button":!0,onClick:e=>{e.stopPropagation(),x?.(r)},className:"p-0.5 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:C?"Collapse column":"Expand column",children:C?(0,t.jsx)(E,{size:10,className:"rotate-90"}):(0,t.jsx)(M.Expand,{size:10,className:"rotate-90"})})]}),j&&b&&!(c||C)&&(0,t.jsx)("div",{className:"absolute z-50 top-full left-0 mt-1 p-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow-lg max-w-sm max-h-40 overflow-auto text-sm",children:(0,t.jsx)(D,{cellContent:e,truncate:!1})})]})};var _=e.i(114683),T=e.i(981140),P=e.i(30030);e.i(174080);var G=e.i(991918),O=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let n=(0,G.createSlot)(`Primitive.${r}`),o=a.forwardRef((e,a)=>{let{asChild:o,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(o?n:r,{...s,ref:a})});return o.displayName=`Primitive.${r}`,{...e,[r]:o}},{}),z=e.i(832006),F=e.i(30207),L=e.i(369340),$="ContextMenu",[H,B]=(0,P.createContextScope)($,[z.createMenuScope]),U=(0,z.createMenuScope)(),[q,Q]=H($),J=e=>{let{__scopeContextMenu:r,children:n,onOpenChange:o,dir:s,modal:l=!0}=e,[i,d]=a.useState(!1),c=U(r),u=(0,F.useCallbackRef)(o),m=a.useCallback(e=>{d(e),u(e)},[u]);return(0,t.jsx)(q,{scope:r,open:i,onOpenChange:m,modal:l,children:(0,t.jsx)(z.Root,{...c,dir:s,open:i,onOpenChange:m,modal:l,children:n})})};J.displayName=$;var K="ContextMenuTrigger",W=a.forwardRef((e,r)=>{let{__scopeContextMenu:n,disabled:o=!1,...s}=e,l=Q(K,n),i=U(n),d=a.useRef({x:0,y:0}),c=a.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...d.current})}),u=a.useRef(0),m=a.useCallback(()=>window.clearTimeout(u.current),[]),x=e=>{d.current={x:e.clientX,y:e.clientY},l.onOpenChange(!0)};return a.useEffect(()=>m,[m]),a.useEffect(()=>void(o&&m()),[o,m]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.Anchor,{...i,virtualRef:c}),(0,t.jsx)(O.span,{"data-state":l.open?"open":"closed","data-disabled":o?"":void 0,...s,ref:r,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:o?e.onContextMenu:(0,T.composeEventHandlers)(e.onContextMenu,e=>{m(),x(e),e.preventDefault()}),onPointerDown:o?e.onPointerDown:(0,T.composeEventHandlers)(e.onPointerDown,em(e=>{m(),u.current=window.setTimeout(()=>x(e),700)})),onPointerMove:o?e.onPointerMove:(0,T.composeEventHandlers)(e.onPointerMove,em(m)),onPointerCancel:o?e.onPointerCancel:(0,T.composeEventHandlers)(e.onPointerCancel,em(m)),onPointerUp:o?e.onPointerUp:(0,T.composeEventHandlers)(e.onPointerUp,em(m))})]})});W.displayName=K;var V=e=>{let{__scopeContextMenu:a,...r}=e,n=U(a);return(0,t.jsx)(z.Portal,{...n,...r})};V.displayName="ContextMenuPortal";var X="ContextMenuContent",Y=a.forwardRef((e,r)=>{let{__scopeContextMenu:n,...o}=e,s=Q(X,n),l=U(n),i=a.useRef(!1);return(0,t.jsx)(z.Content,{...l,...o,ref:r,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),!t.defaultPrevented&&i.current&&t.preventDefault(),i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||s.modal||(i.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Y.displayName=X;var Z=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.Group,{...o,...n,ref:a})});Z.displayName="ContextMenuGroup";var ee=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.Label,{...o,...n,ref:a})});ee.displayName="ContextMenuLabel";var et=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.Item,{...o,...n,ref:a})});et.displayName="ContextMenuItem";var ea=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.CheckboxItem,{...o,...n,ref:a})});ea.displayName="ContextMenuCheckboxItem";var er=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.RadioGroup,{...o,...n,ref:a})});er.displayName="ContextMenuRadioGroup";var en=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.RadioItem,{...o,...n,ref:a})});en.displayName="ContextMenuRadioItem";var eo=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.ItemIndicator,{...o,...n,ref:a})});eo.displayName="ContextMenuItemIndicator";var es=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.Separator,{...o,...n,ref:a})});es.displayName="ContextMenuSeparator";var el=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.Arrow,{...o,...n,ref:a})});el.displayName="ContextMenuArrow";var ei="ContextMenuSub",ed=e=>{let{__scopeContextMenu:a,children:r,onOpenChange:n,open:o,defaultOpen:s}=e,l=U(a),[i,d]=(0,L.useControllableState)({prop:o,defaultProp:s??!1,onChange:n,caller:ei});return(0,t.jsx)(z.Sub,{...l,open:i,onOpenChange:d,children:r})};ed.displayName=ei;var ec=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.SubTrigger,{...o,...n,ref:a})});ec.displayName="ContextMenuSubTrigger";var eu=a.forwardRef((e,a)=>{let{__scopeContextMenu:r,...n}=e,o=U(r);return(0,t.jsx)(z.SubContent,{...o,...n,ref:a,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});function em(e){return t=>"mouse"!==t.pointerType?e(t):void 0}eu.displayName="ContextMenuSubContent",e.s(["Arrow",()=>el,"CheckboxItem",()=>ea,"Content",()=>Y,"ContextMenu",()=>J,"ContextMenuArrow",()=>el,"ContextMenuCheckboxItem",()=>ea,"ContextMenuContent",()=>Y,"ContextMenuGroup",()=>Z,"ContextMenuItem",()=>et,"ContextMenuItemIndicator",()=>eo,"ContextMenuLabel",()=>ee,"ContextMenuPortal",()=>V,"ContextMenuRadioGroup",()=>er,"ContextMenuRadioItem",()=>en,"ContextMenuSeparator",()=>es,"ContextMenuSub",()=>ed,"ContextMenuSubContent",()=>eu,"ContextMenuSubTrigger",()=>ec,"ContextMenuTrigger",()=>W,"Group",()=>Z,"Item",()=>et,"ItemIndicator",()=>eo,"Label",()=>ee,"Portal",()=>V,"RadioGroup",()=>er,"RadioItem",()=>en,"Root",()=>J,"Separator",()=>es,"Sub",()=>ed,"SubContent",()=>eu,"SubTrigger",()=>ec,"Trigger",()=>W,"createContextMenuScope",()=>B],79602);var ex=e.i(79602),ex=ex;let eh=ex.Root,eg=ex.Trigger;ex.Group,ex.Portal,ex.Sub,ex.RadioGroup,a.forwardRef(({className:e,inset:a,children:r,...n},o)=>(0,t.jsxs)(ex.SubTrigger,{ref:o,className:(0,h.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",a&&"pl-8",e),...n,children:[r,(0,t.jsx)(R.ChevronRight,{className:"ml-auto h-4 w-4"})]})).displayName=ex.SubTrigger.displayName,a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(ex.SubContent,{ref:r,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})).displayName=ex.SubContent.displayName;let ep=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(ex.Portal,{children:(0,t.jsx)(ex.Content,{ref:r,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));ep.displayName=ex.Content.displayName;let ef=a.forwardRef(({className:e,inset:a,...r},n)=>(0,t.jsx)(ex.Item,{ref:n,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",e),...r}));ef.displayName=ex.Item.displayName,a.forwardRef(({className:e,children:a,checked:r,...n},o)=>(0,t.jsxs)(ex.CheckboxItem,{ref:o,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(ex.ItemIndicator,{children:(0,t.jsx)(S.Check,{className:"h-4 w-4"})})}),a]})).displayName=ex.CheckboxItem.displayName,a.forwardRef(({className:e,children:a,...r},n)=>(0,t.jsxs)(ex.RadioItem,{ref:n,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(ex.ItemIndicator,{children:(0,t.jsx)(_.Circle,{className:"h-2 w-2 fill-current"})})}),a]})).displayName=ex.RadioItem.displayName,a.forwardRef(({className:e,inset:a,...r},n)=>(0,t.jsx)(ex.Label,{ref:n,className:(0,h.cn)("px-2 py-1.5 text-sm font-semibold text-foreground",a&&"pl-8",e),...r})).displayName=ex.Label.displayName,a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(ex.Separator,{ref:r,className:(0,h.cn)("-mx-1 my-1 h-px bg-border",e),...a})).displayName=ex.Separator.displayName;let eb=(0,a.memo)(({rowIndex:e,row:a,index:r,isIssueRow:n,rowIssue:o})=>{let{selection:s,expansion:l,editing:i,headerFix:d,enableRightClick:c,enableCellEdit:u,fixBlankRows:m,setHoveredIssueIndex:x,fileValidationInfo:g,activeConversationId:p,currentSheet:f,dataframeProps:b,issueScrollingRefs:v}=C(),w=e===v.firstBlankRowIndex,y=e===v.headerFixRowIndex,j=l.expandedRows.has(e),N=()=>!["csv"].includes(b?.filename?.split(".").pop()?.toLowerCase()||""),M=()=>{let t=f?g?.[f]:null;o?x(o.details??null):t?.issues?.column_headers_on_row===e?x(e):t?.issues?.empty_rows_indices?.includes(e)&&x(t.issues.empty_rows_indices)},E=()=>{x(null)},D=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:(0,h.cn)("bg-gray-100 dark:bg-neutral-900 cursor-pointer select-none text-muted-secondary hover:bg-gray-200 border-b-2 border-r-2 text-[12px] relative group",j?"py-3 px-2":"p-2",s.isSelectAllHovered&&"bg-gray-200",s.selectedRows?.has(e)&&"bg-gray-200",e===d?.column&&"bg-[#f2f2f2]"),"data-cy":`dataframe-row-display-cell-${e}`,onClick:t=>{t.target.closest("[data-expansion-button]")||s.handleRowClick(e)},children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:parseInt(String((()=>{if(r&&Array.isArray(r)){let t=r[e];return"object"==typeof t&&null!==t?JSON.stringify(t):t}return e})()))+1}),(0,t.jsx)("button",{"data-expansion-button":!0,onClick:t=>{t.stopPropagation(),l.toggleRowExpansion(e)},className:"opacity-0 group-hover:opacity-100 p-0.5 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-all",title:j?"Collapse row":"Expand row",children:j?(0,t.jsx)(k.ChevronDown,{size:12}):(0,t.jsx)(R.ChevronRight,{size:12})})]})}),Array.isArray(a)&&a.slice(0,100).map((a,r)=>(0,t.jsx)(I,{enableCellEdit:u,cell:a,columnIndex:r,rowIndex:e,onMouseDown:c&&"function"==typeof s.handleMouseDown?s.handleMouseDown:()=>{},onMouseEnter:c&&"function"==typeof s.handleMouseEnter?s.handleMouseEnter:()=>{},onMouseUp:c&&"function"==typeof s.handleMouseUp?s.handleMouseUp:()=>{},isSelected:c&&"function"==typeof s.isSelected?s.isSelected:()=>!1,suggestedHeaderRow:e===d?.column,isRowExpanded:j,expandedColumns:l.expandedColumns,onToggleRowExpansion:l.toggleRowExpansion,onToggleColumnExpansion:l.toggleColumnExpansion},r))]}),_=w?v.blankRowsRef:y?v.headerFixRef:void 0;return(0,t.jsxs)(eh,{children:[n?(0,t.jsx)(eg,{asChild:!0,children:(0,t.jsx)("tr",{ref:_,className:(0,h.cn)("hover:bg-transparent transition-all duration-200",n&&"outline outline-[1px] outline-red-500",j&&"h-auto"),onMouseEnter:M,onMouseLeave:E,children:D})}):(0,t.jsx)("tr",{ref:_,className:(0,h.cn)("hover:bg-transparent transition-all duration-200",j&&"h-auto"),onMouseEnter:M,onMouseLeave:E,"data-cy":"dataframe-row-display",children:D}),c&&(0,t.jsx)(ep,{children:(()=>{if(p)return null;let a=i.editingDataframe||i.validatingDataframe||i.fixingDataframe,r=!N()&&g?.[f]?.issues?.empty_rows_indices?.includes(e);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ef,{onClick:()=>l.toggleRowExpansion(e),children:(0,t.jsxs)("div",{className:"flex items-center",children:[j?(0,t.jsx)(k.ChevronDown,{size:12,className:"mr-2"}):(0,t.jsx)(R.ChevronRight,{size:12,className:"mr-2"}),(0,t.jsx)("span",{children:j?"Collapse Row":"Expand Row"})]})}),g?.[f]?.issues&&(0,t.jsxs)(t.Fragment,{children:[g?.[f]?.issues?.column_headers_on_row===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ef,{disabled:a,onClick:()=>d.onClick?.(!0,f),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(S.Check,{size:12,className:"mr-2"}),(0,t.jsx)("span",{children:"Make Header"})]})}),N()&&(0,t.jsx)(ef,{disabled:a,onClick:()=>d.onClick?.(!1,f),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(A.X,{size:12,className:"mr-2"}),(0,t.jsx)("span",{children:"Ignore"})]})})]}),r&&(0,t.jsx)(ev,{editingDataframe:i.editingDataframe,validatingDataframe:i.validatingDataframe,fixingDataframe:i.fixingDataframe,isExcelFile:N,rowIssue:o,fixBlankRows:m})]})]})})()})]},e)});eb.displayName="TableRow";let ev=({editingDataframe:e,validatingDataframe:a,fixingDataframe:r,isExcelFile:n,rowIssue:o,fixBlankRows:s})=>{let l=e||a||r;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ef,{disabled:l,onClick:()=>n()?s(!0,o?.sheetName):s(!0),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(S.Check,{size:12,className:"mr-2"}),(0,t.jsx)("span",{children:"Fix Blank Rows"})]})}),(0,t.jsx)(ef,{disabled:l,onClick:()=>n()?s(!1,o?.sheetName):s(!1),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(A.X,{size:12,className:"mr-2"}),(0,t.jsx)("span",{children:"Ignore"})]})})]})};function ew(){let{rows:e,columns:a,index:r,applyRowLimit:n,hoveredIssueIndex:o,allSheetIssues:s,currentSheet:l,maxRowsVisible:i}=C();if(!e||0===e.length)return(0,t.jsx)("tbody",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:a?.length+1||1,className:"text-center text-muted-foreground text-xs",children:"No rows to display"})})});let d=n?e.slice(0,i):e;return(0,t.jsx)("tbody",{children:d.map((e,a)=>{let n=Array.isArray(o)?o.includes(a):o===a,i=s.find(e=>e.sheetName===l&&(Array.isArray(e.details)?e.details.includes(a):e.details===a));return(0,t.jsx)(eb,{rowIndex:a,row:e,index:r,isIssueRow:n,rowIssue:i},a)})})}var ey=e.i(116019);let ej=({col:e,columnIndex:a})=>{let r,{sheetName:n,selection:o,expansion:s,editing:l,enableRightClick:i,editDataframe:d,activeConversationId:c,allSheetIssues:u,columnTooltips:x}=C(),g=l.editingDataframe||l.validatingDataframe||l.fixingDataframe,p=s.expandedColumns.has(a),f=x?.[a],b=e=>{e.target.closest("[data-expansion-button]")||o.handleColumnClick(a)},v=(0,t.jsx)("th",{onClick:b,className:(0,h.cn)("cursor-pointer select-text p-2 bg-gray-100 dark:bg-red-400 text-muted-foreground hover:bg-gray-200 border-b-2 border-r-2 border-border font-medium relative group",p?"min-w-80 max-w-none":"min-w-20 max-w-xs",o.isSelectAllHovered&&"bg-gray-200",o.selectedColumns?.has(a)&&"bg-gray-200"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:(0,h.cn)(p?"whitespace-normal break-words":"truncate"),children:"object"==typeof e?JSON.stringify(e):e}),(0,t.jsx)("button",{"data-expansion-button":!0,onClick:e=>{e.stopPropagation(),s.toggleColumnExpansion(a)},className:"opacity-0 group-hover:opacity-100 ml-2 p-0.5 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-all",title:p?"Collapse column":"Expand column",children:p?(0,t.jsx)(k.ChevronDown,{size:12,className:"rotate-90"}):(0,t.jsx)(R.ChevronRight,{size:12,className:"rotate-90"})})]})}),w=(0,t.jsx)("th",{onClick:b,className:(0,h.cn)("cursor-pointer select-text p-2 bg-gray-100 dark:bg-red-800 text-muted-foreground hover:bg-gray-200 border-b-2 border-r-2 border-border font-medium relative group",p?"min-w-80 max-w-none":"min-w-20 max-w-xs",o.isSelectAllHovered&&"bg-gray-200",o.selectedColumns?.has(a)&&"bg-gray-200"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:(0,h.cn)(p?"whitespace-normal break-words":"truncate"),children:"object"==typeof e?JSON.stringify(e):e}),(0,t.jsx)("button",{"data-expansion-button":!0,onClick:e=>{e.stopPropagation(),s.toggleColumnExpansion(a)},className:"opacity-0 group-hover:opacity-100 ml-2 p-0.5 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-all",title:p?"Collapse column":"Expand column",children:p?(0,t.jsx)(k.ChevronDown,{size:12,className:"rotate-90"}):(0,t.jsx)(R.ChevronRight,{size:12,className:"rotate-90"})})]})});return(0,t.jsxs)(eh,{children:[(r=c||0===u.length||u.every(e=>"formattingIssues"===e.issue)?(0,t.jsx)(eg,{asChild:!0,children:v}):w,f?(0,t.jsx)(m.TooltipProvider,{children:(0,t.jsxs)(m.Tooltip,{children:[(0,t.jsx)(m.TooltipTrigger,{asChild:!0,children:r}),(0,t.jsx)(m.TooltipContent,{children:(0,t.jsx)("p",{children:f})})]})}):r),i&&(0,t.jsxs)(ep,{children:[(0,t.jsx)(ef,{onClick:()=>s.toggleColumnExpansion(a),children:(0,t.jsxs)("div",{className:"flex items-center",children:[p?(0,t.jsx)(k.ChevronDown,{size:12,className:"mr-2 rotate-90"}):(0,t.jsx)(R.ChevronRight,{size:12,className:"mr-2 rotate-90"}),(0,t.jsx)("span",{children:p?"Collapse Column":"Expand Column"})]})}),!c&&0===u.length||u.every(e=>"formattingIssues"===e.issue)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(ef,{className:"flex gap-2",disabled:g,onClick:()=>{d({type:"deleteColumn",columnIndex:a,sheet_name:n})},children:[(0,t.jsx)(ey.Trash,{size:12})," Delete Column"]}),(0,t.jsxs)(ef,{className:"flex gap-2",disabled:g,onClick:()=>{d({type:"deleteRow",rowIndex:0,sheet_name:n})},children:[(0,t.jsx)(ey.Trash,{size:12})," Delete Row (Headers)"]})]}):null]})]},a)};function eC({isAllSelected:e}){let{selection:a}=C();return(0,t.jsx)("th",{className:(0,h.cn)("p-2 cursor-pointer bg-gray-100 dark:bg-neutral-900 select-none hover:bg-gray-200 transition-colors",a.isSelectAllHovered&&"bg-gray-200"),onMouseEnter:()=>a.setIsSelectAllHovered(!0),onMouseLeave:()=>a.setIsSelectAllHovered(!1),onClick:a.handleSelectAll,title:"Click to select all columns & rows",children:(0,t.jsx)("div",{className:"w-3 h-3 text-xs border border-gray-400 rounded-sm flex items-center justify-center text-gray-500",children:(0,t.jsx)("span",{children:e?"âœ“":""})})})}function eN(){let{columns:e,rows:a,hasHeaderIssues:r,fixedHeader:n,selection:o}=C(),s=o.selectedRows?.size===a?.length;return(0,t.jsx)("thead",{className:(0,h.cn)("",n&&"sticky top-0 z-10 bg-white dark:bg-neutral-900"),children:(0,t.jsxs)("tr",{className:(0,h.cn)({"bg-red-200 dark:bg-red-500":r}),children:[(0,t.jsx)(eC,{isAllSelected:s}),Array.isArray(e)&&e.slice(0,100).map((e,a)=>(0,t.jsx)(ej,{col:e,columnIndex:a},a))]})})}function eS({maxHeight:e}){let{fixedHeader:a,editing:r,currentSheet:n,embedded:o,dataframeProps:s}=C();return(0,t.jsx)("div",{className:(0,h.cn)((a||e)&&"overflow-x-auto overflow-y-auto",a&&!e&&(o?"max-h-[calc(100vh-10rem)]":"max-h-[calc(100vh-30rem)]")),style:{scrollbarWidth:a||e?"thin":void 0,...e&&{maxHeight:e}},children:(0,t.jsxs)("table",{className:(0,h.cn)("text-muted-foreground border-separate mixedContentDisplayComponent transition-all",(r.editingDataframe||r.validatingDataframe||r.fixingDataframe)&&"animate-pulse",o?"dataframe-table-display-embedded":"mt-2 border border-[#ddd] dark:border-gray-700",s?.sheets&&Object.keys(s.sheets).length>0?"rounded-t-md":"rounded-md"),"data-cy":"dataframe-table-display",children:[(0,t.jsx)(eN,{}),(0,t.jsx)(ew,{})]})},n+"table")}function ek({scrollContainerRef:e}){let{dataframeProps:r,currentSheet:n,setCurrentSheet:o,fileValidationInfo:s}=C(),l=(0,a.useRef)(null);return!r?.sheets||Object.keys(r.sheets).length<1?null:(0,t.jsx)("div",{ref:l,className:"border border-border rounded-b-md flex items-center gap-1 bg-card dark:bg-muted py-1 px-2",children:(0,t.jsx)("div",{className:"overflow-hidden w-full",children:(0,t.jsx)("div",{ref:e,className:"flex items-center overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:Object.keys(r.sheets).map((e,a)=>{let r=s?.[e],l=+!!(r?.issues?.column_headers_on_row>-1&&r?.issues?.column_headers_on_row!==null)+ +(r?.issues?.empty_rows_indices?.length>0);return(0,t.jsxs)("button",{type:"button",onClick:t=>{t.preventDefault(),o(e)},onMouseDown:e=>e.preventDefault(),className:`p-2 text-xs font-regular transition-all rounded-md duration-150 flex items-center justify-center ${n===e?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-sidesecondary"}`,style:{minWidth:"fit-content"},children:[(0,t.jsx)("span",{className:"text-center",children:e}),l>0&&(0,t.jsx)("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-amber-400 text-xs font-semibold text-slate-950 ml-1",children:l})]},`${e}-${a}`)})})})})}let eR=(0,o.default)(()=>e.A(615886),{loadableGenerated:{modules:[477676]},ssr:!1}),eA=({filename:e,showInteractivePlot:o,maxHeight:c})=>{let{columns:u,rows:m,sheetName:x,currentSheet:g,embedded:p,dataframeProps:b}=C(),{useInteractive:v,setUseInteractive:w}=(0,i.useChatContext)(),y=(0,a.useRef)(null);!function(){let{issueScrollingRefs:e,currentSheet:t}=C(),{blankRowsRef:r,headerFixRef:n,firstBlankRowIndex:o,headerFixRowIndex:s}=e;(0,a.useEffect)(()=>{let e=()=>{let e=void 0!==o&&(void 0===s||o<s)?r:n;e.current?.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})};e();let t=h.eventEmitter.addListener("navigateToBadSheet",e);return()=>{t.remove()}},[o,s,t,r,n])}();let[j,N]=(0,a.useState)(null);return(0,t.jsxs)("div",{className:"w-full",children:[o&&(0,t.jsx)(l.Tabs,{value:v?"interactive":"static",defaultValue:"interactive",className:"sticky top-0 z-50 flex justify-start w-auto pt-4 bg-background border-b border-border mb-3",children:(0,t.jsxs)(l.TabsList,{className:"flex w-auto bg-transparent p-0 gap-1.5 border-0",children:[(0,t.jsxs)(l.TabsTrigger,{value:"static",className:"flex items-center gap-1 p-2 text-sm font-medium transition-all duration-200 data-[state=active]:text-foreground hover:bg-transparent hover:text-foreground bg-transparent text-muted-foreground relative data-[state=active]:after:content-[''] data-[state=active]:after:absolute data-[state=active]:after:bottom-0 data-[state=active]:after:left-0 data-[state=active]:after:right-0 data-[state=active]:after:h-0.5 data-[state=active]:after:bg-primary data-[state=active]:after:rounded-t-md data-[state=active]:shadow-none",onClick:()=>w(!1),children:[(0,t.jsx)(n.Table,{className:"w-4 h-4"}),"Overview"]}),(0,t.jsxs)(l.TabsTrigger,{value:"interactive",className:"flex items-center gap-1 p-2 text-sm font-medium transition-all duration-200 data-[state=active]:text-foreground hover:bg-transparent hover:text-foreground bg-transparent text-muted-foreground relative data-[state=active]:after:content-[''] data-[state=active]:after:absolute data-[state=active]:after:bottom-0 data-[state=active]:after:left-0 data-[state=active]:after:right-0 data-[state=active]:after:h-0.5 data-[state=active]:after:bg-primary data-[state=active]:after:rounded-t-md data-[state=active]:shadow-none",onClick:()=>{s.default.capture("quick_plot_experiment_button_clicked"),w(!0)},children:[(0,t.jsx)(r.BarChart3,{className:"w-4 h-4"}),"Charts"]})]})}),(0,t.jsxs)("div",{className:"overflow-x-auto overflow-y-auto",children:[o&&(0,t.jsx)(f,{rows:m,columns:u,handleClickPlotSuggestion:e=>{N(e),w(!0)}},g+"suggestions"),o&&(0,t.jsx)(d,{}),(0,t.jsxs)("div",{children:[(p||!v)&&(0,t.jsx)(eS,{maxHeight:c},g+"table"),!["csv"].includes(b?.filename?.split(".").pop()?.toLowerCase()||"")&&!(o&&v)&&(0,t.jsx)(ek,{scrollContainerRef:y})]}),v&&o&&(0,t.jsx)(eR,{clickedPlotSuggestion:j,setClickedPlotSuggestion:N,columns:u,filename:e,sheetName:x})]})]})};e.s(["DataframeDisplay",0,({embedded:e=!1,filename:a=null,index:r,columns:n,rows:o,hasHeaderIssues:s=!1,blankRows:l=[],sheetName:i=null,editDataframe:d=()=>{},headerFix:c={},enableRightClick:u=!1,fixBlankRows:m=()=>{},juliusMessageId:x=null,juliusDfSelectorIndex:h=null,showInteractivePlot:g=!1,applyRowLimit:p=!0,columnTooltips:f=null,enableCellEdit:b=!1,fixedHeader:v=!0,maxHeight:w=null,maxRowsVisible:y=50})=>(0,t.jsx)(N,{columns:n,rows:o,index:r,sheetName:i,embedded:e,hasHeaderIssues:s,fixedHeader:v,applyRowLimit:p,editDataframe:d,headerFix:c,enableRightClick:u,fixBlankRows:m,enableCellEdit:b,juliusMessageId:x,juliusDfSelectorIndex:h,columnTooltips:f,blankRows:l,maxRowsVisible:y,children:(0,t.jsx)(eA,{filename:a,showInteractivePlot:g,maxHeight:w})})],277604)}]);

//# debugId=a17ae68b-c83a-d8de-509a-5f3d6af74e37
//# sourceMappingURL=f4b04b18538878d7.js.map