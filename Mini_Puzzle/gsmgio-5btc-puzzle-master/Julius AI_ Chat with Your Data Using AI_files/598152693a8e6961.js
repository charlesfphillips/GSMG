;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="9cc16b3d-3eed-4ad2-69f3-fbb20e31c16a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14606,e=>{"use strict";let l=(0,e.i(475254).default)("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);e.s(["UsersRound",()=>l],14606)},701417,e=>{"use strict";var l=e.i(990633);e.s(["CloudUpload",()=>l.default])},11784,350199,957040,e=>{"use strict";var l=e.i(843476),t=e.i(271645),s=e.i(773816),s=s,a=e.i(604570),i=e.i(565489),r=e.i(759875),n=e.i(647163),o=e.i(618566);let d=(0,t.createContext)(void 0),c=()=>{let e=(0,t.useContext)(d);if(void 0===e)throw Error("useFilesContext must be used within a FilesProvider");return e};e.s(["default",0,({children:e})=>{let{teamId:s}=(0,o.useParams)(),{groupId:a}=(0,o.useParams)(),i=(0,t.useMemo)(()=>void 0!==s&&void 0===a,[s,a]),r=(0,t.useMemo)(()=>void 0!==s&&void 0!==a,[s,a]);return(0,l.jsx)(d.Provider,{value:{inTeamFiles:i,teamId:s,inTeamGroupFiles:r,groupId:a},children:e})},"useFilesContext",0,c],350199);var u=e.i(52563),m=e.i(912598),x=e.i(682830),f=e.i(152990),h=e.i(822315),p=e.i(472856),g=e.i(895751),w=e.i(664659),j=e.i(655900),b=e.i(352558);let y=(0,e.i(475254).default)("cloud-download",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);var v=e.i(686311),N=e.i(555436),C=e.i(116019),k=e.i(89128),S=e.i(531278),D=e.i(846696),T=e.i(889435),_=e.i(483202),M=e.i(167881),A=e.i(625959),R=e.i(671428),F=e.i(728231),I=e.i(367944),U=e.i(23750),z=e.i(600634),P=e.i(808973),L=e.i(915505),O=e.i(323585),E=e.i(727612),B=e.i(14606),V=e.i(796610),H=e.i(463415),$=e.i(770703);e.i(971804);var Y=e.i(511108),q=e.i(127341);let G=(0,$.default)(()=>e.A(155103).then(e=>e.SheetHeadView),{loadableGenerated:{modules:[974905]},ssr:!1}),J=({filename:e,setExtraModalOpen:s})=>{let[a,i]=(0,t.useState)(null),[r,n]=(0,t.useState)(!0),[o,d]=(0,t.useState)({}),[c,u]=(0,t.useState)({}),[m,x]=(0,t.useState)(!1),[f,h]=(0,t.useState)(!1),{setSheetHeaders:p,getFileContexts:g}=(0,Y.useChatAPI)(),b=e.split(".")[0],y=`${b}.`,v=async()=>{h(!0),await p(e,c),h(!1),s(!1)};return(0,t.useEffect)(()=>{(async()=>{x(!0);let l=await g(!1,e);if(x(!1),!l?.[e])return;d(l[e].sheets),l[e].sheets&&i(Object.keys(l[e].sheets)[0]);let t={};Object.keys(l[e].sheets).forEach(s=>{let a=l[e].sheets[s].header_rows;a||(a=[]),t[s]=a}),u(t)})()},[e]),(0,l.jsx)(l.Fragment,{children:m?(0,l.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin text-muted-foreground"}):(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsxs)(M.Button,{className:"space-x-2",variant:"outline",size:"sm",onClick:()=>n(!r),children:[r?(0,l.jsx)(j.ChevronUp,{className:"w-4 h-4"}):(0,l.jsx)(w.ChevronDown,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"text-xs",children:e})]}),r&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(q.Tabs,{defaultValue:a,className:"overflow-x-scroll max-w-7xl",children:[o&&Object.keys(o).map(e=>(0,l.jsx)(q.TabsContent,{value:e,className:"max-h-[400px] flex overflow-y-scroll",children:(0,l.jsx)(G,{columnsDict:o?.[e]?.columns,data:[Object.fromEntries(Object.entries(o?.[e]?.columns||{}).map(([e])=>[e,e])),...o?.[e]?.content_preview||[]],selectedRows:c[e],updateSelectedRows:l=>{let t=Object.entries(l).filter(([,e])=>!0===e).map(([e])=>parseInt(e,10));u(l=>({...l,[e]:t}))}})},e)),(0,l.jsx)(q.TabsList,{children:Object.keys(o).map(e=>(0,l.jsx)(q.TabsTrigger,{value:e,className:"text-xs",children:e.replace(y,"")},e))})]})}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(M.Button,{className:"mt-2 space-x-2",onClick:v,children:f?(0,l.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin text-muted-foreground"}):(0,l.jsx)("span",{children:"Save"})})})]})})};var K=e.i(630374);let Q=({filename:e,extraModalOpen:t,setExtraModalOpen:s})=>(0,l.jsx)(K.Dialog,{open:t,onOpenChange:s,children:(0,l.jsxs)(K.DialogContent,{className:"max-w-7xl",children:[(0,l.jsxs)(K.DialogHeader,{children:[(0,l.jsx)(K.DialogTitle,{className:"text-center",children:"Select header rows for each sheet"}),(0,l.jsx)(K.DialogDescription,{className:"text-center",children:"Check the box next to each column that contains the header for your table"})]}),(0,l.jsx)(J,{filename:e,setExtraModalOpen:s})]})}),W=(0,t.memo)(function({filename:e,fileId:s,filepath:r}){let[n,d]=(0,t.useState)(!1),{downloadRemoteFile:m}=(0,_.useUserAPI)(),{teamId:x,inTeamFiles:f}=c(),{mutate:h,isPending:p}=(0,i.useDeleteFile)({teamId:x}),{getAccessTokenSilently:g}=(0,u.useAuth0)(),{mutateAsync:w}=(0,i.useTransferFile)(),{data:j}=(0,V.useCurrentTeam)(),{data:b}=(0,V.useTeams)(),v=(0,o.useRouter)(),N=({to:l,from:t,teamId:a})=>{D.toast.promise(w({fileId:s,filepath:e,to:l,from:t,teamId:a}),{loading:`Transferring ${e}...`,success:"File transferred successfully.",error:e=>e.error})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Q,{filename:e,extraModalOpen:n,setExtraModalOpen:d}),(0,l.jsxs)(H.DropdownMenu,{children:[(0,l.jsx)(H.DropdownMenuTrigger,{asChild:!0,children:(0,l.jsx)(M.Button,{"data-event":"my_files_three_button_menu",variant:"ghost",size:"sm",disabled:p,onClick:e=>e.stopPropagation(),children:p?(0,l.jsx)(S.Loader2,{className:"animate-spin",size:16}):(0,l.jsx)(O.MoreVertical,{size:16})})}),(0,l.jsxs)(H.DropdownMenuContent,{className:"flex flex-col",children:[f?(0,l.jsxs)(H.DropdownMenuItem,{"data-event":"teams/files/copy_team_file_to_my_files",onClick:()=>{N({to:"hub",from:"team",teamId:x})},children:[(0,l.jsx)(y,{className:"w-4 h-4 font-bold mr-2"}),"Copy to my files"]}):(0,l.jsx)(l.Fragment,{children:b&&b.length>1?(0,l.jsxs)(H.DropdownMenuSub,{children:[(0,l.jsxs)(H.DropdownMenuSubTrigger,{className:"relative flex text-xs select-none items-center cursor-pointer rounded-lg px-3 h-8 outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 gap-2","data-event":"teams/files/copy_file_to_team_files",children:[(0,l.jsx)(L.ArrowLeftRight,{className:"w-4 h-4 font-bold"}),"Copy to team files"]}),(0,l.jsx)(H.DropdownMenuSubContent,{children:b.map(e=>(0,l.jsx)(H.DropdownMenuItem,{onClick:()=>{N({to:"team",from:"hub",teamId:e.id})},children:e.team_name},e.id))})]}):b&&1===b.length?(0,l.jsxs)(H.DropdownMenuItem,{disabled:!j?.details,onClick:()=>{N({to:"team",from:"hub",teamId:j?.details?.id})},children:[(0,l.jsx)(L.ArrowLeftRight,{className:"w-4 h-4 font-bold mr-2"}),"Copy to team files"]}):(0,l.jsxs)(H.DropdownMenuItem,{onClick:()=>{v.push("/settings/teams")},children:[(0,l.jsx)(B.UsersRound,{className:"w-4 h-4 font-bold mr-2"}),"Share with team"]})}),(0,l.jsxs)(H.DropdownMenuItem,{"data-event":"my_files_download",onClick:()=>{D.toast.promise(async()=>{if(x){let l=await g();if(!s)throw Error("File ID is missing");return a.default.capture("teams/files/download",{filename:e}),(0,T.downloadTeamFile)({filename:e,fileId:s,teamId:x,accessToken:l})}return r?m(r):m(e)},{loading:`Downloading ${e}...`,success:"Your download has finished successfully.",error:e=>e.error})},children:[(0,l.jsx)(y,{className:"w-4 h-4 font-bold mr-2"}),"Download"]}),(0,l.jsxs)(H.DropdownMenuItem,{"data-event":"my_files_delete",onClick:()=>{h({filepath:r,fileId:s})},children:[(0,l.jsx)(E.Trash2,{className:"w-4 h-4 font-bold mr-2"}),"Delete"]})]})]})]})});h.default.extend(g.default),h.default.extend(p.default);let X=(0,x.createColumnHelper)(),Z=()=>{let{handleAddAttachments:e,startConversation:s,isFreeUser:r,setModal:o}=(0,I.useChatContext)(),{downloadRemoteFile:d}=(0,_.useUserAPI)(),{teamId:p,inTeamFiles:g,groupId:L,inTeamGroupFiles:O}=c(),[E,B]=(0,t.useState)(!1),{data:V,isLoading:H,isError:$,isSuccess:Y}=(0,i.useFiles)({teamId:p,groupId:L,enabled:!0}),{getAccessTokenSilently:q}=(0,u.useAuth0)(),G=(0,m.useQueryClient)(),{mutateAsync:J}=(0,i.useTransferFile)(),K=(0,i.useDeleteFile)({teamId:p}),Q=(0,t.useCallback)(l=>{if(r&&l.length>1){o("subscribe"),a.default.capture("upgrade_cta_shown",{type:"modal",name:"multiple_files",location:"files"});return}B(!0),e(l),D.toast.promise(async()=>{if(g){let e=G.getQueryData(["files"])??[],t=[];l.forEach(l=>{if(!e.find(e=>e.name===l.name)){let e=J({from:"team_bucket",to:"hub",fileId:l.id,filepath:l.name,teamId:p});t.push(e)}}),await Promise.all(t)}a.default.capture("teams/files/chat_with_file"),await s({navigate:!0,files:l}),B(!1)},{loading:"Please wait while we start your new conversation..."})},[e,g,r,G,o,s,p,J]),Z=(0,t.useMemo)(()=>{let e=[X.display({id:"select",size:1,maxSize:1,header:({table:e})=>(0,l.jsx)("div",{className:"flex flex-row gap-3",children:(0,l.jsx)(A.Checkbox,{checked:e.getIsAllRowsSelected(),onCheckedChange:l=>{"indeterminate"===l?e.toggleAllRowsSelected(!1):e.toggleAllRowsSelected(!!l)},"aria-label":"Select all"})}),cell:({row:e})=>(0,l.jsx)(A.Checkbox,{disabled:e.original?.isDeleting,checked:e.getIsSelected(),onCheckedChange:l=>{"indeterminate"===l?e.toggleSelected(!1):e.toggleSelected(!!l)}})}),X.accessor("name",{id:"name",minSize:0,maxSize:300,cell:e=>{let t=e?.getValue(),s=(0,z.getIcon)(t),a=(0,z.getIconColor)(t);return(0,l.jsxs)("div",{className:"flex flex-row items-center gap-3 truncate w-full","data-cy":"files-table-row-name",children:[(0,l.jsx)(s,{className:`text-${a}`}),(0,l.jsxs)(F.Tooltip,{children:[(0,l.jsx)(F.TooltipTrigger,{asChild:!0,children:(0,l.jsx)("span",{className:"max-w-[350px] truncate",children:t})}),(0,l.jsx)(F.TooltipContent,{className:"text-wrap break-all max-w-full",children:t})]})]})},header:()=>(0,l.jsx)("span",{children:"Name"})}),X.accessor("size",{id:"size",cell:e=>{let t=e.getValue(),{size:s,unit:a}=(0,z.formatBytes)(t),i=`${s??"0"} ${a??"B"}`;return(0,l.jsxs)(F.Tooltip,{children:[(0,l.jsx)(F.TooltipTrigger,{"data-cy":"files-table-row-size",children:i}),(0,l.jsxs)(F.TooltipContent,{children:[t?.toLocaleString()||"Unknown"," bytes"]})]})},header:()=>(0,l.jsx)("span",{children:"Size"}),sortingFn:(e,l)=>e.original.size-l.original.size}),X.accessor("created",{id:"created",cell:e=>{let t=e.cell.row.original;if(t.isUploading)return(0,l.jsxs)("div",{children:[(0,l.jsxs)("span",{className:"flex gap-2 items-center text-xs text-light text-muted-foreground",children:[(0,l.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin"}),100===t.percentComplete?"Julius is analyzing...":"Uploading File..."]}),(0,l.jsx)(P.default,{percent:t.percentComplete,progressColor:100===t.percentComplete?"purple-500":"blue-500"})]});let s=e.getValue(),a=h.default.utc(s).local(),i=a.fromNow(),r=a.format("MMMM D, YYYY h:mm A");return(0,l.jsxs)(F.Tooltip,{children:[(0,l.jsx)(F.TooltipTrigger,{children:i}),(0,l.jsx)(F.TooltipContent,{children:r})]})},header:()=>"Upload Date",sortingFn:(e,l)=>{let t=e.original.created?(0,h.default)(e.original.created).valueOf():0;return(l.original.created?(0,h.default)(l.original.created).valueOf():0)-t}}),X.display({id:"menu",header:null,size:1,maxSize:1,cell:({row:e})=>(0,l.jsxs)("div",{className:"flex flex-row justify-end",children:[(0,l.jsxs)(F.Tooltip,{children:[(0,l.jsx)(F.TooltipTrigger,{asChild:!0,children:(0,l.jsx)(M.Button,{variant:"ghost",size:"sm",className:"gap-2",onClick:()=>{Q([e.original])},disabled:!!E||e.original?.isDeleting,children:E===e.id||e.original?.isDeleting?(0,l.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin"}):(0,l.jsx)(v.MessageSquare,{className:"w-4 h-4"})})}),(0,l.jsx)(F.TooltipContent,{children:"Chat with this file"})]}),(0,l.jsx)(W,{filename:e.original.name,filepath:e?.original?.path,fileId:e.original.id})]})})];return H?e.map(e=>({...e,cell:()=>(0,l.jsx)(R.Skeleton,{className:"flex h-[36px] w-full"})})):e},[Q,H,E]),ee=(0,t.useMemo)(()=>H?z.skeletonFiles:V?V.map(e=>{let l=e.name||"Unknown.txt",t=(0,z.getAttachmentType)(l);return{...e,name:l,extension:t??""}}):[],[V,H]),el=(0,f.useReactTable)({columns:Z,data:ee,getCoreRowModel:(0,x.getCoreRowModel)(),getSortedRowModel:(0,x.getSortedRowModel)(),getFilteredRowModel:(0,x.getFilteredRowModel)(),columnResizeDirection:"ltr",columnResizeMode:"onChange",initialState:{sorting:[{id:"created",desc:!1}]}});(0,t.useEffect)(()=>{let e=()=>V&&V.length>0&&V.some(e=>e.isUploading);return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[V]);let et=el.getSelectedRowModel().flatRows.length,es=(0,t.useCallback)(async e=>{e.stopPropagation();let l=el.getSelectedRowModel().flatRows.map(e=>e.original);D.toast.promise(async()=>{for(let e of l){let l=e.name,t=e.path;if(p){let t=await q();if(!e.id)throw Error("File ID is missing");await (0,T.downloadTeamFile)({filename:l,fileId:e.id,teamId:p,accessToken:t})}else await d(t||l)}},{loading:`Downloading ${l.length} file${l.length>1?"s":""}...`,success:"Files downloaded successfully",error:"An error occurred while downloading files. Please try again."})},[d,q,el,p]),ea=el.getColumn("name"),ei=!el.getIsSomeRowsSelected()&&!el.getIsAllRowsSelected()||H||!!E;return(0,l.jsxs)("div",{className:"flex flex-col w-full h-full overflow-auto bg-background rounded-2xl border border-input",children:[(0,l.jsxs)("div",{className:"flex flex-row flex-wrap gap-3 justify-between p-5",children:[(0,l.jsxs)("div",{className:"flex flex-row flex-1 items-center relative rounded-lg border border-input pr-3 px-2 py-1 gap-2",children:[(0,l.jsx)(N.Search,{className:"h-4 w-4 text-muted-foreground"}),(0,l.jsx)(U.Input,{className:"flex flex-1 bg-transparent h-6 p-0 border-none focus-visible:ring-0 text-sm placeholder:text-light",onChange:e=>ea.setFilterValue(e.target.value),placeholder:"Search files...",type:"text",value:ea.getFilterValue()??""})]}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-2",children:[(0,l.jsxs)(M.Button,{variant:"outline",size:"sm",className:"gap-2 flex-1",onClick:es,disabled:ei,children:[(0,l.jsx)(y,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:["Download"," ",(0,l.jsxs)("span",{className:"inline-flex items-center !w-5",children:["(",et,")"]})]})]}),(0,l.jsxs)(M.Button,{"data-cy":"delete-files-button",variant:"outline",size:"sm",className:"gap-2 flex-1",onClick:()=>{for(let e of el.getSelectedRowModel().flatRows.map(e=>e.original))K.mutate({filepath:e.path,fileId:e?.id});el.toggleAllRowsSelected(!1)},disabled:ei,children:[(0,l.jsx)(C.Trash,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:["Delete"," ",(0,l.jsxs)("span",{className:"inline-flex items-center !w-5",children:["(",et,")"]})," "]})]}),(0,l.jsxs)(M.Button,{"data-cy":"chat-with-files-button",variant:"outline",size:"sm",className:"gap-2 flex-1",disabled:ei,onClick:()=>{Q(el.getSelectedRowModel().flatRows.map(e=>e.original))},children:[!0===E?(0,l.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin"}):(0,l.jsx)(v.MessageSquare,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:["Chat with files"," ",(0,l.jsxs)("span",{className:"inline-flex items-center !w-5",children:["(",et,")"]})]})]})]})})]}),(0,l.jsx)("div",{className:"w-full bg-background min-h-[275px] h-full dark:bg-neutral-900 overflow-auto",children:(0,l.jsxs)("table",{className:"w-full relative overflow-x-auto",children:[(0,l.jsx)("thead",{className:"sticky top-0 bg-background border-b border-input",children:el.getHeaderGroups().map(e=>(0,l.jsx)("tr",{children:e.headers.map(e=>(0,l.jsx)("th",{colSpan:e.colSpan,className:"relative font-medium hover:bg-sidesecondary first:pl-8 p-4",children:e.isPlaceholder?null:(0,l.jsxs)("div",{className:(0,n.cn)(e.column.getCanSort()?"cursor-pointer select-none":"","flex flex-row text-sm items-center justify-between"),onClick:e.column.getToggleSortingHandler(),children:[(0,f.flexRender)(e.column.columnDef.header,e.getContext()),{asc:(0,l.jsx)(j.ChevronUp,{className:"w-4 h-4"}),desc:(0,l.jsx)(w.ChevronDown,{className:"w-4 h-4"})}[e.column.getIsSorted()]??null]})},e.id))},e.id))}),(0,l.jsxs)("tbody",{children:[ee.length>0&&el.getRowModel().rows.map(e=>(0,l.jsx)("tr",{className:(0,n.cn)("text-sm bg-background text-muted-foreground border-b border-input last:border-b-0 hover:bg-sidesecondary cursor-pointer",e.original?.isDeleting&&"animate-pulse",e.getIsSelected()&&"bg-sidesecondary"),onClick:()=>e.toggleSelected(),children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{className:"p-4 first:pl-8 overflow-hidden",style:{width:e.column.getSize()},children:(0,f.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)),$&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:el.getAllColumns().length,className:"py-12 px-3",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full items-center text-muted-foreground text-red-500",children:[(0,l.jsx)(k.TriangleAlert,{className:"w-8 h-8"}),(0,l.jsxs)("span",{className:"text-sm text-center",children:["An error has occurred while fetching files. ",(0,l.jsx)("br",{})," Please try again later."]})]})})}),Y&&0===ee.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:el.getAllColumns().length,className:"py-12 px-3",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full items-center text-muted-foreground",children:[(0,l.jsx)(b.CircleOff,{className:"w-8 h-8"}),!g&&!O&&(0,l.jsxs)("span",{className:"text-center",children:["Hey, it looks like you haven't uploaded any files yet. ",(0,l.jsx)("br",{}),"Upload some files to start chatting with them!"]}),g&&(0,l.jsxs)("span",{className:"text-center",children:["Hey, it looks like your team hasn't uploaded any files yet. ",(0,l.jsx)("br",{}),"Upload some files to start chatting with them!"]}),O&&(0,l.jsxs)("span",{className:"text-center",children:["Hey, it looks like your team group hasn't uploaded any files yet. ",(0,l.jsx)("br",{}),"Upload some files to start chatting with them!"]})]})})})]})]})})]})};var ee=e.i(972520),el=e.i(701417),et=e.i(522016),es=e.i(915492);let ea=()=>{let{filename:e}=(0,es.useSidebarsContext)(),[s,r]=(0,t.useState)(!1),{isFreeUser:o}=(0,I.useChatContext)(),{teamId:d,inTeamFiles:u,groupId:m}=c(),{mutate:x}=(0,i.useUploadFiles)({teamId:d,groupId:m}),f=(0,t.useRef)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Q,{filename:e,extraModalOpen:s,setExtraModalOpen:r}),(0,l.jsxs)("div",{className:(0,n.cn)("flex basis-2/5 flex-row gap-2",u&&"!basis-1/5"),children:[(0,l.jsxs)(M.Button,{variant:"outline","data-cy":"files-upload-file-button","data-event":"chat_primary_new_file",className:"flex !flex-1 flex-row items-center space-x-2 bg-blue-50 border-blue-200 text-blue-600 dark:bg-blue-900/50 dark:border-blue-800 dark:hover:bg-blue-800/50",onClick:()=>f.current.click(),children:[(0,l.jsx)(el.CloudUpload,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Upload file"})]}),(0,l.jsx)("input",{"data-event":"chat_choose_file",type:"file",onChange:e=>{let l=Array.from(e.target.files),t=l.map(e=>({file:e,filename:e.name,onProgress:(e,l)=>{},originatingFunction:"new-file-dropdown"}));a.default.capture("my_files_new_file_uploaded",{fileCount:l.length,uploadMethod:"upload_button",fileTypes:l.map(e=>e.name.split(".").pop()?.toLowerCase()||"unknown")}),x({files:t,preprocess:!1})},multiple:!0,id:"file",ref:f,style:{display:"none"}})]}),(0,l.jsxs)("p",{className:"inline-block gap-1 items-center text-muted-foreground text-sm font-light",children:[!u&&(0,l.jsxs)("span",{children:["All files are deleted after ",(0,l.jsx)("b",{children:o?" 1 hour":" 1 week"})," of inactivity."]}),(0,l.jsx)("br",{}),o&&(0,l.jsxs)(et.default,{href:"/settings",className:"text-primary font-medium",children:["Upgrade to increase this ",(0,l.jsx)(ee.ArrowRight,{className:"inline-block w-3 h-3"})]})]})]})},ei=!0;e.s(["default",0,()=>{let[e,o]=(0,t.useState)(!1),d=(0,t.useRef)(null),{inTeamFiles:u,teamId:m,inTeamGroupFiles:x,groupId:f}=c(),{mutate:h}=(0,i.useUploadFiles)({teamId:m,groupId:f});return(0,t.useEffect)(()=>{u&&ei&&(a.default.capture("teams/files/view"),ei=!1),x&&ei&&(a.default.capture("teams/group-files/view",{groupId:f}),ei=!1)},[u,x,f]),(0,l.jsxs)("div",{className:"flex flex-1 relative flex-col items-center w-full overflow-auto bg-background",children:[(0,l.jsx)(r.default,{heading:x?"Sub Team Files":u?"Team Files":"My Files",subheading:"Uploads and files created Julius",className:"mb-5 px-3 py-2 sticky top-0 z-50 bg-background border-b border-border"}),(0,l.jsxs)("div",{className:"flex flex-col relative rounded-3xl w-full gap-5 max-w-screen-lg px-6 pb-6",children:[(0,l.jsxs)("div",{className:"flex flex-[2] flex-col min-w-[350px] bg-background rounded-2xl border border-input",children:[(0,l.jsxs)("div",{className:"flex flex-col flex-1 p-5",children:[(0,l.jsxs)("div",{className:(0,n.cn)("relative flex flex-col flex-1 items-center justify-center min-h-[150px] gap-3 w-full text-muted-foreground rounded-xl border border-dashed border-gray-200 dark:border-neutral-600 p-3 text-center cursor-pointer",e&&"border-2 border-primary"),onDragEnter:e=>{e.preventDefault(),o(!0)},onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:e=>{e.preventDefault(),o(!1)},onDrop:e=>{e.preventDefault(),o(!1);let l=[];if(e.dataTransfer?.items){for(let t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){let s=e.dataTransfer.items[t].getAsFile();s&&l.push(s)}}let t=l.map(e=>({file:e,filename:e.name,originatingFunction:"files-list"}));h({files:t,preprocess:!1}),a.default.capture("my_files_new_file_uploaded",{fileCount:t.length,uploadMethod:"drag_drop",fileTypes:t.map(e=>e.file.name.split(".").pop()?.toLowerCase()||"unknown")})},onClick:()=>d.current.click(),children:[(0,l.jsx)(s.default,{className:"w-6 h-6"}),(0,l.jsx)("span",{className:"",children:"Drag files to upload"})]}),(0,l.jsx)("input",{"data-event":"chat_choose_file",type:"file",onChange:e=>{let l=Array.from(e.target.files).map(e=>({file:e,filename:e.name,onProgress:()=>{},originatingFunction:"new-file-dropdown"}));a.default.capture("my_files_new_file_uploaded",{fileCount:l.length,uploadMethod:"manual_button",fileTypes:l.map(e=>e.file.name.split(".").pop()?.toLowerCase()||"unknown")}),h({files:l,preprocess:!1})},multiple:!0,id:"file",ref:d,style:{display:"none"}})]}),(0,l.jsx)("div",{className:"flex justify-between items-center flex-col md:flex-row gap-5 px-6 py-3 bg-message rounded-b-2xl border-t border-input",children:(0,l.jsx)(ea,{})})]}),(0,l.jsx)(Z,{})]})]})}],11784);var er=e.i(440160),en=e.i(394073);let eo=()=>(0,l.jsxs)("div",{className:"alert alert-danger max-w-2xl mx-auto mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",style:{textAlign:"center"},children:[(0,l.jsx)("h4",{className:"alert-heading whitespace-pre",children:"File Not Found"}),(0,l.jsx)("p",{children:"We couldn't find the file you're looking for. Are you logged in with the account that created the file? If so, try asking the AI to make the file again; explain you aren't seeing it (sometimes the AI makes mistakes)."}),(0,l.jsxs)("p",{className:"my-4",children:["Check"," ",(0,l.jsx)(et.default,{className:"text-primary underline",href:"/files",children:"the files page"})," ","for all files currently available."]}),(0,l.jsxs)("p",{children:["Contact ",en.FEATURE_FLAGS.SUPPORT_EMAIL," if you're still having trouble."]})]});e.s(["default",0,({filename:e})=>{let[s,a]=(0,t.useState)(!1),i=new URL(window.location.href).searchParams.get("user_id"),{user:r}=(0,u.useAuth0)(),n=r?.sub?.replaceAll("|","_"),o=i&&i!==n,[d,c]=(0,t.useState)(!1),{downloadRemoteFile:m}=(0,_.useUserAPI)();return(0,t.useEffect)(()=>{e&&(c(!0),m(e).catch(()=>{a(!0)}).finally(()=>{c(!1)}))},[e]),(0,l.jsx)("div",{className:"flex items-center justify-center h-full w-full bg-background",children:(0,l.jsxs)("div",{style:{textAlign:"center"},children:[(0,l.jsx)(M.Button,{disabled:d,variant:"outline",onClick:()=>m(e).catch(()=>a(!0)),children:d?(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(S.Loader2,{className:"h-4 w-4 animate-spin"}),(0,l.jsx)("span",{children:"Downloading"})]}):(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(er.Download,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Download"})]})}),!s&&(0,l.jsx)("p",{style:{marginTop:"20px"},children:!o&&"Your download will start automatically."}),s&&!o&&(0,l.jsx)("div",{children:(0,l.jsx)(eo,{})})]})})}],957040)},235263,e=>{"use strict";var l=e.i(843476),t=e.i(618566),s=e.i(11784),a=e.i(350199),i=e.i(957040);e.s(["default",0,()=>{let e=(0,t.useSearchParams)().get("filename");return e?(0,l.jsx)(i.default,{filename:e}):(0,l.jsx)("div",{className:"flex flex-col w-full overflow-hidden relative h-screen",children:(0,l.jsx)(a.default,{children:(0,l.jsx)(s.default,{})})})}])}]);

//# debugId=9cc16b3d-3eed-4ad2-69f3-fbb20e31c16a
//# sourceMappingURL=44daa5c7171e0929.js.map