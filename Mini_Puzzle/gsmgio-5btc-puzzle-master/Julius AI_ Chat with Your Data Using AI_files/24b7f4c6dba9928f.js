;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3c8bd010-6332-24f9-1b4e-95487b71fc2b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,709557,442706,e=>{"use strict";var t,r=e.i(846696),n=e.i(768834),a=e.i(842405),o=e.i(394073);let i={socket:null,workflowId:void 0,getAccessTokenSilently:void 0,isConnected:!1,presences:[],isConnecting:!1,firstConnection:!0},s=(0,n.create)((t,n)=>({...i,reset:()=>{n().disconnect(),t(i)},connect:async(i,s)=>{let{socket:l,workflowId:c}=n();if(t({getAccessTokenSilently:i}),l?.connected&&c===s)return;l&&l.disconnect();let u=await e.A(622025).then(e=>e.io);t({isConnected:!1,isConnecting:!0});let d=await i(),h=u(`${o.SOCKET_URL}/workflows`,{path:"/ws",transports:["websocket","polling"],auth:{token:d,workflowId:s},reconnectionDelay:500,reconnectionAttempts:1/0});t({socket:h}),h.on("connect",()=>{t({isConnected:!0,isConnecting:!1,firstConnection:!1})}),h.on("connect_error",async e=>{let r=e.data?.code,a=e.data?.description??e.message??"";if(401===r||a.toLowerCase().includes("token is expired"))try{let{getAccessTokenSilently:e}=n();if(e){let t=await e();h.auth={...h.auth,token:t},h.disconnected&&h.connect();return}}catch(e){console.warn("[workflows] failed to refresh token on connect_error:",e)}t({isConnected:!1,isConnecting:!1,firstConnection:403===r})}),h.on("reconnect",()=>{console.warn("reconnect success"),t({isConnected:!0,isConnecting:!1})}),h.on("reconnect_attempt",async e=>{console.warn("reconnect attempt, count: ",e);let{socket:r,getAccessTokenSilently:a}=n();a&&(r.auth.token=await a()),t({isConnected:!1,isConnecting:!0})}),h.on("reconnect_failed",e=>{console.warn("reconnect failed, reason:",e),t({isConnected:!1,isConnecting:!1})}),h.on("disconnect",()=>{t({isConnected:!1})}),h.on("presence",e=>{t({presences:e||[]})}),h.on("owner_left",()=>{r.toast.error("The owner has left the notebook; create a new notebook to continue working or wait for them to rejoin.")}),h.on("error",e=>{let t=e?.title||"Unexpected error",n=e?.message||JSON.stringify(e);r.toast.error(t,{description:n})}),h.on("clear_cell",({success:e,conversation_id:t,workflow_step_id:r})=>{e&&a.client.setQueryData(["conversation/messages",t],e=>e?.filter(e=>e.plan_step_id!==r))})},disconnect:()=>{let{socket:e}=n();e&&(e.disconnect(),t({socket:null,isConnected:!1}))},sendData:(e,t)=>{let{socket:r,isConnected:a}=n();return!!r&&!!a&&(r.emit(e,t),!0)},on:(e,t)=>{let{socket:r}=n();return r&&(r.off(e,t),r.on(e,t)),()=>{let{socket:r}=n();r&&r.off(e,t)}}}));e.s(["default",0,s],709557);var l=(t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),c=Object.prototype.hasOwnProperty;function u(e,t){return c.call(e,t)}function d(e){if(Array.isArray(e)){for(var t=Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);var n=[];for(var a in e)u(e,a)&&n.push(a);return n}function h(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function m(e){for(var t,r=0,n=e.length;r<n;){if((t=e.charCodeAt(r))>=48&&t<=57){r++;continue}return!1}return!0}function p(e){return -1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function f(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function v(e,t){var r=[e];for(var n in t){var a="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==a&&r.push(n+": "+a)}return r.join("\n")}var w=function(e){function t(t,r,n,a,o){var i=this.constructor,s=e.call(this,v(t,{name:r,index:n,operation:a,tree:o}))||this;return s.name=r,s.index=n,s.operation=a,s.tree=o,Object.setPrototypeOf(s,i.prototype),s.message=v(t,{name:r,index:n,operation:a,tree:o}),s}return l(t,e),t}(Error),y={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var n=A(r,this.path);n&&(n=h(n));var a=x(r,{op:"remove",path:this.from}).removed;return x(r,{op:"add",path:this.path,value:a}),{newDocument:r,removed:n}},copy:function(e,t,r){var n=A(r,this.from);return x(r,{op:"add",path:this.path,value:h(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:j(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},g={add:function(e,t,r){return m(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:y.move,copy:y.copy,test:y.test,_get:y._get};function A(e,t){if(""==t)return e;var r={op:"_get",path:t};return x(e,r),r.value}function x(e,t,r,n,a,o){if(void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===a&&(a=!0),void 0===o&&(o=0),r&&("function"==typeof r?r(t,0,e,t.path):b(t,0)),""===t.path){var i={newDocument:e};if("add"===t.op)return i.newDocument=t.value,i;if("replace"===t.op)return i.newDocument=t.value,i.removed=e,i;if("move"===t.op||"copy"===t.op)return i.newDocument=A(e,t.from),"move"===t.op&&(i.removed=e),i;else if("test"===t.op){if(i.test=j(e,t.value),!1===i.test)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return i.newDocument=e,i}else if("remove"===t.op)return i.removed=e,i.newDocument=null,i;else if("_get"===t.op)return t.value=e,i;else if(!r)return i;else throw new w("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e)}n||(e=h(e));var s=(t.path||"").split("/"),l=e,c=1,u=s.length,d=void 0,p=void 0,v=void 0;for(v="function"==typeof r?r:b;;){if((p=s[c])&&-1!=p.indexOf("~")&&(p=f(p)),a&&("__proto__"==p||"prototype"==p&&c>0&&"constructor"==s[c-1]))throw TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===d&&(void 0===l[p]?d=s.slice(0,c).join("/"):c==u-1&&(d=t.path),void 0!==d&&v(t,0,e,d)),c++,Array.isArray(l)){if("-"===p)p=l.length;else if(r&&!m(p))throw new w("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);else m(p)&&(p=~~p);if(c>=u){if(r&&"add"===t.op&&p>l.length)throw new w("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var i=g[t.op].call(t,l,p,e);if(!1===i.test)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return i}}else if(c>=u){var i=y[t.op].call(t,l,p,e);if(!1===i.test)throw new w("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return i}if(l=l[p],r&&c<u&&(!l||"object"!=typeof l))throw new w("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function _(e,t,r,n,a){if(void 0===n&&(n=!0),void 0===a&&(a=!0),r&&!Array.isArray(t))throw new w("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=h(e));for(var o=Array(t.length),i=0,s=t.length;i<s;i++)o[i]=x(e,t[i],r,!0,a,i),e=o[i].newDocument;return o.newDocument=e,o}function S(e,t,r){var n=x(e,t);if(!1===n.test)throw new w("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument}function b(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new w("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(y[e.op]){if("string"!=typeof e.path)throw new w("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);else if(0!==e.path.indexOf("/")&&e.path.length>0)throw new w('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);else if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new w("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);else if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new w("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);else if(("add"===e.op||"replace"===e.op||"test"===e.op)&&function e(t){if(void 0===t)return!0;if(t){if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"==typeof t){for(var a=d(t),o=a.length,i=0;i<o;i++)if(e(t[a[i]]))return!0}}return!1}(e.value))throw new w("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);else if(r){if("add"==e.op){var a=e.path.split("/").length,o=n.split("/").length;if(a!==o+1&&a!==o)throw new w("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new w("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var i=T([{op:"_get",path:e.from,value:void 0}],r);if(i&&"OPERATION_PATH_UNRESOLVABLE"===i.name)throw new w("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}}else throw new w("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r)}function T(e,t,r){try{if(!Array.isArray(e))throw new w("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)_(h(t),h(e),r||!0);else{r=r||b;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(e){if(e instanceof w)return e;throw e}}function j(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,a,o=Array.isArray(e),i=Array.isArray(t);if(o&&i){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!j(e[r],t[r]))return!1;return!0}if(o!=i)return!1;var s=Object.keys(e);if((n=s.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(s[r]))return!1;for(r=n;0!=r--;)if(!j(e[a=s[r]],t[a]))return!1;return!0}return e!=e&&t!=t}e.s(["JsonPatchError",()=>w,"_areEquals",()=>j,"applyOperation",()=>x,"applyPatch",()=>_,"applyReducer",()=>S,"deepClone",()=>h,"getValueByPointer",()=>A,"validate",()=>T,"validator",()=>b],680643);var E=new WeakMap,k=function(e){this.observers=new Map,this.obj=e},M=function(e,t){this.callback=e,this.observer=t};function C(e,t){t.unobserve()}function O(e,t){var r=E.get(e);if(r){var n,a=r.observers.get(t);n=a&&a.observer}else r=new k(e),E.set(e,r);if(n)return n;if(n={},r.value=h(e),t){n.callback=t,n.next=null;var o=function(){N(n)},i=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",i),window.addEventListener("keyup",i),window.addEventListener("mousedown",i),window.addEventListener("keydown",i),window.addEventListener("change",i))}return n.patches=[],n.object=e,n.unobserve=function(){var e,t;N(n),clearTimeout(n.next),e=r,t=n,e.observers.delete(t.callback),"undefined"!=typeof window&&(window.removeEventListener("mouseup",i),window.removeEventListener("keyup",i),window.removeEventListener("mousedown",i),window.removeEventListener("keydown",i),window.removeEventListener("change",i))},r.observers.set(t,new M(t,n)),n}function N(e,t){void 0===t&&(t=!1);var r=E.get(e.object);P(r.value,e.object,e.patches,"",t),e.patches.length&&_(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function P(e,t,r,n,a){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=d(t),i=d(e),s=!1,l=i.length-1;l>=0;l--){var c=i[l],m=e[c];if(u(t,c)&&(void 0!==t[c]||void 0===m||!1!==Array.isArray(t))){var f=t[c];"object"==typeof m&&null!=m&&"object"==typeof f&&null!=f&&Array.isArray(m)===Array.isArray(f)?P(m,f,r,n+"/"+p(c),a):m!==f&&(a&&r.push({op:"test",path:n+"/"+p(c),value:h(m)}),r.push({op:"replace",path:n+"/"+p(c),value:h(f)}))}else Array.isArray(e)===Array.isArray(t)?(a&&r.push({op:"test",path:n+"/"+p(c),value:h(m)}),r.push({op:"remove",path:n+"/"+p(c)}),s=!0):(a&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}))}if(s||o.length!=i.length)for(var l=0;l<o.length;l++){var c=o[l];u(e,c)||void 0===t[c]||r.push({op:"add",path:n+"/"+p(c),value:h(t[c])})}}}function I(e,t,r){void 0===r&&(r=!1);var n=[];return P(e,t,n,"",r),n}e.s(["compare",()=>I,"generate",()=>N,"observe",()=>O,"unobserve",()=>C],228667),Object.assign({},e.i(680643),e.i(228667),{JsonPatchError:w,deepClone:h,escapePathComponent:p,unescapePathComponent:f}),e.s(["diffEngine",0,{diff:(e,t)=>I(e,t),apply:(e,t)=>_(e,t).newDocument}],442706)},982926,e=>{"use strict";var t=e.i(52563),r=e.i(954616),n=e.i(266027),a=e.i(912598),o=e.i(846696),i=e.i(614677),s=e.i(601655),l=e.i(268580),c=e.i(394073),u=e.i(647163),d=e.i(384347),h=e.i(602246);let m=async(e,t,r)=>{let n=!1,a={...e};a.name||(n=!0,a.name="Untitled Notebook"),a.steps.forEach(e=>{if(e.id||(n=!0,e.id=(0,i.v4)()),e.userInputType||(n=!0,e.userInputType=d.WorkflowInputType.text),"content"in e||(n=!0,e.content=""),!e.type){n=!0;let t=l.workflowService.getCellType(e);e.type=t.value}});try{if(n&&(await (0,s.updateWorkflowAPI)({workflowId:t,workflowPlan:e,accessToken:r})).success)return a}catch(e){console.error(e)}return e};e.s(["useRequestWorkflowAccess",0,({workflowId:e})=>{let{getAccessTokenSilently:n}=(0,t.useAuth0)(),i=(0,a.useQueryClient)();return(0,r.useMutation)({mutationKey:["workflows/request_access",e],mutationFn:async({message:t})=>{let r=await n();return await (0,s.requestWorkflowAccess)(e,r,t)},onSuccess:async()=>{o.toast.success("Access request sent"),await i.invalidateQueries({queryKey:["workflow",e]}),await i.invalidateQueries({queryKey:["workflows/sharing",e]})},onError:e=>{let t=e?.error||e?.message||"Failed to request access";o.toast.error(t)}})},"useShareWorkflow",0,({workflowId:e})=>{let{getAccessTokenSilently:n}=(0,t.useAuth0)(),o=(0,a.useQueryClient)();return(0,r.useMutation)({mutationKey:["workflows/share/update",e],mutationFn:async t=>{let r=await n(),a=`${c.BASE_API}/workflows/${e}/sharing`,i=await (0,u.customFetch)(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,"X-Intentional-Action":"true"},body:JSON.stringify(t)});if(!i.ok)throw await i.json();let s=await i.json();return await o.setQueryData(["workflows/sharing",e],s),s},onSettled:(e,t)=>{o.refetchQueries({queryKey:["workflows"],exact:!1})}})},"useUpdateWorkflowPlan",0,({workflowId:e})=>{let{getAccessTokenSilently:n}=(0,t.useAuth0)(),i=(0,a.useQueryClient)(),l=(0,h.getWorkflowQueryKey)(e);return(0,r.useMutation)({mutationKey:["workflow/plan/update",e],mutationFn:async({workflowPlan:t})=>{let r=await n();return await (0,s.updateWorkflowAPI)({workflowId:e,workflowPlan:t,accessToken:r})},onMutate:async()=>(await i.cancelQueries({queryKey:l}),i.getQueryData(l)),onError:(e,t)=>{o.toast.error(e?.error||"Oops! Unable to save the workflow.",{description:"Only the creator can update the workflow."}),i.refetchQueries({queryKey:l})}})},"useWorkflowQuery",0,({workflowId:e,select:r})=>{let{getAccessTokenSilently:a,isAuthenticated:o,isLoading:i,user:l}=(0,t.useAuth0)(),c=(0,h.getWorkflowQueryKey)(e);return(0,n.useQuery)({queryKey:c,queryFn:async()=>{let t="";o&&(t=await a());let r=await (0,s.getWorkflow)(e,t);r?.plan&&(r.plan=await m(r.plan,e,t));try{if(!r.conversation_id&&r.is_template&&l.email===r.creator.email){let r=await (0,s.attachConversationToWorkflowAPI)({workflowId:e,accessToken:t});if(r)return r}}catch(e){console.error(e)}return r},staleTime:1/0,retry:!1,select:r,refetchOnWindowFocus:!1,enabled:!!e&&!i,experimental_prefetchInRender:!0,structuralSharing:!0})},"useWorkflowRuns",0,({workflowId:e,teamId:r,groupId:a,enabled:o=!0})=>{let{getAccessTokenSilently:i}=(0,t.useAuth0)();return(0,n.useQuery)({queryKey:["workflows/runs",e,r,a],queryFn:async()=>{let t=await i(),n=new URLSearchParams;r&&n.set("team_id",r),a&&n.set("group_id",a);let o=`${c.BASE_API}/workflows/${e}/runs?${n.toString()}`,s=await (0,u.customFetch)(o,{headers:{Authorization:`Bearer ${t}`,"X-Intentional-Action":"true"}});if(!s.ok)throw await s.json();return s.json()},refetchOnWindowFocus:!1,staleTime:1e4,refetchOnMount:!0,enabled:o&&!!e})},"useWorkflowSharing",0,({workflowId:e})=>{let{getAccessTokenSilently:r}=(0,t.useAuth0)();return(0,n.useQuery)({queryKey:["workflows/sharing",e],queryFn:async()=>{let t=await r(),n=`${c.BASE_API}/workflows/${e}/sharing`,a=await (0,u.customFetch)(n,{headers:{Authorization:`Bearer ${t}`,"X-Intentional-Action":"true"}});if(!a.ok)throw await a.json();return await a.json()},refetchOnWindowFocus:!1,enabled:!!e,staleTime:1/0})}])},220668,e=>{"use strict";let[t,r]=(0,e.i(532592).createContext)({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1});e.s(["FieldProvider",()=>t,"useFieldContext",()=>r])},728442,55383,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(952571),a=e.i(531278),o=e.i(107233),i=e.i(37727),s=e.i(657688),l=e.i(522016),c=e.i(618566),u=e.i(604570),d=e.i(471512),h=e.i(668252);let m=[{value:"0",label:"Monday"},{value:"1",label:"Tuesday"},{value:"2",label:"Wednesday"},{value:"3",label:"Thursday"},{value:"4",label:"Friday"},{value:"5",label:"Saturday"},{value:"6",label:"Sunday"}],p=[{label:"US & Canada",zones:[{value:"America/New_York",label:"Eastern Time"},{value:"America/Chicago",label:"Central Time"},{value:"America/Denver",label:"Mountain Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"America/Phoenix",label:"Arizona"},{value:"America/Anchorage",label:"Alaska"},{value:"Pacific/Honolulu",label:"Hawaii"}]},{label:"Europe",zones:[{value:"Europe/London",label:"London (GMT)"},{value:"Europe/Dublin",label:"Dublin (IST)"},{value:"Europe/Paris",label:"Paris (CET)"},{value:"Europe/Berlin",label:"Berlin (CET)"},{value:"Europe/Rome",label:"Rome (CET)"},{value:"Europe/Madrid",label:"Madrid (CET)"},{value:"Europe/Amsterdam",label:"Amsterdam (CET)"},{value:"Europe/Stockholm",label:"Stockholm (CET)"},{value:"Europe/Moscow",label:"Moscow (MSK)"}]},{label:"Asia Pacific",zones:[{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Asia/Shanghai",label:"Shanghai (CST)"},{value:"Asia/Hong_Kong",label:"Hong Kong (HKT)"},{value:"Asia/Singapore",label:"Singapore (SGT)"},{value:"Asia/Kolkata",label:"India (IST)"},{value:"Australia/Sydney",label:"Sydney (AEDT)"},{value:"Australia/Melbourne",label:"Melbourne (AEDT)"},{value:"Pacific/Auckland",label:"Auckland (NZDT)"}]},{label:"Other",zones:[{value:"UTC",label:"UTC"},{value:"America/Sao_Paulo",label:"SÃ£o Paulo (BRT)"},{value:"Africa/Johannesburg",label:"Johannesburg (SAST)"}]}],f=p.flatMap(e=>e.zones),v=(e,t)=>"AM"===t?12===e?0:e:12===e?12:e+12,w=e=>{let t=f.find(t=>t.value===e);return t?t.label:e},y=(e,t)=>{var r;let n=e.split(" ");if(5!==n.length)return null;let[a,o,i,s,l]=n;if("*"===a&&"*"===o&&"*"===i&&"*"===l)return{frequency:"every-minute",hour:"12",minute:"00",amPm:"AM",weekday:"0",monthDay:"1"};if("*"===o&&"*"===i&&"*"===l&&"*"!==a)return{frequency:"every-hour",hour:"12",minute:a.padStart(2,"0"),amPm:"AM",weekday:"0",monthDay:"1"};let c=((e,t,r,n)=>{if(r===n)return{hour:e,minute:t};try{let a=new Date,o=a.getFullYear(),i=a.getMonth(),s=a.getDate(),l=`${o}-${String(i+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`,c=`${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}:00`,u=new Intl.DateTimeFormat("en-US",{timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),d=new Date(`${l}T${c}`),h=u.formatToParts(d),m=parseInt(h.find(e=>"hour"===e.type)?.value||"0"),p=parseInt(h.find(e=>"minute"===e.type)?.value||"0"),f=e-m,v=t-p;d.setHours(d.getHours()+f,d.getMinutes()+v);let w=new Intl.DateTimeFormat("en-US",{timeZone:n,hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(d),y=parseInt(w.find(e=>"hour"===e.type)?.value||e.toString()),g=parseInt(w.find(e=>"minute"===e.type)?.value||t.toString());return{hour:y,minute:g}}catch(r){return console.error("Error translating time between timezones:",r),{hour:e,minute:t}}})(parseInt(o),parseInt(a),t,Intl.DateTimeFormat().resolvedOptions().timeZone),u=0===(r=c.hour)?{hour:12,amPm:"AM"}:r<12?{hour:r,amPm:"AM"}:12===r?{hour:12,amPm:"PM"}:{hour:r-12,amPm:"PM"},d="daily",h="0",m="1";return"*"===i&&"*"===l?d="daily":"*"===i&&"*"!==l?(d="weekly",h=l):"*"!==i&&"*"===l&&(d="monthly",m=i),{frequency:d,hour:u.hour.toString(),minute:c.minute.toString().padStart(2,"0"),amPm:u.amPm,weekday:h,monthDay:m}};e.s(["TIMEZONE_GROUPS",0,p,"WEEKDAYS",0,m,"convert12To24Hour",0,v,"getCronScheduleDescription",0,(e,t)=>{let r=y(e,t);if(!r)return"Invalid schedule";let n=(e=>{let{frequency:t,hour:r,minute:n,amPm:a,weekday:o,monthDay:i}=e;if("every-minute"===t)return"every minute";if("every-hour"===t)return`every hour at :${n}`;let s=`${r}:${n} ${a}`;switch(t){case"daily":return`every day at ${s}`;case"weekly":{let e=m.find(e=>e.value===o)?.label||"Monday";return`every ${e} at ${s}`}case"monthly":{let e=["st","nd","rd"][parseInt(i)-1]||"th";return`every month on the ${i}${e} at ${s}`}default:return""}})(r),a=w(t);return`${n} (${a})`},"getTimezoneDisplayName",0,w,"parseCronExpression",0,y],55383);var g=e.i(167881),A=e.i(630374),x=e.i(23750),_=e.i(10708),S=e.i(62870),b=e.i(319036),T=e.i(728231),j=e.i(647163);function E({tabs:e,value:r,onValueChange:n,className:a}){return(0,t.jsx)("div",{className:(0,j.cn)("flex gap-2 w-full border-b border-input",a),children:e.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)(g.Button,{variant:"ghost",size:"xs",className:"font-medium mb-1.5",onClick:()=>n(e.value),disabled:e.disabled,children:e.label}),r===e.value&&(0,t.jsx)("div",{className:"h-[2px] w-full bg-primary"})]},e.value))})}var k=e.i(616525),M=e.i(394073),C=e.i(620949),O=e.i(268580),N=e.i(52563),P=e.i(954616),I=e.i(912598);let R="https://hooks.slack.com/services/",L=e=>{let t=e.match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/i);return t?{hour:t[1],minute:t[2],amPm:t[3].toUpperCase()}:{hour:"9",minute:"00",amPm:"AM"}},D=(e,t,r)=>`${e}:${t} ${r}`,F=["12:00 AM","12:15 AM","12:30 AM","12:45 AM","1:00 AM","1:15 AM","1:30 AM","1:45 AM","2:00 AM","2:15 AM","2:30 AM","2:45 AM","3:00 AM","3:15 AM","3:30 AM","3:45 AM","4:00 AM","4:15 AM","4:30 AM","4:45 AM","5:00 AM","5:15 AM","5:30 AM","5:45 AM","6:00 AM","6:15 AM","6:30 AM","6:45 AM","7:00 AM","7:15 AM","7:30 AM","7:45 AM","8:00 AM","8:15 AM","8:30 AM","8:45 AM","9:00 AM","9:15 AM","9:30 AM","9:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","1:00 PM","1:15 PM","1:30 PM","1:45 PM","2:00 PM","2:15 PM","2:30 PM","2:45 PM","3:00 PM","3:15 PM","3:30 PM","3:45 PM","4:00 PM","4:15 PM","4:30 PM","4:45 PM","5:00 PM","5:15 PM","5:30 PM","5:45 PM","6:00 PM","6:15 PM","6:30 PM","6:45 PM","7:00 PM","7:15 PM","7:30 PM","7:45 PM","8:00 PM","8:15 PM","8:30 PM","8:45 PM","9:00 PM","9:15 PM","9:30 PM","9:45 PM","10:00 PM","10:15 PM","10:30 PM","10:45 PM","11:00 PM","11:15 PM","11:30 PM","11:45 PM"];e.s(["default",0,({workflow:e,children:f})=>{let[U,$]=(0,r.useState)(!1),[K,z]=(0,r.useState)("schedule"),[B,W]=(0,r.useState)("daily"),[q,G]=(0,r.useState)("9:00 AM"),[Q,V]=(0,r.useState)("0"),[H,J]=(0,r.useState)("1"),[Y,Z]=(0,r.useState)("UTC"),[X,ee]=(0,r.useState)(null),[et,er]=(0,r.useState)(""),[en,ea]=(0,r.useState)(!1),[eo,ei]=(0,r.useState)(""),[es,el]=(0,r.useState)(""),{teamId:ec,groupId:eu}=(0,c.useParams)(),[ed,eh]=(0,r.useState)({title:"",sections:[]}),em=(0,c.useSearchParams)(),{data:ep,isLoading:ef}=(0,d.useWorkflowCrons)({teamId:ec,groupId:eu}),{mutateAsync:ev,isPending:ew}=(0,d.useCreateWorkflowCron)(),{mutateAsync:ey,isPending:eg}=(0,d.useUpdateWorkflowCron)(),{mutateAsync:eA,isPending:ex}=(0,d.useDeleteWorkflowCron)(),{mutateAsync:e_,isPending:eS,isError:eb}=(()=>{let{getAccessTokenSilently:e}=(0,N.useAuth0)(),t=(0,I.useQueryClient)();return(0,P.useMutation)({mutationFn:async t=>{let r=await e(),n={};t.cron_metadata&&(n.cron_metadata=t.cron_metadata),t.teamId&&(n.team_id=t.teamId),t.groupId&&(n.group_id=t.groupId),t.benchmark_run_id&&(n.benchmark_run_id=t.benchmark_run_id);let a=await (0,j.customFetch)(`${M.SOCKET_URL}/kepler/api/notebooks/${t.workflowId}/schedule`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await a.json();if(!a.ok)throw Error(o?.error??"Failed to schedule notebook run");if(o?.error)throw Error(o.error);if(!o?.notebook_id)throw Error("Instant notebook run did not return a notebook id");return o},onSuccess:async(e,r)=>{let{workflowId:n,teamId:a,groupId:o}=r;n&&(await t.refetchQueries({queryKey:["workflows/runs",n,a,o]}),await t.refetchQueries({queryKey:(0,d.getListWorkflowsQueryKey)({teamId:a,groupId:o,type:"runs"})}),await t.refetchQueries({queryKey:(0,d.getListWorkflowsQueryKey)({teamId:a,groupId:o,type:"templates"})}))}})})(),{data:eT}=(0,C.useUserInformation)(),ej=eT?.id,eE=e?.creator?.id===ej,{isCaesar:ek}=(0,k.useUserContext)()??{isCaesar:!1},{data:eM,isSuccess:eC}=(0,h.useSlackIntegration)(),{data:eO}=(0,h.useSlackChannels)(),eN=ew||eg||ex,eP=(0,r.useMemo)(()=>e?ep?.find(t=>t.content_id===e.id):null,[ep,e]);(0,r.useEffect)(()=>{if("true"===em.get("schedule")&&!U){$(!0);let e=new URL(window.location.href);e.searchParams.delete("schedule"),window.history.replaceState({},"",e.toString())}},[em,U]),(0,r.useEffect)(()=>{let e,t,r,n,a,o,i;G((t=(e=new Date).getHours(),r=15*Math.round(e.getMinutes()/15),n=t,a=r,60===r&&(n=(t+1)%24,a=0),o=n>=12?"PM":"AM",i=n%12||12,`${i}:${a.toString().padStart(2,"0")} ${o}`));try{let e=Intl.DateTimeFormat().resolvedOptions().timeZone;Z(e)}catch{Z("UTC")}},[]),(0,r.useEffect)(()=>{if(e)if(eP){if((M.FEATURE_FLAGS.CRON_MODEL_SELECTOR||M.FEATURE_FLAGS.CRON_MODEL_SELECTOR_CAESAR&&ek)&&(eP.cron_metadata?.model?er(String(eP.cron_metadata.model)):er("")),M.FEATURE_FLAGS.NOTEBOOK_CRONS_SLACK){let e=eP.cron_metadata?.slack_webhook_url;"string"==typeof e&&e.length>0?e.startsWith(R)?ee(e.slice(R.length)):ee(e):ee(null)}else ee(null);if(eP.cron_metadata?.slack_channel_id?(ei(eP.cron_metadata.slack_channel_id),ea(!0)):ea(!1),eP.cron_metadata?.slack_channel_name&&el(eP.cron_metadata.slack_channel_name),M.FEATURE_FLAGS.CUSTOM_SLACK_REPORT&&eP.cron_metadata?.custom_report_format)try{let e=JSON.parse(eP.cron_metadata.custom_report_format);if("object"!=typeof e||null===e||Array.isArray(e))eh({title:"",sections:[]});else if(e.sections&&!Array.isArray(e.sections)){let t=Object.entries(e.sections).map(([e,t])=>({section_title:e,description:t}));eh({title:e.title||"",sections:t})}else eh({title:e.title||"",sections:e.sections||[]})}catch{eh({title:"",sections:[]})}let e=y(eP.frequency,eP.timezone||"UTC");e&&(Z(eP.timezone||"UTC"),"every-minute"!==e.frequency||M.FEATURE_FLAGS.TEST_CRONS?(W(e.frequency),G(D(e.hour,e.minute,e.amPm)),V(e.weekday),J(e.monthDay)):(W("daily"),G("9:00 AM")))}else ee(null)},[eP,e]);let eI=()=>{if("every-minute"===B)return"* * * * *";let{hour:e,minute:t,amPm:r}=L(q);if("every-hour"===B){let e=parseInt(t);return`${e} * * * *`}let n=parseInt(t),a=v(parseInt(e),r);switch(B){case"daily":default:return`${n} ${a} * * *`;case"weekly":return`${n} ${a} * * ${Q}`;case"monthly":return`${n} ${a} ${H} * *`}},eR=()=>{let e={};return(M.FEATURE_FLAGS.CRON_MODEL_SELECTOR||M.FEATURE_FLAGS.CRON_MODEL_SELECTOR_CAESAR&&ek)&&et&&(e.model=et),eC&&en&&(M.FEATURE_FLAGS.NOTEBOOK_CRONS_SLACK&&X&&(e.slack_webhook_url=`${R}${X}`),eo&&es&&(e.slack_channel_id=eo,e.slack_channel_name=es,e.slack_team_id=eM.slack_team_id),M.FEATURE_FLAGS.CUSTOM_SLACK_REPORT&&(ed?.title||(ed?.sections||[]).length>0)&&(e.custom_report_format=JSON.stringify(ed))),e},eL=async()=>{let t={},r=eP?.cron_metadata||{};if(M.FEATURE_FLAGS.CRON_MODEL_SELECTOR||M.FEATURE_FLAGS.CRON_MODEL_SELECTOR_CAESAR&&ek)if(et)t={...r,model:et};else{let{model:e,...n}=r;t=n}let n=eR();t={...t,...n},eC&&en&&(eo||X)||(delete t.slack_channel_id,delete t.slack_channel_name,delete t.slack_webhook_url,delete t.custom_report_format,delete t.slack_team_id);let a={cron_name:`${e.plan.name} - ${B.charAt(0).toUpperCase()+B.slice(1)} Run`,frequency:eI(),content_type:"notebook",content_id:e.id,timezone:Y||"UTC",cron_metadata:Object.keys(t).length>0?t:void 0};eP?(await ey({cronId:eP.id,params:a}),u.default.capture("workflow_cron_updated",{workflowId:e.id})):(await ev(a),u.default.capture("workflow_cron_created",{workflowId:e.id})),$(!1)},eD=async()=>{eP&&(await eA({cronId:eP.id,workflowId:e.id}),u.default.capture("workflow_cron_deleted",{workflowId:e.id}),$(!1))},eF=async()=>{try{let t=eR(),r=await e_({workflowId:e.id,cron_metadata:Object.keys(t).length>0?t:void 0,teamId:ec,groupId:eu});r.notebook_id&&(await eL(),window.open(O.workflowService.getWorkflowUrl(r.notebook_id,null),"_blank")),u.default.capture("workflow_schedule_tested",{workflowId:e.id})}catch(e){console.error("Schedule test failed:",e)}},eU=["daily","weekly","monthly"];return(M.FEATURE_FLAGS.TEST_CRONS||ek)&&(eU.push("every-minute"),eU.push("every-hour")),(0,t.jsxs)(A.Dialog,{open:U,onOpenChange:$,children:[(0,t.jsx)(A.DialogTrigger,{asChild:!0,children:f}),(0,t.jsxs)(A.DialogContent,{className:"flex flex-col max-h-[85vh]",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)(A.DialogTitle,{className:"flex items-center gap-2",children:["Schedule Notebook",(0,t.jsxs)(T.Tooltip,{children:[(0,t.jsx)(T.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(n.Info,{size:16,className:"text-muted-foreground"})}),(0,t.jsx)(T.TooltipContent,{children:"Configure this notebook to run automatically on a schedule"})]})]}),(0,t.jsx)(E,{tabs:[{value:"schedule",label:"Schedule"},{value:"slack",label:"Slack Report"}],value:K,onValueChange:z,className:"mb-4"}),"schedule"===K&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col gap-4 overflow-y-auto",children:[(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:eU.map(e=>(0,t.jsx)(g.Button,{type:"button",variant:B===e?"default":"outline",size:"sm",onClick:()=>W(e),disabled:eN||!eE,className:(0,j.cn)("capitalize",("every-minute"===e||"every-hour"===e)&&B!==e&&"bg-destructive/20 text-destructive border-destructive hover:bg-destructive/30 hover:text-destructive"),children:"every-minute"===e?"Every Minute":"every-hour"===e?"Every Hour":e},e))})}),"weekly"===B&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(_.Label,{htmlFor:"weekday",children:"Day of Week"}),(0,t.jsxs)(S.Select,{value:Q,onValueChange:V,disabled:eN||!eE,children:[(0,t.jsx)(S.SelectTrigger,{id:"weekday",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsx)(S.SelectContent,{children:m.map(e=>(0,t.jsx)(S.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),"monthly"===B&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(_.Label,{htmlFor:"monthday",children:"Day of Month"}),(0,t.jsxs)(S.Select,{value:H,onValueChange:J,disabled:eN||!eE,children:[(0,t.jsx)(S.SelectTrigger,{id:"monthday",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsx)(S.SelectContent,{children:Array.from({length:28},(e,t)=>t+1).map(e=>(0,t.jsx)(S.SelectItem,{value:e.toString(),children:e},e))})]})]}),"every-hour"===B&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(_.Label,{htmlFor:"minute",children:"Minute"}),(0,t.jsxs)(S.Select,{value:L(q).minute,onValueChange:e=>{let{hour:t,amPm:r}=L(q);G(D(t,e,r))},disabled:eN||!eE,children:[(0,t.jsx)(S.SelectTrigger,{id:"minute",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsx)(S.SelectContent,{children:Array.from({length:60},(e,t)=>t.toString().padStart(2,"0")).map(e=>(0,t.jsxs)(S.SelectItem,{value:e,children:[":",e]},e))})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Schedule will run at this minute past every hour (e.g., 1:",L(q).minute,", 2:",L(q).minute,")"]})]}),"every-minute"!==B&&"every-hour"!==B&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,t.jsx)(_.Label,{htmlFor:"time",children:"Time"}),(0,t.jsxs)(S.Select,{value:q,onValueChange:G,disabled:eN||!eE,children:[(0,t.jsx)(S.SelectTrigger,{id:"time",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{placeholder:"Select time"})}),(0,t.jsx)(S.SelectContent,{className:"max-h-[300px]",children:F.map(e=>(0,t.jsx)(S.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,t.jsx)(_.Label,{htmlFor:"timezone",children:"Timezone"}),(0,t.jsxs)(S.Select,{value:Y,onValueChange:Z,disabled:eN||!eE,children:[(0,t.jsx)(S.SelectTrigger,{id:"timezone",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{children:w(Y)})}),(0,t.jsx)(S.SelectContent,{children:p.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground",children:e.label}),e.zones.map(e=>(0,t.jsx)(S.SelectItem,{value:e.value,children:w(e.value)},e.value))]},e.label))})]})]})]})}),(M.FEATURE_FLAGS.CRON_MODEL_SELECTOR||M.FEATURE_FLAGS.CRON_MODEL_SELECTOR_CAESAR&&ek)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.Label,{htmlFor:"model",children:"Model"}),(0,t.jsxs)(S.Select,{value:et||"account-current",onValueChange:e=>er("account-current"===e?"":e),disabled:eN||!eE,children:[(0,t.jsx)(S.SelectTrigger,{id:"model",className:"w-full rounded-md",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsxs)(S.SelectContent,{children:[(0,t.jsx)(S.SelectItem,{value:"account-current",children:"Account Current"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-1",children:"GPT-5.1"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-1-thinking",children:"GPT-5.1 (Thinking)"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-2",children:"GPT-5.2"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-1-mini",children:"GPT-5.1 Mini"}),(0,t.jsx)(S.SelectItem,{value:"gpt-5-1-nano",children:"GPT-5.1 Nano"}),(0,t.jsx)(S.SelectItem,{value:"claude-sonnet-4.5",children:"Claude 4.5 Sonnet"}),(0,t.jsx)(S.SelectItem,{value:"gemini-3",children:"Gemini 3"}),(0,t.jsx)(S.SelectItem,{value:"claude-sonnet-4",children:"Claude 4 Sonnet"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-3 bg-muted/30",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Next scheduled run in ",(()=>{let e=new Date,t=new Date(e),{hour:r,minute:n,amPm:a}=L(q),o=v(+r,a);switch(B){case"every-hour":{t.setMinutes(+n,0,0),t<=e&&t.setHours(t.getHours()+1);let r=t.getTime()-e.getTime();if(r<6e4)return"less than 1 minute";let a=Math.floor(r/36e5),o=Math.floor(r%36e5/6e4);if(a>0)return`${a}h and ${o}min`;return`${o}min`}case"daily":t.setHours(o,+n,0,0),t<=e&&t.setDate(t.getDate()+1);break;case"weekly":{t.setHours(o,+n,0,0);let r=(Q-e.getDay()+7)%7;0===r&&t<=e&&(r=7),t.setDate(t.getDate()+r);break}case"monthly":t.setHours(o,+n,0,0),t.setDate(+H),t<=e&&t.setMonth(t.getMonth()+1)}let i=t.getTime()-e.getTime();if(i<6e4)return"less than 1 minute";let s=Math.floor(i/864e5),l=Math.floor((i%=864e5)/36e5),c=Math.floor((i%=36e5)/6e4),u=[];return s&&u.push(`${s}d`),l&&u.push(`${l}h`),c&&u.push(`${c}min`),u.join(" and ")})()]}),(0,t.jsx)(g.Button,{variant:"outline",size:"sm",onClick:eF,disabled:eN||ef||eS||!eE,children:eS?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):"Test now"})]}),eb&&(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Schedule test failed"}),M.FEATURE_FLAGS.TEST_CRONS&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,t.jsxs)("p",{children:["Cron: ",(0,t.jsx)("code",{className:"px-1 rounded bg-muted",children:eI()})]})})]}),"slack"===K&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col gap-4 overflow-y-auto",children:[!eC&&(0,t.jsxs)("div",{className:"flex items-center gap-4 border rounded-lg p-4 bg-muted/30",children:[(0,t.jsx)(s.default,{src:"/slack.svg",alt:"Slack",width:32,height:32,className:"flex-shrink-0 -rotate-90"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-foreground",children:"Connect Slack"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Set Julius up in Slack to send reports"})]}),(0,t.jsx)(g.Button,{variant:"outline",size:"sm",asChild:!0,className:"flex-shrink-0",children:(0,t.jsx)(l.default,{href:"/data-connectors",children:"Connect"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(_.Label,{htmlFor:"send-slack-report",className:"text-base",children:"Send Slack Report"}),(0,t.jsx)(b.Switch,{id:"send-slack-report",checked:en,onCheckedChange:e=>{ea(e),e||(ei(""),el(""))},disabled:eN||!eE||!eC})]}),(0,t.jsxs)("div",{className:(0,j.cn)("flex flex-col gap-4",!en&&"opacity-50"),children:[M.FEATURE_FLAGS.SLACK_INTEGRATION&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(_.Label,{children:"Choose channel"}),(0,t.jsxs)(S.Select,{value:eo,onValueChange:e=>{let t=eO?.find(t=>t.id===e);t&&(ei(t.id),el(t.name))},disabled:eN||!eE||!en||!eC,children:[(0,t.jsx)(S.SelectTrigger,{className:"w-full",children:(0,t.jsx)(S.SelectValue,{placeholder:"Select a channel",children:es?`#${es}`:"Select a channel"})}),(0,t.jsx)(S.SelectContent,{children:eO?.map(e=>(0,t.jsxs)(S.SelectItem,{value:e.id,children:["#",e.name]},e.id))})]})]}),M.FEATURE_FLAGS.CUSTOM_SLACK_REPORT&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.Label,{htmlFor:"report-title",children:"Report title"}),(0,t.jsx)(x.Input,{id:"report-title",value:ed?.title,onChange:e=>{eh({...ed,title:e.target.value})},placeholder:"e.g., Weekly Sales Report",disabled:eN||!eE||!en})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(_.Label,{className:"text-sm",children:"Report structure"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set up a custom structure for the report to follow"})]}),(0,t.jsx)("div",{className:"space-y-2",children:(ed?.sections||[]).map((e,r)=>(0,t.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-10 text-sm text-muted-foreground",children:r+1}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(x.Input,{value:e.section_title,onChange:e=>{let t=[...ed?.sections||[]];t[r]={...t[r],section_title:e.target.value},eh({...ed,sections:t})},placeholder:"Section title (e.g., Key Findings)",disabled:eN||!eE||!en}),(0,t.jsx)(x.Input,{value:e.description,onChange:e=>{let t=[...ed?.sections||[]];t[r]={...t[r],description:e.target.value},eh({...ed,sections:t})},placeholder:"What should Julius write in this section?",disabled:eN||!eE||!en})]}),(0,t.jsx)(g.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{let e=(ed?.sections||[]).filter((e,t)=>t!==r);eh({...ed,sections:e})},disabled:eN||!eE||!en,className:"h-10 w-10 mt-0",children:(0,t.jsx)(i.X,{className:"h-4 w-4"})})]},r))}),(0,t.jsxs)(g.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{eh({...ed,sections:[...ed?.sections||[],{section_title:"",description:""}]})},disabled:eN||!eE||!en,className:"gap-1",children:[(0,t.jsx)(o.Plus,{className:"h-4 w-4"}),"Add section"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-2 mt-4",children:[(0,t.jsx)("div",{children:eP&&(eE?(0,t.jsx)(g.Button,{variant:"outline",size:"sm",onClick:eD,disabled:eN||ef||eS||!eE,className:"border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",children:eN?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Disabling..."]}):"Disable Schedule"}):(0,t.jsxs)(T.Tooltip,{children:[(0,t.jsx)(T.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"inline-block",children:(0,t.jsx)(g.Button,{variant:"outline",size:"sm",onClick:eD,disabled:eN||ef||eS||!eE,className:"border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",children:"Disable Schedule"})})}),(0,t.jsx)(T.TooltipContent,{children:"Must be owner of the notebook to disable schedule"})]}))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(A.DialogClose,{asChild:!0,children:(0,t.jsx)(g.Button,{variant:"outline",size:"sm",disabled:eN||eS,children:"Cancel"})}),eE?(0,t.jsx)(g.Button,{size:"sm",onClick:eL,disabled:eN||ef||eS||!eE,children:eN?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save"}):(0,t.jsxs)(T.Tooltip,{children:[(0,t.jsx)(T.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"inline-block",children:(0,t.jsx)(g.Button,{size:"sm",onClick:eL,disabled:eN||ef||eS||!eE,children:eN?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save"})})}),(0,t.jsx)(T.TooltipContent,{children:"Must be owner of the notebook to save schedule"})]})]})]})]})]})}],728442)}]);

//# debugId=3c8bd010-6332-24f9-1b4e-95487b71fc2b
//# sourceMappingURL=c3f21cb3f61be75b.js.map