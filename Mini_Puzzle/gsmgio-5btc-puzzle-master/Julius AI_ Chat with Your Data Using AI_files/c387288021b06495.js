;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="df22ec30-2138-3c75-5680-ed26c22cbbba")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,612329,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>t])},727612,e=>{"use strict";var t=e.i(612329);e.s(["Trash2",()=>t.default])},655900,e=>{"use strict";var t=e.i(399219);e.s(["ChevronUp",()=>t.default])},270756,517302,e=>{"use strict";let t=(0,e.i(475254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["default",()=>t],517302),e.s(["Lock",()=>t],270756)},417835,e=>{"use strict";let t=(0,e.i(475254).default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);e.s(["Timer",()=>t],417835)},84946,492297,294840,449173,e=>{"use strict";var t,r,s,a,i,l,n,c,o,d,u=e.i(271645);function m(){return(m=Object.assign.bind()).apply(null,arguments)}function f(){return(f=Object.assign.bind()).apply(null,arguments)}function p(){return(p=Object.assign.bind()).apply(null,arguments)}function h(){return(h=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,function(e){return u.createElement("svg",m({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 92.2 65"},e),t||(t=u.createElement("path",{fill:"currentColor",d:"M66.5 0H52.4l25.7 65h14.1zM25.7 0 0 65h14.4l5.3-13.6h26.9L51.8 65h14.4L40.5 0zm-1.4 39.3 8.8-22.8 8.8 22.8z"})))}],84946),e.s(["default",0,function(e){return u.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 75 75"},e),r||(r=u.createElement("path",{d:"M24.3 44.7c2 0 6-.1 11.6-2.4 6.5-2.7 19.3-7.5 28.6-12.5 6.5-3.5 9.3-8.1 9.3-14.3C73.8 7 66.9 0 58.3 0h-36C10 0 0 10 0 22.3s9.4 22.4 24.3 22.4M30.4 60c0-6 3.6-11.5 9.2-13.8l11.3-4.7C62.4 36.8 75 45.2 75 57.6 75 67.2 67.2 75 57.6 75H45.3c-8.2 0-14.9-6.7-14.9-15M12.9 47.6C5.8 47.6 0 53.4 0 60.5v1.7C0 69.2 5.8 75 12.9 75s12.9-5.8 12.9-12.9v-1.7c-.1-7-5.8-12.8-12.9-12.8"})))}],492297),e.s(["default",0,function(e){return u.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 48 48"},e),s||(s=u.createElement("path",{fill:"#0081fb",d:"m47 29.36-2.193 1.663L42.62 29.5c0-.16 0-.33-.01-.5 0-.16 0-.33-.01-.5-.14-3.94-1.14-8.16-3.14-11.25-1.54-2.37-3.51-3.5-5.71-3.5-2.31 0-4.19 1.38-6.27 4.38-.06.09-.13.18-.19.28-.04.05-.07.1-.11.16-.1.15-.2.3-.3.46-.9 1.4-1.84 3.03-2.86 4.83-.09.17-.19.34-.28.51-.03.04-.06.09-.08.13l-.21.37-1.24 2.19c-2.91 5.15-3.65 6.33-5.1 8.26-2.55 3.39-4.73 4.68-7.6 4.68-3.4 0-5.56-1.47-6.89-3.69C1.53 34.51 1 32.14 1 29.44l4.97.17c0 1.76.38 3.1.89 3.92C7.52 34.59 8.49 35 9.5 35c1.29 0 2.49-.27 4.77-3.43 1.83-2.53 3.99-6.07 5.44-8.3l1.37-2.09.29-.46.3-.45.5-.77c.76-1.16 1.58-2.39 2.46-3.57.1-.14.2-.28.31-.42.1-.14.21-.28.31-.41.9-1.15 1.85-2.22 2.87-3.1 1.85-1.61 3.84-2.5 5.85-2.5 3.37 0 6.58 1.95 9.04 5.61 2.51 3.74 3.82 8.4 3.97 13.25.01.16.01.33.01.5.01.17.01.33.01.5"})),a||(a=u.createElement("linearGradient",{id:"meta_svg__a",x1:42.304,x2:13.533,y1:24.75,y2:24.75,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:0}),u.createElement("stop",{offset:.995}))),i||(i=u.createElement("path",{fill:"url(#meta_svg__a)",d:"M4.918 15.456C7.195 11.951 10.483 9.5 14.253 9.5c2.184 0 4.354.645 6.621 2.493 2.479 2.02 5.122 5.346 8.419 10.828l1.182 1.967c2.854 4.746 4.477 7.187 5.428 8.339C37.125 34.606 37.888 35 39 35c2.82 0 3.617-2.54 3.617-5.501L47 29.362c0 3.095-.611 5.369-1.651 7.165C44.345 38.264 42.387 40 39.093 40c-2.048 0-3.862-.444-5.868-2.333-1.542-1.45-3.345-4.026-4.732-6.341l-4.126-6.879c-2.07-3.452-3.969-6.027-5.068-7.192-1.182-1.254-2.642-2.754-5.067-2.754-1.963 0-3.689 1.362-5.084 3.465z"})),l||(l=u.createElement("linearGradient",{id:"meta_svg__b",x1:7.635,x2:7.635,y1:32.87,y2:13.012,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:0}),u.createElement("stop",{offset:.995}))),n||(n=u.createElement("path",{fill:"url(#meta_svg__b)",d:"M14.25 14.5c-1.959 0-3.683 1.362-5.075 3.465C7.206 20.937 6 25.363 6 29.614c0 1.753-.003 3.072.5 3.886l-3.84 2.813C1.574 34.507 1 32.2 1 29.5c0-4.91 1.355-10.091 3.918-14.044C7.192 11.951 10.507 9.5 14.27 9.5z"})),c||(c=u.createElement("path",{d:"m21.67 20.27-.3.45-.29.46a69 69 0 0 1 2.37 3.69l.21-.37c.02-.04.05-.09.08-.13.09-.17.19-.34.28-.51-.83-1.36-1.63-2.57-2.35-3.59m3.27-4.76c-.11.14-.21.28-.31.42.73.91 1.47 1.94 2.25 3.1.1-.16.2-.31.3-.46.04-.06.07-.11.11-.16.06-.1.13-.19.19-.28a44 44 0 0 0-2.23-3.03c-.1.13-.21.27-.31.41",opacity:.05})),o||(o=u.createElement("path",{d:"m21.67 20.27-.3.45a73 73 0 0 1 2.37 3.65c.09-.17.19-.34.28-.51-.83-1.36-1.63-2.57-2.35-3.59m2.96-4.34c.73.91 1.47 1.94 2.25 3.1.1-.16.2-.31.3-.46-.77-1.14-1.52-2.16-2.24-3.06-.11.14-.21.28-.31.42",opacity:.07})))}],294840),e.s(["default",0,function(e){return u.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:16,height:16.208,viewBox:"0 0 79.9 81"},e),d||(d=u.createElement("path",{fill:"currentColor",d:"M74.6 33.1c1.8-5.5 1.2-11.6-1.7-16.6-4.4-7.7-13.3-11.6-22-9.8C47.1 2.4 41.5 0 35.7 0 26.8 0 19 5.7 16.2 14.1c-5.7 1.2-10.6 4.7-13.5 9.8-4.4 7.7-3.4 17.3 2.5 23.9C3.4 53.4 4.1 59.4 7 64.4c4.4 7.7 13.3 11.7 22 9.8 3.9 4.3 9.4 6.8 15.2 6.8 8.9 0 16.7-5.7 19.5-14.1 5.7-1.2 10.6-4.7 13.5-9.8 4.4-7.7 3.4-17.4-2.6-24M44.2 75.7c-3.6 0-7-1.2-9.7-3.5.1-.1.4-.2.5-.3l16.1-9.3c.8-.5 1.3-1.3 1.3-2.3V37.6l6.8 3.9c.1 0 .1.1.1.2v18.8c.1 8.4-6.7 15.2-15.1 15.2M11.6 61.8c-1.8-3.1-2.4-6.7-1.8-10.2.1.1.3.2.5.3l16.1 9.3c.8.5 1.8.5 2.6 0l19.7-11.4v7.9c0 .1 0 .2-.1.2l-16.3 9.4c-7.2 4.2-16.5 1.7-20.7-5.5M7.4 26.6c1.8-3.1 4.6-5.4 7.9-6.7v19.2c0 .9.5 1.8 1.3 2.3l19.7 11.4-6.8 3.9c-.1 0-.2.1-.2 0L13 47.3c-7.4-4.2-9.8-13.5-5.6-20.7m56 13L43.7 28.2l6.8-3.9c.1 0 .2-.1.2 0L67 33.7c7.3 4.2 9.7 13.5 5.5 20.7-1.8 3.1-4.6 5.4-7.9 6.6V41.9c.1-.9-.4-1.8-1.2-2.3m6.7-10.2c-.1-.1-.3-.2-.5-.3l-16.1-9.3c-.8-.5-1.8-.5-2.6 0L31.2 31.2v-7.9c0-.1 0-.2.1-.2l16.3-9.4c7.3-4.2 16.5-1.7 20.7 5.6 1.8 3 2.4 6.6 1.8 10.1m-42.6 14-6.8-3.9c-.1 0-.1-.1-.1-.2V20.5c0-8.4 6.8-15.2 15.2-15.2 3.6 0 7 1.2 9.7 3.5-.1.1-.3.2-.5.3l-16.1 9.3c-.8.5-1.3 1.3-1.3 2.3v22.7zm3.7-8 8.8-5.1 8.8 5.1v10.1L40 50.6l-8.8-5.1z"})))}],449173)},51509,e=>{"use strict";var t,r,s,a,i=e.i(271645);function l(){return(l=Object.assign.bind()).apply(null,arguments)}e.s(["default",0,function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 48 48"},e),t||(t=i.createElement("path",{fill:"#76b900",d:"M18 8h29v32H18z"})),r||(r=i.createElement("path",{fill:"#fafafa",d:"M18 17.68c.52-.05 1.05-.09 1.57-.07 4.95 0 7.9 3.85 7.9 3.85l-4.03 3.39c-1.8-3.02-2.43-4.35-5.44-4.71zm0 11.04c.73.24 1.52.36 2.3.36 5.88 0 11.35-7.6 11.35-7.6s-5.07-6.91-12.81-6.66c-.28 0-.56.02-.84.03v-2.3l.84-.05c10.76-.37 17.78 8.82 17.78 8.82s-8.05 9.8-16.44 9.8c-.73 0-1.47-.07-2.18-.19zm1.95 7.37c-.66 0-1.32-.03-1.95-.1v-2.44c.59.07 1.22.12 1.81.12 7.82 0 13.47-3.99 18.94-8.7.91.73 4.62 2.49 5.39 3.26-5.2 4.36-17.32 7.86-24.19 7.86"})),s||(s=i.createElement("path",{fill:"#76b900",d:"M18 28.717v2.232c-7.219-1.29-9.225-8.806-9.225-8.806s3.47-3.836 9.225-4.464v2.441h-.017c-3.017-.366-5.388 2.459-5.388 2.459s1.342 4.76 5.405 6.138"})),a||(a=i.createElement("path",{fill:"#76b900",d:"M5.183 21.829s4.272-6.313 12.834-6.975v-2.302C8.531 13.319.335 21.341.335 21.341S4.974 34.768 18 35.989v-2.441C8.444 32.361 5.183 21.829 5.183 21.829"})))}])},284765,e=>{"use strict";let t=(0,e.i(475254).default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);e.s(["Settings2",()=>t],284765)},185873,e=>{"use strict";let t=(0,e.i(475254).default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["default",()=>t])},991799,897250,e=>{"use strict";var t=e.i(475254);let r=(0,t.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);e.s(["Moon",()=>r],991799);let s=(0,t.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);e.s(["Sun",()=>s],897250)},416540,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(114683),a=e.i(981140),i=e.i(820783),l=e.i(30030);e.i(174080);var n=e.i(991918),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let a=(0,n.createSlot)(`Primitive.${s}`),i=r.forwardRef((e,r)=>{let{asChild:i,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?a:s,{...l,ref:r})});return i.displayName=`Primitive.${s}`,{...e,[s]:i}},{}),o=e.i(842727),d=e.i(369340),u=e.i(586318),m=e.i(635804),f=e.i(999682),p=e.i(296626),h="Radio",[v,y]=(0,l.createContextScope)(h),[x,g]=v(h),w=r.forwardRef((e,s)=>{let{__scopeRadio:l,name:n,checked:o=!1,required:d,disabled:u,value:m="on",onCheck:f,form:p,...h}=e,[v,y]=r.useState(null),g=(0,i.useComposedRefs)(s,e=>y(e)),w=r.useRef(!1),j=!v||p||!!v.closest("form");return(0,t.jsxs)(x,{scope:l,checked:o,disabled:u,children:[(0,t.jsx)(c.button,{type:"button",role:"radio","aria-checked":o,"data-state":E(o),"data-disabled":u?"":void 0,disabled:u,value:m,...h,ref:g,onClick:(0,a.composeEventHandlers)(e.onClick,e=>{o||f?.(),j&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),j&&(0,t.jsx)(b,{control:v,bubbles:!w.current,name:n,value:m,checked:o,required:d,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});w.displayName=h;var j="RadioIndicator",k=r.forwardRef((e,r)=>{let{__scopeRadio:s,forceMount:a,...i}=e,l=g(j,s);return(0,t.jsx)(p.Presence,{present:a||l.checked,children:(0,t.jsx)(c.span,{"data-state":E(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:r})})});k.displayName=j;var b=r.forwardRef(({__scopeRadio:e,control:s,checked:a,bubbles:l=!0,...n},o)=>{let d=r.useRef(null),u=(0,i.useComposedRefs)(d,o),p=(0,f.usePrevious)(a),h=(0,m.useSize)(s);return r.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==a&&t){let r=new Event("click",{bubbles:l});t.call(e,a),e.dispatchEvent(r)}},[p,a,l]),(0,t.jsx)(c.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:u,style:{...n.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function E(e){return e?"checked":"unchecked"}b.displayName="RadioBubbleInput";var C=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S="RadioGroup",[N,_]=(0,l.createContextScope)(S,[o.createRovingFocusGroupScope,y]),M=(0,o.createRovingFocusGroupScope)(),R=y(),[A,I]=N(S),z=r.forwardRef((e,r)=>{let{__scopeRadioGroup:s,name:a,defaultValue:i,value:l,required:n=!1,disabled:m=!1,orientation:f,dir:p,loop:h=!0,onValueChange:v,...y}=e,x=M(s),g=(0,u.useDirection)(p),[w,j]=(0,d.useControllableState)({prop:l,defaultProp:i??null,onChange:v,caller:S});return(0,t.jsx)(A,{scope:s,name:a,required:n,disabled:m,value:w,onValueChange:j,children:(0,t.jsx)(o.Root,{asChild:!0,...x,orientation:f,dir:g,loop:h,children:(0,t.jsx)(c.div,{role:"radiogroup","aria-required":n,"aria-orientation":f,"data-disabled":m?"":void 0,dir:g,...y,ref:r})})})});z.displayName=S;var P="RadioGroupItem",L=r.forwardRef((e,s)=>{let{__scopeRadioGroup:l,disabled:n,...c}=e,d=I(P,l),u=d.disabled||n,m=M(l),f=R(l),p=r.useRef(null),h=(0,i.useComposedRefs)(s,p),v=d.value===c.value,y=r.useRef(!1);return r.useEffect(()=>{let e=e=>{C.includes(e.key)&&(y.current=!0)},t=()=>y.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,t.jsx)(o.Item,{asChild:!0,...m,focusable:!u,active:v,children:(0,t.jsx)(w,{disabled:u,required:d.required,checked:v,...f,...c,name:d.name,ref:h,onCheck:()=>d.onValueChange(c.value),onKeyDown:(0,a.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,a.composeEventHandlers)(c.onFocus,()=>{y.current&&p.current?.click()})})})});L.displayName=P;var B=r.forwardRef((e,r)=>{let{__scopeRadioGroup:s,...a}=e,i=R(s);return(0,t.jsx)(k,{...i,...a,ref:r})});B.displayName="RadioGroupIndicator",e.s(["Indicator",()=>B,"Item",()=>L,"RadioGroup",()=>z,"RadioGroupIndicator",()=>B,"RadioGroupItem",()=>L,"Root",()=>z,"createRadioGroupScope",()=>_],672310);var F=e.i(672310),F=F,O=e.i(647163);let $=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(F.Root,{className:(0,O.cn)("grid gap-2",e),...r,ref:s}));$.displayName=F.Root.displayName;let G=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(F.Item,{ref:a,className:(0,O.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(F.Indicator,{className:"flex items-center justify-center",children:(0,t.jsx)(s.Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));G.displayName=F.Item.displayName,e.s(["RadioGroup",()=>$,"RadioGroupItem",()=>G],416540)},211003,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(643531),a=e.i(531278),i=e.i(107233),l=e.i(116019),n=e.i(37727),c=e.i(604570),o=e.i(846696),d=e.i(167881),u=e.i(52563),m=e.i(954616),f=e.i(266027),p=e.i(912598),h=e.i(394073),v=e.i(647163);let y=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)return!1;let r=Math.max(e.length,t.length),s=0;for(let a=0;a<r;a++)s|=(a<e.length?e.charCodeAt(a):0)^(a<t.length?t.charCodeAt(a):0);return 0===s&&e.length===t.length};var x=e.i(23750),g=e.i(10708),w=e.i(671428);e.s(["Secrets",0,()=>{let{data:e,isLoading:j}=(()=>{let{getAccessTokenSilently:e}=(0,u.useAuth0)();return(0,f.useQuery)({queryKey:["userSecrets"],queryFn:async()=>{let t=await e(),r=await (0,v.customFetch)(`${h.BASE_API}/api/user_secrets`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw Error("Failed to fetch user secrets");let s=await r.json();if(!s.success)throw Error("API reported failure in fetching user secrets");return s.secrets},retry:!1,refetchOnWindowFocus:!1})})(),[k,b]=(0,r.useState)([]);(0,r.useEffect)(()=>{e&&b(e.map(e=>({...e,modified:!1})))},[e]);let E=(()=>{let{getAccessTokenSilently:e}=(0,u.useAuth0)(),t=(0,p.useQueryClient)();return(0,m.useMutation)({mutationFn:async t=>{let r=await e(),s=await (0,v.customFetch)(`${h.BASE_API}/api/user_secrets`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to save user secret");let a=await s.json();if(!a.success)throw Error("API reported failure in saving user secret");return a?.secret},onSuccess:e=>{e&&t.setQueryData(["userSecrets"],t=>{if(!t)return[e];let r=t.findIndex(t=>y(String(t.id),String(e.id)));return r>=0?[...t.slice(0,r),e,...t.slice(r+1)]:[...t,e]})},onError:e=>{console.error("Error saving user secret:",e)},onSettled:()=>{t.invalidateQueries({queryKey:["userSecrets"]})}})})(),C=async()=>{let e=k.filter(e=>e.modified);if(0===e.length)return void o.toast.info("No changes to save");let t=e.map(e=>E.mutateAsync(e).then(()=>({success:!0,secret:e})).catch(t=>({success:!1,secret:e,error:t}))),r=await Promise.all(t),s=r.filter(e=>e.success),a=r.filter(e=>!e.success);b(e=>e.map(e=>{let t=s.find(t=>t.secret.id===e.id||t.secret.temp_secret_id===e.temp_secret_id);return t?{...t.secret,modified:!1}:e})),s.length>0&&o.toast.success(`Successfully saved ${s.length} secret(s)`),a.length>0&&(o.toast.error(`Failed to save ${a.length} secret(s)`),console.error("Failed saves:",a))},S=(()=>{let e=(0,p.useQueryClient)(),{getAccessTokenSilently:t}=(0,u.useAuth0)();return(0,m.useMutation)({mutationFn:async e=>{let r=await t(),s=await (0,v.customFetch)(`${h.BASE_API}/api/user_secrets`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},method:"DELETE",body:JSON.stringify(e)});if(!s.ok)throw Error("Failed to delete user secret");return s.json()},onMutate:async t=>{await e.cancelQueries({queryKey:["userSecrets"]});let r=e.getQueryData(["userSecrets"]);return e.setQueryData(["userSecrets"],e=>Array.isArray(e)?e.filter(e=>!y(String(e.id),String(t.id))):[]),{previousSecrets:r}},onError:(t,r,s)=>{e.setQueryData(["userSecrets"],s.previousSecrets)},onSettled:()=>{e.invalidateQueries({queryKey:["userSecrets"]})}})})(),N=e=>{e.id?S.mutateAsync(e).then(()=>o.toast.success("Secret deleted")):b(t=>t.filter(t=>t!==e))};return(0,t.jsx)("div",{className:"flex flex-col gap-2 w-full",children:(0,t.jsxs)("div",{className:"mb-auto py-3 sm:px-3 space-y-2 text-sm text-muted-foreground",children:[(0,t.jsx)("h2",{className:"font-semibold text-foreground mb-1",children:"Secrets"}),(0,t.jsx)("p",{children:"Set secrets (e.g., API keys or DB connection strings) for the AI to use securely (without revealing their values)."}),(0,t.jsx)("div",{className:"flex gap-4 justify-start",children:(0,t.jsxs)(d.Button,{className:"gap-1",variant:"outline","data-cy":"add-secret",onClick:()=>{c.default.capture("add_secret"),b(e=>[...e,{secret_name:"",secret_value:"",temp_secret_id:Math.random(),id:null,modified:!0}])},children:[(0,t.jsx)(i.Plus,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:"Add Secret Key"})]})}),j?(0,t.jsxs)("div",{className:"sm:px-3 flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col w-40 gap-0.5",children:[(0,t.jsx)(w.Skeleton,{className:"h-4 w-16"}),(0,t.jsx)(w.Skeleton,{className:"h-10 sm:w-40"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-40 gap-0.5",children:[(0,t.jsx)(w.Skeleton,{className:"h-4 w-16"}),(0,t.jsx)(w.Skeleton,{className:"h-10 sm:w-40"})]})]}),(0,t.jsx)(w.Skeleton,{className:"h-10 w-36"})]}):(0,t.jsx)("div",{className:"flex flex-wrap flex-col gap-4 w-full sm:px-3",children:k.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-end relative gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:w-40 gap-0.5",children:[(0,t.jsx)(g.Label,{htmlFor:`key_name_${r}`,className:"text-xs font-semibold opacity-50",children:"Name"}),(0,t.jsx)(x.Input,{id:`key_name_${r}`,className:"p-2 border rounded focus:outline-none resize-none text-foreground bg-sidebackground",placeholder:"Enter name",value:e.secret_name,onChange:e=>b(t=>t.map((t,s)=>s===r?{...t,secret_name:e.target.value,modified:!0}:t))})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:w-40 gap-0.5",children:[(0,t.jsx)(g.Label,{htmlFor:`key_value_${r}`,className:"text-xs font-semibold opacity-50",children:"Value"}),(0,t.jsx)(x.Input,{type:"password",id:`key_value_${r}`,className:"p-2 border rounded focus:outline-none resize-none text-foreground bg-sidebackground",placeholder:"Enter secret",value:e.secret_value,onChange:e=>b(t=>[...t.slice(0,r),{...t[r],secret_value:e.target.value,modified:!0},...t.slice(r+1)])})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:k.length>0&&(e.modified?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Button,{size:"icon",variant:"outline",disabled:E.isPending,onClick:()=>{c.default.capture("save_secrets"),C()},children:E.isPending?(0,t.jsx)(a.Loader2,{className:"animate-spin h-4 w-4"}):(0,t.jsx)(s.Check,{className:"h-4 w-4","data-cy":"check-submit"})}),(0,t.jsx)(d.Button,{"data-cy":"delete-secret",size:"icon",variant:"outline",onClick:()=>N(e),disabled:S.isPending,children:(0,t.jsx)(n.X,{className:"h-4 w-4"})})]}):(0,t.jsxs)(d.Button,{size:"icon",variant:"outline",onClick:()=>N(e),disabled:S.isPending,children:[(0,t.jsx)(l.Trash,{className:"h-4 w-4","data-cy":"trash-delete"})," "]}))})]},r))})]})})}],211003)}]);

//# debugId=df22ec30-2138-3c75-5680-ed26c22cbbba
//# sourceMappingURL=0328d5e6ed73becb.js.map